// ==UserScript==
// @name        Rule34 Redux V2
// @run-at      document-body
// @description A redesign of r34 with subscription and infinte scroll
// @namespace   https://github.com/mister-milky/r34-redux
// @version     1.0.0
// @match       *://rule34.xxx/*
// @icon        https://www.google.com/s2/favicons?sz=64&domain=rule34.xxx
// @grant       xmlHttpRequest
// @grant       GM_addStyle
// ==/UserScript==

var In=(F,U,Y)=>{if(!U.has(F))throw TypeError("Cannot "+Y)};var d=(F,U,Y)=>(In(F,U,"read from private field"),Y?Y.call(F):U.get(F)),P=(F,U,Y)=>{if(U.has(F))throw TypeError("Cannot add the same private member more than once");U instanceof WeakSet?U.add(F):U.set(F,Y)},S=(F,U,Y,$e)=>(In(F,U,"write to private field"),$e?$e.call(F,Y):U.set(F,Y),Y);var Pr=(F,U,Y,$e)=>({set _(He){S(F,U,He,Y)},get _(){return d(F,U,$e)}}),N=(F,U,Y)=>(In(F,U,"access private method"),Y);(function(F){typeof define=="function"&&define.amd?define(F):F()})(function(){var We,Ae,pt,io,mt,Ie,gt,so,Ve,oo,yt,_t,ue,Ke,X,Qt,Ge,pe,Re,ao,we,co,xe,ee,Ye,Se,Ue,lo,Oe,me,Wt,uo,z,De,Me,vt,bt,Fe,wt,xt,ho,ie,$,Vt,te,Ze,St,Le,Ce,Kt,Ct,kt,Je,Xe,je,Pt,et,rr,Gt,Dn,Yt,Mn,Zt,Fn,Jt,Ln,Xt,jn,er,Un,tr,Hn,kr,po,fo;"use strict";const F=(e,t=document.body)=>t.querySelector(e),U=(e,t=document.body)=>Array.from(t.querySelectorAll(e)),Y=async(e,{parent:t=document.body,maxWait:r=2e3}={})=>{const n=performance.now();for(;performance.now()-n<r;){await go(1);const i=F(e,t);if(i)return i}throw new Error(`Could not find ${e}`)},$e=(e,t=document.body)=>U(e,t).map(r=>r.remove()),He=e=>{try{return e()}catch(t){console.error(t)}};function mo(e){const t=document.createElement("style");return t.innerHTML=e,document.head.appendChild(t),t}const go=e=>new Promise(t=>setTimeout(t,e)),tt=(e,t=document.location.href)=>yo(t).get(e),yo=e=>{if(e.startsWith("?"))return new URLSearchParams(e.slice(1));if(e.startsWith("http")){const r=new URL(e);return new URLSearchParams(r.search)}const t=new URL("https://example.com"+e.split("?").slice(1).join(""));return new URLSearchParams(t.search)};function _o(e){return Object.entries(e)}var Pe;function vo(e){return{lang:(e==null?void 0:e.lang)??(Pe==null?void 0:Pe.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(Pe==null?void 0:Pe.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(Pe==null?void 0:Pe.abortPipeEarly)}}var Er;function bo(e){return Er==null?void 0:Er.get(e)}var Tr;function wo(e){return Tr==null?void 0:Tr.get(e)}var Or;function xo(e,t){var r;return(r=Or==null?void 0:Or.get(e))==null?void 0:r.get(t)}function qn(e){var r,n;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((n=(r=Object.getPrototypeOf(e))==null?void 0:r.constructor)==null?void 0:n.name))??"null":t}function rt(e,t,r,n,i){const s=i&&"input"in i?i.input:r.value,a=(i==null?void 0:i.expected)??e.expects??null,c=(i==null?void 0:i.received)??qn(s),l={kind:e.kind,type:e.type,input:s,expected:a,received:c,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${c}`,requirement:e.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},h=e.kind==="schema",f=(i==null?void 0:i.message)??e.message??xo(e.reference,l.lang)??(h?wo(l.lang):null)??n.message??bo(l.lang);f&&(l.message=typeof f=="function"?f(l):f),h&&(r.typed=!1),r.issues?r.issues.push(l):r.issues=[l]}function So(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}function Co(e,t,r){return typeof e.default=="function"?e.default(t,r):e.default}function zn(e,t){return{kind:"schema",type:"array",reference:zn,expects:"Array",async:!1,item:e,message:t,_run(r,n){var s;const i=r.value;if(Array.isArray(i)){r.typed=!0,r.value=[];for(let a=0;a<i.length;a++){const c=i[a],l=this.item._run({typed:!1,value:c},n);if(l.issues){const h={type:"array",origin:"value",input:i,key:a,value:c};for(const f of l.issues)f.path?f.path.unshift(h):f.path=[h],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}}else rt(this,"type",r,n);return r}}}function Bn(e){return{kind:"schema",type:"boolean",reference:Bn,expects:"boolean",async:!1,message:e,_run(t,r){return typeof t.value=="boolean"?t.typed=!0:rt(this,"type",t,r),t}}}function Qn(e,t){const r=Object.entries(e).filter(([n])=>isNaN(+n)).map(([,n])=>n);return{kind:"schema",type:"enum",reference:Qn,expects:So(r.map(qn),"|"),async:!1,enum:e,options:r,message:t,_run(n,i){return this.options.includes(n.value)?n.typed=!0:rt(this,"type",n,i),n}}}function Wn(e){return{kind:"schema",type:"number",reference:Wn,expects:"number",async:!1,message:e,_run(t,r){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:rt(this,"type",t,r),t}}}function Rr(e,t){return{kind:"schema",type:"object",reference:Rr,expects:"Object",async:!1,entries:e,message:t,_run(r,n){var s;const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const a in this.entries){const c=i[a],l=this.entries[a]._run({typed:!1,value:c},n);if(l.issues){const h={type:"object",origin:"value",input:i,key:a,value:c};for(const f of l.issues)f.path?f.path.unshift(h):f.path=[h],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||a in i)&&(r.value[a]=l.value)}}else rt(this,"type",r,n);return r}}}function Et(e,...t){const r={kind:"schema",type:"optional",reference:Et,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(n,i){return n.value===void 0&&("default"in this&&(n.value=Co(this,n,i)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,i)}};return 0 in t&&(r.default=t[0]),r}function Q(e){return{kind:"schema",type:"string",reference:Q,expects:"string",async:!1,message:e,_run(t,r){return typeof t.value=="string"?t.typed=!0:rt(this,"type",t,r),t}}}function ko(e,t,r){const n=e._run({typed:!1,value:t},vo(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}async function $r({search:e,page:t=0,limit:r=64}){return await Vn({limit:r,page:t,params:{tags:e}})}async function Po(e){const{posts:t}=await Vn({params:{id:e},limit:1});return t.length===1?t[0]:null}async function Vn({limit:e=64,page:t=0,params:r={}}){const n=new URLSearchParams(r);n.set("limit",e.toString()),n.set("pid",t.toString());const s=await(await fetch(`https://api.rule34.xxx/index.php?page=dapi&s=post&q=index&${n.toString()}`)).text(),c=new DOMParser().parseFromString(s,"text/xml").querySelector("posts");if(!c)return{posts:[],remaining:0,total:0};const l=c.attributes.getNamedItem("count"),h=parseInt((l==null?void 0:l.nodeValue)??"0"),f=h-(t+1)*64;return{posts:Array.from(c.children).map(Eo).filter(p=>!!p),total:h,remaining:f}}const Kn=(e,t)=>new URL(e).pathname.endsWith(t);function Eo(e){const t=Array.from(e.attributes).map(a=>[a.nodeName,a.nodeValue]),r=Object.fromEntries(t),n=ko(To,r);if(!n.success)return;const i=n.output,s=Kn(i.file_url,"mp4")||Kn(i.file_url,"webm");return{id:i.id,created_at:new Date(i.created_at),type:s?"video":"image",score:parseInt(i.score),source:i.source,tags:i.tags.split(" ").filter(a=>a!==""),full:{url:Nr(i.file_url),height:parseInt(i.height),width:parseInt(i.width)},preview:{url:Nr(i.sample_url),width:parseInt(i.sample_width),height:parseInt(i.sample_height)},thumbnail:{url:Nr(i.preview_url),width:parseInt(i.preview_width),height:parseInt(i.preview_height)}}}const Nr=e=>{let t=new URL(e);return t.host="rule34.xxx",t.toString()},To=Rr({id:Q(),created_at:Q(),score:Q(),rating:Q(),tags:Q(),md5:Q(),creator_id:Q(),source:Q(),file_url:Q(),width:Q(),height:Q(),sample_url:Q(),sample_width:Q(),sample_height:Q(),preview_url:Q(),preview_width:Q(),preview_height:Q()});var Oo=!1;function Ro(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function $o(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var No=function(){function e(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!Oo:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($o(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Ro(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Z="-ms-",nr="-moz-",I="-webkit-",Gn="comm",Ar="rule",Ir="decl",Ao="@import",Yn="@keyframes",Io="@layer",Do=Math.abs,ir=String.fromCharCode,Mo=Object.assign;function Fo(e,t){return W(e,0)^45?(((t<<2^W(e,0))<<2^W(e,1))<<2^W(e,2))<<2^W(e,3):0}function Zn(e){return e.trim()}function Lo(e,t){return(e=t.exec(e))?e[0]:e}function D(e,t,r){return e.replace(t,r)}function Dr(e,t){return e.indexOf(t)}function W(e,t){return e.charCodeAt(t)|0}function Tt(e,t,r){return e.slice(t,r)}function ge(e){return e.length}function Mr(e){return e.length}function sr(e,t){return t.push(e),e}function jo(e,t){return e.map(t).join("")}var or=1,nt=1,Jn=0,re=0,B=0,it="";function ar(e,t,r,n,i,s,a){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:or,column:nt,length:a,return:""}}function Ot(e,t){return Mo(ar("",null,null,"",null,null,0),e,{length:-e.length},t)}function Uo(){return B}function Ho(){return B=re>0?W(it,--re):0,nt--,B===10&&(nt=1,or--),B}function se(){return B=re<Jn?W(it,re++):0,nt++,B===10&&(nt=1,or++),B}function ye(){return W(it,re)}function cr(){return re}function Rt(e,t){return Tt(it,e,t)}function $t(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Xn(e){return or=nt=1,Jn=ge(it=e),re=0,[]}function ei(e){return it="",e}function lr(e){return Zn(Rt(re-1,Fr(e===91?e+2:e===40?e+1:e)))}function qo(e){for(;(B=ye())&&B<33;)se();return $t(e)>2||$t(B)>3?"":" "}function zo(e,t){for(;--t&&se()&&!(B<48||B>102||B>57&&B<65||B>70&&B<97););return Rt(e,cr()+(t<6&&ye()==32&&se()==32))}function Fr(e){for(;se();)switch(B){case e:return re;case 34:case 39:e!==34&&e!==39&&Fr(B);break;case 40:e===41&&Fr(e);break;case 92:se();break}return re}function Bo(e,t){for(;se()&&e+B!==47+10;)if(e+B===42+42&&ye()===47)break;return"/*"+Rt(t,re-1)+"*"+ir(e===47?e:se())}function Qo(e){for(;!$t(ye());)se();return Rt(e,re)}function Wo(e){return ei(ur("",null,null,null,[""],e=Xn(e),0,[0],e))}function ur(e,t,r,n,i,s,a,c,l){for(var h=0,f=0,u=a,_=0,p=0,g=0,m=1,v=1,w=1,b=0,x="",k=i,y=s,R=n,T=x;v;)switch(g=b,b=se()){case 40:if(g!=108&&W(T,u-1)==58){Dr(T+=D(lr(b),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:T+=lr(b);break;case 9:case 10:case 13:case 32:T+=qo(g);break;case 92:T+=zo(cr()-1,7);continue;case 47:switch(ye()){case 42:case 47:sr(Vo(Bo(se(),cr()),t,r),l);break;default:T+="/"}break;case 123*m:c[h++]=ge(T)*w;case 125*m:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+f:w==-1&&(T=D(T,/\f/g,"")),p>0&&ge(T)-u&&sr(p>32?ri(T+";",n,r,u-1):ri(D(T," ","")+";",n,r,u-2),l);break;case 59:T+=";";default:if(sr(R=ti(T,t,r,h,f,i,c,x,k=[],y=[],u),s),b===123)if(f===0)ur(T,t,R,R,k,s,u,c,y);else switch(_===99&&W(T,3)===110?100:_){case 100:case 108:case 109:case 115:ur(e,R,R,n&&sr(ti(e,R,R,0,0,i,c,x,i,k=[],u),y),i,y,u,c,n?k:y);break;default:ur(T,R,R,R,[""],y,0,c,y)}}h=f=p=0,m=w=1,x=T="",u=a;break;case 58:u=1+ge(T),p=g;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&Ho()==125)continue}switch(T+=ir(b),b*m){case 38:w=f>0?1:(T+="\f",-1);break;case 44:c[h++]=(ge(T)-1)*w,w=1;break;case 64:ye()===45&&(T+=lr(se())),_=ye(),f=u=ge(x=T+=Qo(cr())),b++;break;case 45:g===45&&ge(T)==2&&(m=0)}}return s}function ti(e,t,r,n,i,s,a,c,l,h,f){for(var u=i-1,_=i===0?s:[""],p=Mr(_),g=0,m=0,v=0;g<n;++g)for(var w=0,b=Tt(e,u+1,u=Do(m=a[g])),x=e;w<p;++w)(x=Zn(m>0?_[w]+" "+b:D(b,/&\f/g,_[w])))&&(l[v++]=x);return ar(e,t,r,i===0?Ar:c,l,h,f)}function Vo(e,t,r){return ar(e,t,r,Gn,ir(Uo()),Tt(e,2,-2),0)}function ri(e,t,r,n){return ar(e,t,r,Ir,Tt(e,0,n),Tt(e,n+1,-1),n)}function st(e,t){for(var r="",n=Mr(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function Ko(e,t,r,n){switch(e.type){case Io:if(e.children.length)break;case Ao:case Ir:return e.return=e.return||e.value;case Gn:return"";case Yn:return e.return=e.value+"{"+st(e.children,n)+"}";case Ar:e.value=e.props.join(",")}return ge(r=st(e.children,n))?e.return=e.value+"{"+r+"}":""}function Go(e){var t=Mr(e);return function(r,n,i,s){for(var a="",c=0;c<t;c++)a+=e[c](r,n,i,s)||"";return a}}function Yo(e){return function(t){t.root||(t=t.return)&&e(t)}}function Zo(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Jo=function(t,r,n){for(var i=0,s=0;i=s,s=ye(),i===38&&s===12&&(r[n]=1),!$t(s);)se();return Rt(t,re)},Xo=function(t,r){var n=-1,i=44;do switch($t(i)){case 0:i===38&&ye()===12&&(r[n]=1),t[n]+=Jo(re-1,r,n);break;case 2:t[n]+=lr(i);break;case 4:if(i===44){t[++n]=ye()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=ir(i)}while(i=se());return t},ea=function(t,r){return ei(Xo(Xn(t),r))},ni=new WeakMap,ta=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!ni.get(n))&&!i){ni.set(t,!0);for(var s=[],a=ea(r,s),c=n.props,l=0,h=0;l<a.length;l++)for(var f=0;f<c.length;f++,h++)t.props[h]=s[l]?a[l].replace(/&\f/g,c[f]):c[f]+" "+a[l]}}},ra=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function ii(e,t){switch(Fo(e,t)){case 5103:return I+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return I+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return I+e+nr+e+Z+e+e;case 6828:case 4268:return I+e+Z+e+e;case 6165:return I+e+Z+"flex-"+e+e;case 5187:return I+e+D(e,/(\w+).+(:[^]+)/,I+"box-$1$2"+Z+"flex-$1$2")+e;case 5443:return I+e+Z+"flex-item-"+D(e,/flex-|-self/,"")+e;case 4675:return I+e+Z+"flex-line-pack"+D(e,/align-content|flex-|-self/,"")+e;case 5548:return I+e+Z+D(e,"shrink","negative")+e;case 5292:return I+e+Z+D(e,"basis","preferred-size")+e;case 6060:return I+"box-"+D(e,"-grow","")+I+e+Z+D(e,"grow","positive")+e;case 4554:return I+D(e,/([^-])(transform)/g,"$1"+I+"$2")+e;case 6187:return D(D(D(e,/(zoom-|grab)/,I+"$1"),/(image-set)/,I+"$1"),e,"")+e;case 5495:case 3959:return D(e,/(image-set\([^]*)/,I+"$1$`$1");case 4968:return D(D(e,/(.+:)(flex-)?(.*)/,I+"box-pack:$3"+Z+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+I+e+e;case 4095:case 3583:case 4068:case 2532:return D(e,/(.+)-inline(.+)/,I+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ge(e)-1-t>6)switch(W(e,t+1)){case 109:if(W(e,t+4)!==45)break;case 102:return D(e,/(.+:)(.+)-([^]+)/,"$1"+I+"$2-$3$1"+nr+(W(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Dr(e,"stretch")?ii(D(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(W(e,t+1)!==115)break;case 6444:switch(W(e,ge(e)-3-(~Dr(e,"!important")&&10))){case 107:return D(e,":",":"+I)+e;case 101:return D(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+I+(W(e,14)===45?"inline-":"")+"box$3$1"+I+"$2$3$1"+Z+"$2box$3")+e}break;case 5936:switch(W(e,t+11)){case 114:return I+e+Z+D(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return I+e+Z+D(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return I+e+Z+D(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return I+e+Z+e+e}return e}var na=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case Ir:t.return=ii(t.value,t.length);break;case Yn:return st([Ot(t,{value:D(t.value,"@","@"+I)})],i);case Ar:if(t.length)return jo(t.props,function(s){switch(Lo(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return st([Ot(t,{props:[D(s,/:(read-\w+)/,":"+nr+"$1")]})],i);case"::placeholder":return st([Ot(t,{props:[D(s,/:(plac\w+)/,":"+I+"input-$1")]}),Ot(t,{props:[D(s,/:(plac\w+)/,":"+nr+"$1")]}),Ot(t,{props:[D(s,/:(plac\w+)/,Z+"input-$1")]})],i)}return""})}},ia=[na],sa=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(m){var v=m.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||ia,s={},a,c=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(m){for(var v=m.getAttribute("data-emotion").split(" "),w=1;w<v.length;w++)s[v[w]]=!0;c.push(m)});var l,h=[ta,ra];{var f,u=[Ko,Yo(function(m){f.insert(m)})],_=Go(h.concat(i,u)),p=function(v){return st(Wo(v),_)};l=function(v,w,b,x){f=b,p(v?v+"{"+w.styles+"}":w.styles),x&&(g.inserted[w.name]=!0)}}var g={key:r,sheet:new No({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(c),g};function oa(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var aa={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ca=!1,la=/[A-Z]|^ms/g,ua=/_EMO_([^_]+?)_([^]*?)_EMO_/g,si=function(t){return t.charCodeAt(1)===45},oi=function(t){return t!=null&&typeof t!="boolean"},Lr=Zo(function(e){return si(e)?e:e.replace(la,"-$&").toLowerCase()}),ai=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(ua,function(n,i,s){return _e={name:i,styles:s,next:_e},i})}return aa[t]!==1&&!si(t)&&typeof r=="number"&&r!==0?r+"px":r},ha="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Nt(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return _e={name:i.name,styles:i.styles,next:_e},i.name;var s=r;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)_e={name:a.name,styles:a.styles,next:_e},a=a.next;var c=s.styles+";";return c}return da(e,t,r)}case"function":{if(e!==void 0){var l=_e,h=r(e);return _e=l,Nt(e,t,h)}break}}var f=r;if(t==null)return f;var u=t[f];return u!==void 0?u:f}function da(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Nt(e,t,r[i])+";";else for(var s in r){var a=r[s];if(typeof a!="object"){var c=a;t!=null&&t[c]!==void 0?n+=s+"{"+t[c]+"}":oi(c)&&(n+=Lr(s)+":"+ai(s,c)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&ca)throw new Error(ha);if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var l=0;l<a.length;l++)oi(a[l])&&(n+=Lr(s)+":"+ai(s,a[l])+";");else{var h=Nt(e,t,a);switch(s){case"animation":case"animationName":{n+=Lr(s)+":"+h+";";break}default:n+=s+"{"+h+"}"}}}}return n}var ci=/label:\s*([^\s;{]+)\s*(;|$)/g,_e;function jr(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";_e=void 0;var s=e[0];if(s==null||s.raw===void 0)n=!1,i+=Nt(r,t,s);else{var a=s;i+=a[0]}for(var c=1;c<e.length;c++)if(i+=Nt(r,t,e[c]),n){var l=s;i+=l[c]}ci.lastIndex=0;for(var h="",f;(f=ci.exec(i))!==null;)h+="-"+f[1];var u=oa(i)+h;return{name:u,styles:i,next:_e}}var fa=!0;function li(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(n+=i+" ")}),n}var pa=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||fa===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},ma=function(t,r,n){pa(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function ui(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function hi(e,t,r){var n=[],i=li(e,n,r);return n.length<2?r:i+t(n)}var ga=function(t){var r=sa(t);r.sheet.speedy=function(c){this.isSpeedy=c},r.compat=!0;var n=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];var u=jr(h,r.registered,void 0);return ma(r,u,!1),r.key+"-"+u.name},i=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];var u=jr(h,r.registered),_="animation-"+u.name;return ui(r,{name:u.name,styles:"@keyframes "+_+"{"+u.styles+"}"}),_},s=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];var u=jr(h,r.registered);ui(r,u)},a=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];return hi(r.registered,n,ya(h))};return{css:n,cx:a,injectGlobal:s,keyframes:i,hydrate:function(l){l.forEach(function(h){r.inserted[h]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:li.bind(null,r.registered),merge:hi.bind(null,r.registered,n)}},ya=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(i!=null){var s=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))s=e(i);else{s="";for(var a in i)i[a]&&a&&(s&&(s+=" "),s+=a)}break}default:s=i}s&&(r&&(r+=" "),r+=s)}}return r},_a=ga({key:"css"}),C=_a.css,At,O,di,qe,fi,pi,Ur,mi,Hr,qr,zr,gi,It={},yi=[],va=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hr=Array.isArray;function Ee(e,t){for(var r in t)e[r]=t[r];return e}function Br(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function de(e,t,r){var n,i,s,a={};for(s in t)s=="key"?n=t[s]:s=="ref"?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?At.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return Dt(e,a,n,i,null)}function Dt(e,t,r,n,i){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++di,__i:-1,__u:0};return i==null&&O.vnode!=null&&O.vnode(s),s}function ba(){return{current:null}}function ae(e){return e.children}function ce(e,t){this.props=e,this.context=t}function ot(e,t){if(t==null)return e.__?ot(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?ot(e):null}function _i(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return _i(e)}}function Qr(e){(!e.__d&&(e.__d=!0)&&qe.push(e)&&!dr.__r++||fi!==O.debounceRendering)&&((fi=O.debounceRendering)||pi)(dr)}function dr(){var e,t,r,n,i,s,a,c;for(qe.sort(Ur);e=qe.shift();)e.__d&&(t=qe.length,n=void 0,s=(i=(r=e).__v).__e,a=[],c=[],r.__P&&((n=Ee({},i)).__v=i.__v+1,O.vnode&&O.vnode(n),Wr(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,a,s??ot(i),!!(32&i.__u),c),n.__v=i.__v,n.__.__k[n.__i]=n,Si(a,n,c),n.__e!=s&&_i(n)),qe.length>t&&qe.sort(Ur));dr.__r=0}function vi(e,t,r,n,i,s,a,c,l,h,f){var u,_,p,g,m,v,w=n&&n.__k||yi,b=t.length;for(l=wa(r,t,w,l,b),u=0;u<b;u++)(p=r.__k[u])!=null&&(_=p.__i===-1?It:w[p.__i]||It,p.__i=u,v=Wr(e,p,_,i,s,a,c,l,h,f),g=p.__e,p.ref&&_.ref!=p.ref&&(_.ref&&Vr(_.ref,null,p),f.push(p.ref,p.__c||g,p)),m==null&&g!=null&&(m=g),4&p.__u||_.__k===p.__k?l=bi(p,l,e):typeof p.type=="function"&&v!==void 0?l=v:g&&(l=g.nextSibling),p.__u&=-7);return r.__e=m,l}function wa(e,t,r,n,i){var s,a,c,l,h,f=r.length,u=f,_=0;for(e.__k=new Array(i),s=0;s<i;s++)(a=t[s])!=null&&typeof a!="boolean"&&typeof a!="function"?(l=s+_,(a=e.__k[s]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?Dt(null,a,null,null,null):hr(a)?Dt(ae,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?Dt(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,c=null,(h=a.__i=xa(a,r,l,u))!==-1&&(u--,(c=r[h])&&(c.__u|=2)),c==null||c.__v===null?(h==-1&&_--,typeof a.type!="function"&&(a.__u|=4)):h!=l&&(h==l-1?_--:h==l+1?_++:(h>l?_--:_++,a.__u|=4))):e.__k[s]=null;if(u)for(s=0;s<f;s++)(c=r[s])!=null&&!(2&c.__u)&&(c.__e==n&&(n=ot(c)),Ci(c,c));return n}function bi(e,t,r){var n,i;if(typeof e.type=="function"){for(n=e.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=e,t=bi(n[i],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=ot(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Te(e,t){return t=t||[],e==null||typeof e=="boolean"||(hr(e)?e.some(function(r){Te(r,t)}):t.push(e)),t}function xa(e,t,r,n){var i,s,a=e.key,c=e.type,l=t[r];if(l===null||l&&a==l.key&&c===l.type&&!(2&l.__u))return r;if(n>(l!=null&&!(2&l.__u)?1:0))for(i=r-1,s=r+1;i>=0||s<t.length;){if(i>=0){if((l=t[i])&&!(2&l.__u)&&a==l.key&&c===l.type)return i;i--}if(s<t.length){if((l=t[s])&&!(2&l.__u)&&a==l.key&&c===l.type)return s;s++}}return-1}function wi(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||va.test(t)?r:r+"px"}function fr(e,t,r,n,i){var s;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||wi(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||wi(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(mi,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=Hr,e.addEventListener(t,s?zr:qr,s)):e.removeEventListener(t,s?zr:qr,s);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function xi(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Hr++;else if(t.t<r.u)return;return r(O.event?O.event(t):t)}}}function Wr(e,t,r,n,i,s,a,c,l,h){var f,u,_,p,g,m,v,w,b,x,k,y,R,T,A,M,he,G=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),s=[c=t.__e=r.__e]),(f=O.__b)&&f(t);e:if(typeof G=="function")try{if(w=t.props,b="prototype"in G&&G.prototype.render,x=(f=G.contextType)&&n[f.__c],k=f?x?x.props.value:f.__:n,r.__c?v=(u=t.__c=r.__c).__=u.__E:(b?t.__c=u=new G(w,k):(t.__c=u=new ce(w,k),u.constructor=G,u.render=Ca),x&&x.sub(u),u.props=w,u.state||(u.state={}),u.context=k,u.__n=n,_=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&G.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Ee({},u.__s)),Ee(u.__s,G.getDerivedStateFromProps(w,u.__s))),p=u.props,g=u.state,u.__v=t,_)b&&G.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&G.getDerivedStateFromProps==null&&w!==p&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(w,k),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(w,u.__s,k)===!1||t.__v==r.__v)){for(t.__v!=r.__v&&(u.props=w,u.state=u.__s,u.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(ke){ke&&(ke.__=t)}),y=0;y<u._sb.length;y++)u.__h.push(u._sb[y]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(w,u.__s,k),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(p,g,m)})}if(u.context=k,u.props=w,u.__P=e,u.__e=!1,R=O.__r,T=0,b){for(u.state=u.__s,u.__d=!1,R&&R(t),f=u.render(u.props,u.state,u.context),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[]}else do u.__d=!1,R&&R(t),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++T<25);u.state=u.__s,u.getChildContext!=null&&(n=Ee(Ee({},n),u.getChildContext())),b&&!_&&u.getSnapshotBeforeUpdate!=null&&(m=u.getSnapshotBeforeUpdate(p,g)),c=vi(e,hr(M=f!=null&&f.type===ae&&f.key==null?f.props.children:f)?M:[M],t,r,n,i,s,a,c,l,h),u.base=t.__e,t.__u&=-161,u.__h.length&&a.push(u),v&&(u.__E=u.__=null)}catch(ke){if(t.__v=null,l||s!=null)if(ke.then){for(t.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,t.__e=c}else for(he=s.length;he--;)Br(s[he]);else t.__e=r.__e,t.__k=r.__k;O.__e(ke,t,r)}else s==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):c=t.__e=Sa(r.__e,t,r,n,i,s,a,l,h);return(f=O.diffed)&&f(t),128&t.__u?void 0:c}function Si(e,t,r){for(var n=0;n<r.length;n++)Vr(r[n],r[++n],r[++n]);O.__c&&O.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){O.__e(s,i.__v)}})}function Sa(e,t,r,n,i,s,a,c,l){var h,f,u,_,p,g,m,v=r.props,w=t.props,b=t.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(h=0;h<s.length;h++)if((p=s[h])&&"setAttribute"in p==!!b&&(b?p.localName==b:p.nodeType==3)){e=p,s[h]=null;break}}if(e==null){if(b==null)return document.createTextNode(w);e=document.createElementNS(i,b,w.is&&w),c&&(O.__m&&O.__m(t,s),c=!1),s=null}if(b===null)v===w||c&&e.data===w||(e.data=w);else{if(s=s&&At.call(e.childNodes),v=r.props||It,!c&&s!=null)for(v={},h=0;h<e.attributes.length;h++)v[(p=e.attributes[h]).name]=p.value;for(h in v)if(p=v[h],h!="children"){if(h=="dangerouslySetInnerHTML")u=p;else if(!(h in w)){if(h=="value"&&"defaultValue"in w||h=="checked"&&"defaultChecked"in w)continue;fr(e,h,null,p,i)}}for(h in w)p=w[h],h=="children"?_=p:h=="dangerouslySetInnerHTML"?f=p:h=="value"?g=p:h=="checked"?m=p:c&&typeof p!="function"||v[h]===p||fr(e,h,p,v[h],i);if(f)c||u&&(f.__html===u.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(u&&(e.innerHTML=""),vi(e,hr(_)?_:[_],t,r,n,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:r.__k&&ot(r,0),c,l),s!=null)for(h=s.length;h--;)Br(s[h]);c||(h="value",b=="progress"&&g==null?e.removeAttribute("value"):g!==void 0&&(g!==e[h]||b=="progress"&&!g||b=="option"&&g!==v[h])&&fr(e,h,g,v[h],i),h="checked",m!==void 0&&m!==e[h]&&fr(e,h,m,v[h],i))}return e}function Vr(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(i){O.__e(i,r)}}function Ci(e,t,r){var n,i;if(O.unmount&&O.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||Vr(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){O.__e(s,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&Ci(n[i],t,r||typeof e.type!="function");r||Br(e.__e),e.__c=e.__=e.__e=void 0}function Ca(e,t,r){return this.constructor(e,r)}function Mt(e,t,r){var n,i,s,a;t==document&&(t=document.documentElement),O.__&&O.__(e,t),i=(n=typeof r=="function")?null:r&&r.__k||t.__k,s=[],a=[],Wr(t,e=(!n&&r||t).__k=de(ae,null,[e]),i||It,It,t.namespaceURI,!n&&r?[r]:i?null:t.firstChild?At.call(t.childNodes):null,s,!n&&r?r:i?i.__e:t.firstChild,n,a),Si(s,e,a)}function ki(e,t){Mt(e,t,ki)}function ka(e,t,r){var n,i,s,a,c=Ee({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)s=="key"?n=t[s]:s=="ref"?i=t[s]:c[s]=t[s]===void 0&&a!==void 0?a[s]:t[s];return arguments.length>2&&(c.children=arguments.length>3?At.call(arguments,2):r),Dt(e.type,c,n||e.key,i||e.ref,null)}function ze(e,t){var r={__c:t="__cC"+gi++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=new Set,(s={})[t]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.forEach(function(c){c.__e=!0,Qr(c)})},this.sub=function(a){i.add(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){i&&i.delete(a),c&&c.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}At=yi.slice,O={__e:function(e,t,r,n){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(c){e=c}throw e}},di=0,ce.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ee({},this.state),typeof e=="function"&&(e=e(Ee({},r),this.props)),e&&Ee(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Qr(this))},ce.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Qr(this))},ce.prototype.render=ae,qe=[],pi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ur=function(e,t){return e.__v.__b-t.__v.__b},dr.__r=0,mi=/(PointerCapture)$|Capture$/i,Hr=0,qr=xi(!1),zr=xi(!0),gi=0;var Kr;function H(e,t){return O.__a&&O.__a(t),e}(Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:void 0)!=null&&Kr.__PREACT_DEVTOOLS__&&Kr.__PREACT_DEVTOOLS__.attachPreact("10.25.4",O,{Fragment:ae,Component:ce});var Ne,j,Gr,Pi,at=0,Ei=[],q=O,Ti=q.__b,Oi=q.__r,Ri=q.diffed,$i=q.__c,Ni=q.unmount,Ai=q.__;function ct(e,t){q.__h&&q.__h(j,e,at||t),at=0;var r=j.__H||(j.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function V(e){return at=1,Yr(Li,e)}function Yr(e,t,r){var n=ct(Ne++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Li(void 0,t),function(c){var l=n.__N?n.__N[0]:n.__[0],h=n.t(l,c);l!==h&&(n.__N=[h,n.__[1]],n.__c.setState({}))}],n.__c=j,!j.u)){var i=function(c,l,h){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(_){return!!_.__c});if(f.every(function(_){return!_.__N}))return!s||s.call(this,c,l,h);var u=n.__c.props!==c;return f.forEach(function(_){if(_.__N){var p=_.__[0];_.__=_.__N,_.__N=void 0,p!==_.__[0]&&(u=!0)}}),s&&s.call(this,c,l,h)||u};j.u=!0;var s=j.shouldComponentUpdate,a=j.componentWillUpdate;j.componentWillUpdate=function(c,l,h){if(this.__e){var f=s;s=void 0,i(c,l,h),s=f}a&&a.call(this,c,l,h)},j.shouldComponentUpdate=i}return n.__N||n.__}function oe(e,t){var r=ct(Ne++,3);!q.__s&&Jr(r.__H,t)&&(r.__=e,r.i=t,j.__H.__h.push(r))}function lt(e,t){var r=ct(Ne++,4);!q.__s&&Jr(r.__H,t)&&(r.__=e,r.i=t,j.__h.push(r))}function ut(e){return at=5,ne(function(){return{current:e}},[])}function Ii(e,t,r){at=6,lt(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function ne(e,t){var r=ct(Ne++,7);return Jr(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function J(e,t){return at=8,ne(function(){return e},t)}function ht(e){var t=j.context[e.__c],r=ct(Ne++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(j)),t.props.value):e.__}function Di(e,t){q.useDebugValue&&q.useDebugValue(t?t(e):e)}function Mi(){var e=ct(Ne++,11);if(!e.__){for(var t=j.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function Pa(){for(var e;e=Ei.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pr),e.__H.__h.forEach(Zr),e.__H.__h=[]}catch(t){e.__H.__h=[],q.__e(t,e.__v)}}q.__b=function(e){j=null,Ti&&Ti(e)},q.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ai&&Ai(e,t)},q.__r=function(e){Oi&&Oi(e),Ne=0;var t=(j=e.__c).__H;t&&(Gr===j?(t.__h=[],j.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.i=r.__N=void 0})):(t.__h.forEach(pr),t.__h.forEach(Zr),t.__h=[],Ne=0)),Gr=j},q.diffed=function(e){Ri&&Ri(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Ei.push(t)!==1&&Pi===q.requestAnimationFrame||((Pi=q.requestAnimationFrame)||Ea)(Pa)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.i=void 0})),Gr=j=null},q.__c=function(e,t){t.some(function(r){try{r.__h.forEach(pr),r.__h=r.__h.filter(function(n){return!n.__||Zr(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],q.__e(n,r.__v)}}),$i&&$i(e,t)},q.unmount=function(e){Ni&&Ni(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{pr(n)}catch(i){t=i}}),r.__H=void 0,t&&q.__e(t,r.__v))};var Fi=typeof requestAnimationFrame=="function";function Ea(e){var t,r=function(){clearTimeout(n),Fi&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Fi&&(t=requestAnimationFrame(r))}function pr(e){var t=j,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),j=t}function Zr(e){var t=j;e.__c=e.__(),j=t}function Jr(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function Li(e,t){return typeof t=="function"?t(e):t}function ji(e,t){for(var r in t)e[r]=t[r];return e}function Xr(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function en(e,t){var r=t(),n=V({t:{__:r,u:t}}),i=n[0].t,s=n[1];return lt(function(){i.__=r,i.u=t,tn(i)&&s({t:i})},[e,r,t]),oe(function(){return tn(i)&&s({t:i}),e(function(){tn(i)&&s({t:i})})},[e]),r}function tn(e){var t,r,n=e.u,i=e.__;try{var s=n();return!((t=i)===(r=s)&&(t!==0||1/t==1/r)||t!=t&&r!=r)}catch{return!0}}function Ui(e){e()}function Hi(e){return e}function qi(){return[!1,Ui]}var zi=lt;function rn(e,t){this.props=e,this.context=t}function Bi(e,t){function r(i){var s=this.props.ref,a=s==i.ref;return!a&&s&&(s.call?s(null):s.current=null),t?!t(this.props,i)||!a:Xr(this.props,i)}function n(i){return this.shouldComponentUpdate=r,de(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(rn.prototype=new ce).isPureReactComponent=!0,rn.prototype.shouldComponentUpdate=function(e,t){return Xr(this.props,e)||Xr(this.state,t)};var Qi=O.__b;O.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Qi&&Qi(e)};var Ta=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Oa(e){function t(r){var n=ji({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=Ta,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Wi=function(e,t){return e==null?null:Te(Te(e).map(t))},Ra={map:Wi,forEach:Wi,count:function(e){return e?Te(e).length:0},only:function(e){var t=Te(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Te},$a=O.__e;O.__e=function(e,t,r,n){if(e.then){for(var i,s=t;s=s.__;)if((i=s.__c)&&i.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),i.__c(e,t)}$a(e,t,r,n)};var Vi=O.unmount;function Ki(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=ji({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Ki(n,t,r)})),e}function Gi(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Gi(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function Ft(){this.__u=0,this.o=null,this.__b=null}function Yi(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Na(e){var t,r,n;function i(s){if(t||(t=e()).then(function(a){r=a.default||a},function(a){n=a}),n)throw n;if(!r)throw t;return de(r,s)}return i.displayName="Lazy",i.__f=!0,i}function Lt(){this.i=null,this.l=null}O.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),Vi&&Vi(e)},(Ft.prototype=new ce).__c=function(e,t){var r=t.__c,n=this;n.o==null&&(n.o=[]),n.o.push(r);var i=Yi(n.__v),s=!1,a=function(){s||(s=!0,r.__R=null,i?i(c):c())};r.__R=a;var c=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=Gi(l,l.__c.__P,l.__c.__O)}var h;for(n.setState({__a:n.__b=null});h=n.o.pop();)h.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Ft.prototype.componentWillUnmount=function(){this.o=[]},Ft.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Ki(this.__b,r,n.__O=n.__P)}this.__b=null}var i=t.__a&&de(ae,null,e.fallback);return i&&(i.__u&=-33),[de(ae,null,t.__a?null:e.children),i]};var Zi=function(e,t,r){if(++r[1]===r[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(r=e.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.i=r=r[2]}};function Aa(e){return this.getChildContext=function(){return e.context},e.children}function Ia(e){var t=this,r=e.h;t.componentWillUnmount=function(){Mt(null,t.v),t.v=null,t.h=null},t.h&&t.h!==r&&t.componentWillUnmount(),t.v||(t.h=r,t.v={nodeType:1,parentNode:r,childNodes:[],contains:function(){return!0},appendChild:function(n){this.childNodes.push(n),t.h.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),t.h.insertBefore(n,i)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.h.removeChild(n)}}),Mt(de(Aa,{context:t.context},e.__v),t.v)}function Da(e,t){var r=de(Ia,{__v:e,h:t});return r.containerInfo=t,r}(Lt.prototype=new ce).__a=function(e){var t=this,r=Yi(t.__v),n=t.l.get(e);return n[0]++,function(i){var s=function(){t.props.revealOrder?(n.push(i),Zi(t,e,n)):i()};r?r(s):s()}},Lt.prototype.render=function(e){this.i=null,this.l=new Map;var t=Te(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.l.set(t[r],this.i=[1,0,this.i]);return e.children},Lt.prototype.componentDidUpdate=Lt.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,r){Zi(e,r,t)})};var Ji=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Ma=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Fa=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,La=/[A-Z0-9]/g,ja=typeof document<"u",Ua=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Xi(e,t,r){return t.__k==null&&(t.textContent=""),Mt(e,t),typeof r=="function"&&r(),e?e.__c:null}function Ha(e,t,r){return ki(e,t),typeof r=="function"&&r(),e?e.__c:null}ce.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ce.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var es=O.event;function qa(){}function za(){return this.cancelBubble}function Ba(){return this.defaultPrevented}O.event=function(e){return es&&(e=es(e)),e.persist=qa,e.isPropagationStopped=za,e.isDefaultPrevented=Ba,e.nativeEvent=e};var nn,Qa={enumerable:!1,configurable:!0,get:function(){return this.class}},ts=O.vnode;O.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,i={},s=n.indexOf("-")===-1;for(var a in r){var c=r[a];if(!(a==="value"&&"defaultValue"in r&&c==null||ja&&a==="children"&&n==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in r&&r.value==null?a="value":a==="download"&&c===!0?c="":l==="translate"&&c==="no"?c=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||n!=="input"&&n!=="textarea"||Ua(r.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":Fa.test(a)&&(a=l):l=a="oninput":s&&Ma.test(a)?a=a.replace(La,"-$&").toLowerCase():c===null&&(c=void 0),l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=c}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Te(r.children).forEach(function(h){h.props.selected=i.value.indexOf(h.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Te(r.children).forEach(function(h){h.props.selected=i.multiple?i.defaultValue.indexOf(h.props.value)!=-1:i.defaultValue==h.props.value})),r.class&&!r.className?(i.class=r.class,Object.defineProperty(i,"className",Qa)):(r.className&&!r.class||r.class&&r.className)&&(i.class=i.className=r.className),t.props=i}(e),e.$$typeof=Ji,ts&&ts(e)};var rs=O.__r;O.__r=function(e){rs&&rs(e),nn=e.__c};var ns=O.diffed;O.diffed=function(e){ns&&ns(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value),nn=null};var Wa={ReactCurrentDispatcher:{current:{readContext:function(e){return nn.__n[e.__c].props.value},useCallback:J,useContext:ht,useDebugValue:Di,useDeferredValue:Hi,useEffect:oe,useId:Mi,useImperativeHandle:Ii,useInsertionEffect:zi,useLayoutEffect:lt,useMemo:ne,useReducer:Yr,useRef:ut,useState:V,useSyncExternalStore:en,useTransition:qi}}};function Va(e){return de.bind(null,e)}function mr(e){return!!e&&e.$$typeof===Ji}function Ka(e){return mr(e)&&e.type===ae}function Ga(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Ya(e){return mr(e)?ka.apply(null,arguments):e}function is(e){return!!e.__k&&(Mt(null,e),!0)}function Za(e){return e&&(e.base||e.nodeType===1&&e)||null}var Ja=function(e,t){return e(t)},Xa=function(e,t){return e(t)},ec=ae,tc=mr,rc={useState:V,useId:Mi,useReducer:Yr,useEffect:oe,useLayoutEffect:lt,useInsertionEffect:zi,useTransition:qi,useDeferredValue:Hi,useSyncExternalStore:en,startTransition:Ui,useRef:ut,useImperativeHandle:Ii,useMemo:ne,useCallback:J,useContext:ht,useDebugValue:Di,version:"18.3.1",Children:Ra,render:Xi,hydrate:Ha,unmountComponentAtNode:is,createPortal:Da,createElement:de,createContext:ze,createFactory:Va,cloneElement:Ya,createRef:ba,Fragment:ae,isValidElement:mr,isElement:tc,isFragment:Ka,isMemo:Ga,findDOMNode:Za,Component:ce,PureComponent:rn,memo:Bi,forwardRef:Oa,flushSync:Xa,unstable_batchedUpdates:Ja,StrictMode:ec,Suspense:Ft,SuspenseList:Lt,lazy:Na,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Wa};function ss(e,t=void 0){const[r,n]=H(V(!1),"hovering");return oe(()=>{if(!e.current)return;const i=e.current;let s;const a=()=>{t?s=setTimeout(()=>n(!0),t):n(!0)},c=()=>{n(!1),s&&clearTimeout(s)};return i.addEventListener("mouseover",a),i.addEventListener("mouseout",c),()=>{i.removeEventListener("mouseover",a),i.removeEventListener("mouseout",c)}},[e,t]),r}const nc={bg:"#aae5a4",bgAlt:"#aae5a4",bgDeep:"#ffffcc",bgHighlight:"#93c393",bgOverlay:"#ffffff",text:"#000000",textSoft:"#000000",textActive:"#192918",link:"#757575",linkSoft:"#93c393",linkArtist:"#aa0000",linkCharacter:"#00aa00",linkCopyright:"#aa00aa",linkMetadata:"#ff8800"},ic={bg:"#303a30",bgAlt:"#293129",bgDeep:"#303030",bgHighlight:"#505a50",bgOverlay:"#242424e6",text:"#c0c0c0",textSoft:"#878787",textActive:"#b0e0b0",link:"#b0e0b0",linkSoft:"#93b393",linkArtist:"#f0a0a0",linkCharacter:"#f0f0a0",linkCopyright:"#f0a0f0",linkMetadata:"#90d9ed"},E={bg:"var(--r-bg)",bgAlt:"var(--r-bg-alt)",bgDeep:"var(--r-bg-deep)",bgHighlight:"var(--r-bg-highlight)",bgOverlay:"var(--r-bg-overlay)",text:"var(--r-text)",textSoft:"var(--r-text-soft)",textActive:"var(--r-link)",link:"var(--r-link-soft)",linkSoft:"var(--r-link-soft)",linkArtist:"var(--r-link-artist)",linkCharacter:"var(--r-link-character)",linkCopyright:"var(--r-link-copyright)",linkMetadata:"var(--r-link-metadata)"},os=e=>({general:E.textActive,artist:E.linkArtist,character:E.linkArtist,copyright:E.linkCopyright,metadata:E.linkMetadata})[e],sc=e=>`
        --r-bg: ${e.bg};
        --r-bg-alt: ${e.bgAlt};
        --r-bg-deep: ${e.bgDeep};
        --r-bg-highlight: ${e.bgHighlight};
        --r-bg-overlay: ${e.bgOverlay};
        --r-text: ${e.text};
        --r-text-soft: ${e.textSoft};
        --r-text-active: ${e.textActive};
        --r-link: ${e.textActive};
        --r-link-soft: ${e.linkSoft};
        --r-link-artist: ${e.linkArtist};
        --r-link-character: ${e.linkCharacter};
        --r-link-copyright: ${e.linkCopyright};
        --r-link-metadata: ${e.linkMetadata};
    `;var jt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Be=typeof window>"u"||"Deno"in globalThis;function le(){}function oc(e,t){return typeof e=="function"?e(t):e}function sn(e){return typeof e=="number"&&e>=0&&e!==1/0}function as(e,t){return Math.max(e+(t||0)-Date.now(),0)}function dt(e,t){return typeof e=="function"?e(t):e}function fe(e,t){return typeof e=="function"?e(t):e}function cs(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:c}=e;if(a){if(n){if(t.queryHash!==on(a,t.options))return!1}else if(!Ht(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||s&&!s(t))}function ls(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Ut(t.options.mutationKey)!==Ut(s))return!1}else if(!Ht(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function on(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ut)(e)}function Ut(e){return JSON.stringify(e,(t,r)=>cn(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Ht(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Ht(e[r],t[r])):!1}function us(e,t){if(e===t)return e;const r=hs(e)&&hs(t);if(r||cn(e)&&cn(t)){const n=r?e:Object.keys(e),i=n.length,s=r?t:Object.keys(t),a=s.length,c=r?[]:{};let l=0;for(let h=0;h<a;h++){const f=r?h:s[h];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(c[f]=void 0,l++):(c[f]=us(e[f],t[f]),c[f]===e[f]&&e[f]!==void 0&&l++)}return i===a&&l===i?e:c}return t}function an(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function hs(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function cn(e){if(!ds(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!ds(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function ds(e){return Object.prototype.toString.call(e)==="[object Object]"}function ac(e){return new Promise(t=>{setTimeout(t,e)})}function ln(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?us(e,t):t}function cc(e){return e}function lc(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function uc(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var un=Symbol();function fs(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===un?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var hc=(io=class extends jt{constructor(){super();P(this,We,void 0);P(this,Ae,void 0);P(this,pt,void 0);S(this,pt,t=>{if(!Be&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){d(this,Ae)||this.setEventListener(d(this,pt))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Ae))==null||t.call(this),S(this,Ae,void 0))}setEventListener(t){var r;S(this,pt,t),(r=d(this,Ae))==null||r.call(this),S(this,Ae,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){d(this,We)!==t&&(S(this,We,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof d(this,We)=="boolean"?d(this,We):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},We=new WeakMap,Ae=new WeakMap,pt=new WeakMap,io),hn=new hc,dc=(so=class extends jt{constructor(){super();P(this,mt,!0);P(this,Ie,void 0);P(this,gt,void 0);S(this,gt,t=>{if(!Be&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){d(this,Ie)||this.setEventListener(d(this,gt))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Ie))==null||t.call(this),S(this,Ie,void 0))}setEventListener(t){var r;S(this,gt,t),(r=d(this,Ie))==null||r.call(this),S(this,Ie,t(this.setOnline.bind(this)))}setOnline(t){d(this,mt)!==t&&(S(this,mt,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return d(this,mt)}},mt=new WeakMap,Ie=new WeakMap,gt=new WeakMap,so),gr=new dc;function dn(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function fc(e){return Math.min(1e3*2**e,3e4)}function ps(e){return(e??"online")==="online"?gr.isOnline():!0}var ms=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function fn(e){return e instanceof ms}function gs(e){let t=!1,r=0,n=!1,i;const s=dn(),a=m=>{var v;n||(_(new ms(m)),(v=e.abort)==null||v.call(e))},c=()=>{t=!0},l=()=>{t=!1},h=()=>hn.isFocused()&&(e.networkMode==="always"||gr.isOnline())&&e.canRun(),f=()=>ps(e.networkMode)&&e.canRun(),u=m=>{var v;n||(n=!0,(v=e.onSuccess)==null||v.call(e,m),i==null||i(),s.resolve(m))},_=m=>{var v;n||(n=!0,(v=e.onError)==null||v.call(e,m),i==null||i(),s.reject(m))},p=()=>new Promise(m=>{var v;i=w=>{(n||h())&&m(w)},(v=e.onPause)==null||v.call(e)}).then(()=>{var m;i=void 0,n||(m=e.onContinue)==null||m.call(e)}),g=()=>{if(n)return;let m;const v=r===0?e.initialPromise:void 0;try{m=v??e.fn()}catch(w){m=Promise.reject(w)}Promise.resolve(m).then(u).catch(w=>{var R;if(n)return;const b=e.retry??(Be?0:3),x=e.retryDelay??fc,k=typeof x=="function"?x(r,w):x,y=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,w);if(t||!y){_(w);return}r++,(R=e.onFail)==null||R.call(e,r,w),ac(k).then(()=>h()?void 0:p()).then(()=>{t?_(w):g()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:c,continueRetry:l,canStart:f,start:()=>(f()?g():p().then(g),s)}}function pc(){let e=[],t=0,r=c=>{c()},n=c=>{c()},i=c=>setTimeout(c,0);const s=c=>{t?e.push(c):i(()=>{r(c)})},a=()=>{const c=e;e=[],c.length&&i(()=>{n(()=>{c.forEach(l=>{r(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||a()}return l},batchCalls:c=>(...l)=>{s(()=>{c(...l)})},schedule:s,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{i=c}}}var K=pc(),ys=(oo=class{constructor(){P(this,Ve,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sn(this.gcTime)&&S(this,Ve,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Be?1/0:5*60*1e3))}clearGcTimeout(){d(this,Ve)&&(clearTimeout(d(this,Ve)),S(this,Ve,void 0))}},Ve=new WeakMap,oo),mc=(ao=class extends ys{constructor(t){super();P(this,pe);P(this,yt,void 0);P(this,_t,void 0);P(this,ue,void 0);P(this,Ke,void 0);P(this,X,void 0);P(this,Qt,void 0);P(this,Ge,void 0);S(this,Ge,!1),S(this,Qt,t.defaultOptions),this.setOptions(t.options),this.observers=[],S(this,Ke,t.client),S(this,ue,d(this,Ke).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,S(this,yt,gc(this.options)),this.state=t.state??d(this,yt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=d(this,X))==null?void 0:t.promise}setOptions(t){this.options={...d(this,Qt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,ue).remove(this)}setData(t,r){const n=ln(this.state.data,t,this.options);return N(this,pe,Re).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){N(this,pe,Re).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=d(this,X))==null?void 0:n.promise;return(i=d(this,X))==null||i.cancel(t),r?r.then(le).catch(le):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,yt))}isActive(){return this.observers.some(t=>fe(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===un||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!as(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,X))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,X))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),d(this,ue).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(d(this,X)&&(d(this,Ge)?d(this,X).cancel({revert:!0}):d(this,X).cancelRetry()),this.scheduleGc()),d(this,ue).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||N(this,pe,Re).call(this,{type:"invalidate"})}fetch(t,r){var l,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(d(this,X))return d(this,X).continueRetry(),d(this,X).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(_=>_.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(S(this,Ge,!0),n.signal)})},s=()=>{const u=fs(this.options,r),_={client:d(this,Ke),queryKey:this.queryKey,meta:this.meta};return i(_),S(this,Ge,!1),this.options.persister?this.options.persister(u,_,this):u(_)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:d(this,Ke),state:this.state,fetchFn:s};i(a),(l=this.options.behavior)==null||l.onFetch(a,this),S(this,_t,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&N(this,pe,Re).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const c=u=>{var _,p,g,m;fn(u)&&u.silent||N(this,pe,Re).call(this,{type:"error",error:u}),fn(u)||((p=(_=d(this,ue).config).onError)==null||p.call(_,u,this),(m=(g=d(this,ue).config).onSettled)==null||m.call(g,this.state.data,u,this)),this.scheduleGc()};return S(this,X,gs({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{var _,p,g,m;if(u===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(v){c(v);return}(p=(_=d(this,ue).config).onSuccess)==null||p.call(_,u,this),(m=(g=d(this,ue).config).onSettled)==null||m.call(g,u,this.state.error,this),this.scheduleGc()},onError:c,onFail:(u,_)=>{N(this,pe,Re).call(this,{type:"failed",failureCount:u,error:_})},onPause:()=>{N(this,pe,Re).call(this,{type:"pause"})},onContinue:()=>{N(this,pe,Re).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,X).start()}},yt=new WeakMap,_t=new WeakMap,ue=new WeakMap,Ke=new WeakMap,X=new WeakMap,Qt=new WeakMap,Ge=new WeakMap,pe=new WeakSet,Re=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,..._s(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return fn(i)&&i.revert&&d(this,_t)?{...d(this,_t),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),K.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),d(this,ue).notify({query:this,type:"updated",action:t})})},ao);function _s(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ps(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function gc(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var yc=(co=class extends jt{constructor(t={}){super();P(this,we,void 0);this.config=t,S(this,we,new Map)}build(t,r,n){const i=r.queryKey,s=r.queryHash??on(i,r);let a=this.get(s);return a||(a=new mc({client:t,queryKey:i,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){d(this,we).has(t.queryHash)||(d(this,we).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=d(this,we).get(t.queryHash);r&&(t.destroy(),r===t&&d(this,we).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){K.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return d(this,we).get(t)}getAll(){return[...d(this,we).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>cs(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>cs(t,n)):r}notify(t){K.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){K.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){K.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},we=new WeakMap,co),_c=(lo=class extends ys{constructor(t){super();P(this,Se);P(this,xe,void 0);P(this,ee,void 0);P(this,Ye,void 0);this.mutationId=t.mutationId,S(this,ee,t.mutationCache),S(this,xe,[]),this.state=t.state||vc(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){d(this,xe).includes(t)||(d(this,xe).push(t),this.clearGcTimeout(),d(this,ee).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){S(this,xe,d(this,xe).filter(r=>r!==t)),this.scheduleGc(),d(this,ee).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){d(this,xe).length||(this.state.status==="pending"?this.scheduleGc():d(this,ee).remove(this))}continue(){var t;return((t=d(this,Ye))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,s,a,c,l,h,f,u,_,p,g,m,v,w,b,x,k,y,R,T;S(this,Ye,gs({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,M)=>{N(this,Se,Ue).call(this,{type:"failed",failureCount:A,error:M})},onPause:()=>{N(this,Se,Ue).call(this,{type:"pause"})},onContinue:()=>{N(this,Se,Ue).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,ee).canRun(this)}));const r=this.state.status==="pending",n=!d(this,Ye).canStart();try{if(!r){N(this,Se,Ue).call(this,{type:"pending",variables:t,isPaused:n}),await((s=(i=d(this,ee).config).onMutate)==null?void 0:s.call(i,t,this));const M=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t));M!==this.state.context&&N(this,Se,Ue).call(this,{type:"pending",context:M,variables:t,isPaused:n})}const A=await d(this,Ye).start();return await((h=(l=d(this,ee).config).onSuccess)==null?void 0:h.call(l,A,t,this.state.context,this)),await((u=(f=this.options).onSuccess)==null?void 0:u.call(f,A,t,this.state.context)),await((p=(_=d(this,ee).config).onSettled)==null?void 0:p.call(_,A,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,A,null,t,this.state.context)),N(this,Se,Ue).call(this,{type:"success",data:A}),A}catch(A){try{throw await((w=(v=d(this,ee).config).onError)==null?void 0:w.call(v,A,t,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,A,t,this.state.context)),await((y=(k=d(this,ee).config).onSettled)==null?void 0:y.call(k,void 0,A,this.state.variables,this.state.context,this)),await((T=(R=this.options).onSettled)==null?void 0:T.call(R,void 0,A,t,this.state.context)),A}finally{N(this,Se,Ue).call(this,{type:"error",error:A})}}finally{d(this,ee).runNext(this)}}},xe=new WeakMap,ee=new WeakMap,Ye=new WeakMap,Se=new WeakSet,Ue=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),K.batch(()=>{d(this,xe).forEach(n=>{n.onMutationUpdate(t)}),d(this,ee).notify({mutation:this,type:"updated",action:t})})},lo);function vc(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var bc=(uo=class extends jt{constructor(t={}){super();P(this,Oe,void 0);P(this,me,void 0);P(this,Wt,void 0);this.config=t,S(this,Oe,new Set),S(this,me,new Map),S(this,Wt,0)}build(t,r,n){const i=new _c({mutationCache:this,mutationId:++Pr(this,Wt)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){d(this,Oe).add(t);const r=yr(t);if(typeof r=="string"){const n=d(this,me).get(r);n?n.push(t):d(this,me).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(d(this,Oe).delete(t)){const r=yr(t);if(typeof r=="string"){const n=d(this,me).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&d(this,me).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=yr(t);if(typeof r=="string"){const n=d(this,me).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=yr(t);if(typeof r=="string"){const i=(n=d(this,me).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){K.batch(()=>{d(this,Oe).forEach(t=>{this.notify({type:"removed",mutation:t})}),d(this,Oe).clear(),d(this,me).clear()})}getAll(){return Array.from(d(this,Oe))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>ls(r,n))}findAll(t={}){return this.getAll().filter(r=>ls(t,r))}notify(t){K.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return K.batch(()=>Promise.all(t.map(r=>r.continue().catch(le))))}},Oe=new WeakMap,me=new WeakMap,Wt=new WeakMap,uo);function yr(e){var t;return(t=e.options.scope)==null?void 0:t.id}function _r(e){return{onFetch:(t,r)=>{var f,u,_,p,g;const n=t.options,i=(_=(u=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:u.fetchMore)==null?void 0:_.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],a=((g=t.state.data)==null?void 0:g.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const h=async()=>{let m=!1;const v=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},w=fs(t.options,t.fetchOptions),b=async(x,k,y)=>{if(m)return Promise.reject();if(k==null&&x.pages.length)return Promise.resolve(x);const R={client:t.client,queryKey:t.queryKey,pageParam:k,direction:y?"backward":"forward",meta:t.options.meta};v(R);const T=await w(R),{maxPages:A}=t.options,M=y?uc:lc;return{pages:M(x.pages,T,A),pageParams:M(x.pageParams,k,A)}};if(i&&s.length){const x=i==="backward",k=x?vs:pn,y={pages:s,pageParams:a},R=k(n,y);c=await b(y,R,x)}else{const x=e??s.length;do{const k=l===0?a[0]??n.initialPageParam:pn(n,c);if(l>0&&k==null)break;c=await b(c,k),l++}while(l<x)}return c};t.options.persister?t.fetchFn=()=>{var m,v;return(v=(m=t.options).persister)==null?void 0:v.call(m,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function pn(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function vs(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}function wc(e,t){return t?pn(e,t)!=null:!1}function xc(e,t){return!t||!e.getPreviousPageParam?!1:vs(e,t)!=null}var Sc=(ho=class{constructor(e={}){P(this,z,void 0);P(this,De,void 0);P(this,Me,void 0);P(this,vt,void 0);P(this,bt,void 0);P(this,Fe,void 0);P(this,wt,void 0);P(this,xt,void 0);S(this,z,e.queryCache||new yc),S(this,De,e.mutationCache||new bc),S(this,Me,e.defaultOptions||{}),S(this,vt,new Map),S(this,bt,new Map),S(this,Fe,0)}mount(){Pr(this,Fe)._++,d(this,Fe)===1&&(S(this,wt,hn.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,z).onFocus())})),S(this,xt,gr.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,z).onOnline())})))}unmount(){var e,t;Pr(this,Fe)._--,d(this,Fe)===0&&((e=d(this,wt))==null||e.call(this),S(this,wt,void 0),(t=d(this,xt))==null||t.call(this),S(this,xt,void 0))}isFetching(e){return d(this,z).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return d(this,De).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,z).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=d(this,z).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(dt(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return d(this,z).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=d(this,z).get(n.queryHash),s=i==null?void 0:i.state.data,a=oc(t,s);if(a!==void 0)return d(this,z).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return K.batch(()=>d(this,z).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,z).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=d(this,z);K.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=d(this,z),n={type:"active",...e};return K.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(n,t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=K.batch(()=>d(this,z).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(le).catch(le)}invalidateQueries(e,t={}){return K.batch(()=>{if(d(this,z).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none")return Promise.resolve();const r={...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"};return this.refetchQueries(r,t)})}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=K.batch(()=>d(this,z).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(le)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(le)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=d(this,z).build(this,t);return r.isStaleByTime(dt(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(le).catch(le)}fetchInfiniteQuery(e){return e.behavior=_r(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(le).catch(le)}ensureInfiniteQueryData(e){return e.behavior=_r(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return gr.isOnline()?d(this,De).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,z)}getMutationCache(){return d(this,De)}getDefaultOptions(){return d(this,Me)}setDefaultOptions(e){S(this,Me,e)}setQueryDefaults(e,t){d(this,vt).set(Ut(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...d(this,vt).values()],r={};return t.forEach(n=>{Ht(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){d(this,bt).set(Ut(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...d(this,bt).values()];let r={};return t.forEach(n=>{Ht(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...d(this,Me).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=on(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===un&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...d(this,Me).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){d(this,z).clear(),d(this,De).clear()}},z=new WeakMap,De=new WeakMap,Me=new WeakMap,vt=new WeakMap,bt=new WeakMap,Fe=new WeakMap,wt=new WeakMap,xt=new WeakMap,ho),bs=(fo=class extends jt{constructor(t,r){super();P(this,et);P(this,Gt);P(this,Yt);P(this,Zt);P(this,Jt);P(this,Xt);P(this,er);P(this,tr);P(this,kr);P(this,ie,void 0);P(this,$,void 0);P(this,Vt,void 0);P(this,te,void 0);P(this,Ze,void 0);P(this,St,void 0);P(this,Le,void 0);P(this,Ce,void 0);P(this,Kt,void 0);P(this,Ct,void 0);P(this,kt,void 0);P(this,Je,void 0);P(this,Xe,void 0);P(this,je,void 0);P(this,Pt,new Set);this.options=r,S(this,ie,t),S(this,Ce,null),S(this,Le,dn()),this.options.experimental_prefetchInRender||d(this,Le).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,$).addObserver(this),ws(d(this,$),this.options)?N(this,et,rr).call(this):this.updateResult(),N(this,Jt,Ln).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mn(d(this,$),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mn(d(this,$),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,N(this,Xt,jn).call(this),N(this,er,Un).call(this),d(this,$).removeObserver(this)}setOptions(t,r){const n=this.options,i=d(this,$);if(this.options=d(this,ie).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof fe(this.options.enabled,d(this,$))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");N(this,tr,Hn).call(this),d(this,$).setOptions(this.options),n._defaulted&&!an(this.options,n)&&d(this,ie).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,$),observer:this});const s=this.hasListeners();s&&xs(d(this,$),i,this.options,n)&&N(this,et,rr).call(this),this.updateResult(r),s&&(d(this,$)!==i||fe(this.options.enabled,d(this,$))!==fe(n.enabled,d(this,$))||dt(this.options.staleTime,d(this,$))!==dt(n.staleTime,d(this,$)))&&N(this,Gt,Dn).call(this);const a=N(this,Yt,Mn).call(this);s&&(d(this,$)!==i||fe(this.options.enabled,d(this,$))!==fe(n.enabled,d(this,$))||a!==d(this,je))&&N(this,Zt,Fn).call(this,a)}getOptimisticResult(t){const r=d(this,ie).getQueryCache().build(d(this,ie),t),n=this.createResult(r,t);return kc(this,n)&&(S(this,te,n),S(this,St,this.options),S(this,Ze,d(this,$).state)),n}getCurrentResult(){return d(this,te)}trackResult(t,r){const n={};return Object.keys(t).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),r==null||r(i),t[i])})}),n}trackProp(t){d(this,Pt).add(t)}getCurrentQuery(){return d(this,$)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=d(this,ie).defaultQueryOptions(t),n=d(this,ie).getQueryCache().build(d(this,ie),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return N(this,et,rr).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,te)))}createResult(t,r){var A;const n=d(this,$),i=this.options,s=d(this,te),a=d(this,Ze),c=d(this,St),h=t!==n?t.state:d(this,Vt),{state:f}=t;let u={...f},_=!1,p;if(r._optimisticResults){const M=this.hasListeners(),he=!M&&ws(t,r),G=M&&xs(t,n,r,i);(he||G)&&(u={...u,..._s(f.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:v}=u;if(r.select&&u.data!==void 0)if(s&&u.data===(a==null?void 0:a.data)&&r.select===d(this,Kt))p=d(this,Ct);else try{S(this,Kt,r.select),p=r.select(u.data),p=ln(s==null?void 0:s.data,p,r),S(this,Ct,p),S(this,Ce,null)}catch(M){S(this,Ce,M)}else p=u.data;if(r.placeholderData!==void 0&&p===void 0&&v==="pending"){let M;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData))M=s.data;else if(M=typeof r.placeholderData=="function"?r.placeholderData((A=d(this,kt))==null?void 0:A.state.data,d(this,kt)):r.placeholderData,r.select&&M!==void 0)try{M=r.select(M),S(this,Ce,null)}catch(he){S(this,Ce,he)}M!==void 0&&(v="success",p=ln(s==null?void 0:s.data,M,r),_=!0)}d(this,Ce)&&(g=d(this,Ce),p=d(this,Ct),m=Date.now(),v="error");const w=u.fetchStatus==="fetching",b=v==="pending",x=v==="error",k=b&&w,y=p!==void 0,T={status:v,fetchStatus:u.fetchStatus,isPending:b,isSuccess:v==="success",isError:x,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:w,isRefetching:w&&!b,isLoadingError:x&&!y,isPaused:u.fetchStatus==="paused",isPlaceholderData:_,isRefetchError:x&&y,isStale:gn(t,r),refetch:this.refetch,promise:d(this,Le)};if(this.options.experimental_prefetchInRender){const M=ke=>{T.status==="error"?ke.reject(T.error):T.data!==void 0&&ke.resolve(T.data)},he=()=>{const ke=S(this,Le,T.promise=dn());M(ke)},G=d(this,Le);switch(G.status){case"pending":t.queryHash===n.queryHash&&M(G);break;case"fulfilled":(T.status==="error"||T.data!==G.value)&&he();break;case"rejected":(T.status!=="error"||T.error!==G.reason)&&he();break}}return T}updateResult(t){const r=d(this,te),n=this.createResult(d(this,$),this.options);if(S(this,Ze,d(this,$).state),S(this,St,this.options),d(this,Ze).data!==void 0&&S(this,kt,d(this,$)),an(n,r))return;S(this,te,n);const i={},s=()=>{if(!r)return!0;const{notifyOnChangeProps:a}=this.options,c=typeof a=="function"?a():a;if(c==="all"||!c&&!d(this,Pt).size)return!0;const l=new Set(c??d(this,Pt));return this.options.throwOnError&&l.add("error"),Object.keys(d(this,te)).some(h=>{const f=h;return d(this,te)[f]!==r[f]&&l.has(f)})};(t==null?void 0:t.listeners)!==!1&&s()&&(i.listeners=!0),N(this,kr,po).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&N(this,Jt,Ln).call(this)}},ie=new WeakMap,$=new WeakMap,Vt=new WeakMap,te=new WeakMap,Ze=new WeakMap,St=new WeakMap,Le=new WeakMap,Ce=new WeakMap,Kt=new WeakMap,Ct=new WeakMap,kt=new WeakMap,Je=new WeakMap,Xe=new WeakMap,je=new WeakMap,Pt=new WeakMap,et=new WeakSet,rr=function(t){N(this,tr,Hn).call(this);let r=d(this,$).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(le)),r},Gt=new WeakSet,Dn=function(){N(this,Xt,jn).call(this);const t=dt(this.options.staleTime,d(this,$));if(Be||d(this,te).isStale||!sn(t))return;const n=as(d(this,te).dataUpdatedAt,t)+1;S(this,Je,setTimeout(()=>{d(this,te).isStale||this.updateResult()},n))},Yt=new WeakSet,Mn=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,$)):this.options.refetchInterval)??!1},Zt=new WeakSet,Fn=function(t){N(this,er,Un).call(this),S(this,je,t),!(Be||fe(this.options.enabled,d(this,$))===!1||!sn(d(this,je))||d(this,je)===0)&&S(this,Xe,setInterval(()=>{(this.options.refetchIntervalInBackground||hn.isFocused())&&N(this,et,rr).call(this)},d(this,je)))},Jt=new WeakSet,Ln=function(){N(this,Gt,Dn).call(this),N(this,Zt,Fn).call(this,N(this,Yt,Mn).call(this))},Xt=new WeakSet,jn=function(){d(this,Je)&&(clearTimeout(d(this,Je)),S(this,Je,void 0))},er=new WeakSet,Un=function(){d(this,Xe)&&(clearInterval(d(this,Xe)),S(this,Xe,void 0))},tr=new WeakSet,Hn=function(){const t=d(this,ie).getQueryCache().build(d(this,ie),this.options);if(t===d(this,$))return;const r=d(this,$);S(this,$,t),S(this,Vt,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},kr=new WeakSet,po=function(t){K.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(d(this,te))}),d(this,ie).getQueryCache().notify({query:d(this,$),type:"observerResultsUpdated"})})},fo);function Cc(e,t){return fe(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ws(e,t){return Cc(e,t)||e.state.data!==void 0&&mn(e,t,t.refetchOnMount)}function mn(e,t,r){if(fe(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&gn(e,t)}return!1}function xs(e,t,r,n){return(e!==t||fe(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&gn(e,r)}function gn(e,t){return fe(t.enabled,e)!==!1&&e.isStaleByTime(dt(t.staleTime,e))}function kc(e,t){return!an(e.getCurrentResult(),t)}var Pc=class extends bs{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:_r()},t)}getOptimisticResult(e){return e.behavior=_r(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var g,m;const{state:r}=e,n=super.createResult(e,t),{isFetching:i,isRefetching:s,isError:a,isRefetchError:c}=n,l=(m=(g=r.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:m.direction,h=a&&l==="forward",f=i&&l==="forward",u=a&&l==="backward",_=i&&l==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:wc(t,r.data),hasPreviousPage:xc(t,r.data),isFetchNextPageError:h,isFetchingNextPage:f,isFetchPreviousPageError:u,isFetchingPreviousPage:_,isRefetchError:c&&!h&&!u,isRefetching:s&&!f&&!_}}},Ec=0;function o(e,t,r,n,i,s){t||(t={});var a,c,l=t;if("ref"in l)for(c in l={},t)c=="ref"?a=t[c]:l[c]=t[c];var h={type:e,props:l,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ec,__i:-1,__u:0,__source:i,__self:s};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)l[c]===void 0&&(l[c]=a[c]);return O.vnode&&O.vnode(h),h}var Ss=ze(void 0),Tc=e=>{const t=ht(Ss);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Oc=({client:e,children:t})=>(oe(()=>(e.mount(),()=>{e.unmount()}),[e]),o(Ss.Provider,{value:e,children:t})),Cs=ze(!1),Rc=()=>ht(Cs);Cs.Provider;function $c(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Nc=ze($c()),Ac=()=>ht(Nc);function Ic(e,t){return typeof e=="function"?e(...t):!!e}function ks(){}var Dc=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Mc=e=>{oe(()=>{e.clearReset()},[e])},Fc=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||Ic(r,[e.error,n])),Lc=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...r)=>Math.max(t(...r),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},jc=(e,t)=>e.isLoading&&e.isFetching&&!t,Uc=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Ps=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Es(e,t,r){var u,_,p,g,m;const n=Tc(r),i=Rc(),s=Ac(),a=n.defaultQueryOptions(e);(_=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||_.call(u,a),a._optimisticResults=i?"isRestoring":"optimistic",Lc(a),Dc(a,s),Mc(s);const c=!n.getQueryCache().get(a.queryHash),[l]=V(()=>new t(n,a)),h=l.getOptimisticResult(a),f=!i&&e.subscribed!==!1;if(en(J(v=>{const w=f?l.subscribe(K.batchCalls(v)):ks;return l.updateResult(),w},[l,f]),()=>l.getCurrentResult()),oe(()=>{l.setOptions(a,{listeners:!1})},[a,l]),Uc(a,h))throw Ps(a,l,s);if(Fc({result:h,errorResetBoundary:s,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((g=(p=n.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||g.call(p,a,h),a.experimental_prefetchInRender&&!Be&&jc(h,i)){const v=c?Ps(a,l,s):(m=n.getQueryCache().get(a.queryHash))==null?void 0:m.promise;v==null||v.catch(ks).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?h:l.trackResult(h)}function yn(e,t){return Es(e,bs,t)}function Hc(e,t){return Es(e,Pc,t)}const qc=async e=>{{let{posts:t}=await $r({search:`${e} sort:score -video width:<2000 height:<2000`,limit:3});if(t.length===3)return t}{let{posts:t}=await $r({search:`${e} score:>=100`,limit:3});return t}},zc=({tag:e})=>{const{data:t}=yn({queryFn:J(()=>qc(e),[e]),queryKey:["tag-preview",e]});if(t)return o("div",{className:Bc,children:t.map(r=>o("div",{className:Qc,children:o("img",{src:r.thumbnail.url,width:r.thumbnail.width,height:r.thumbnail.height})},r.id))})},Bc=C`
    position: absolute;
    top: -13rem;
    height: 12rem;
    padding: 1rem;
    z-index: 10;

    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: row;
    gap: 1rem;

    background: ${E.bgOverlay};
    border: 0.1rem solid black;
    border-radius: 0.5rem;
`,Qc=C`
    height: 100%;
    width: 8rem;
    object-fit: cover;
    border-radius: 1rem;
    overflow: hidden;

    img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
`,Ts=(...e)=>e.join(" ");function _n(){const[e,t]=H(V(Os()),"tags"),r=J(h=>{t(f=>{const u=h(f);return Rs(u),u})},[]);oe(()=>Rs(e),[e]);const n=H(ne(()=>e.map(h=>({name:h,type:"artist"})),[e]),"subscriptions"),i=H(ne(()=>$s(e),[e]),"subscriptionsTag"),s=H(ne(Wc,[]),"subscriptionsUrl"),a=J(h=>e.includes(h),[e]),c=J(h=>{r(f=>[h,...f])},[r]),l=J(h=>{r(f=>f.filter(u=>u!==h))},[r]);return{subscriptions:n,subscriptionsTag:i,subscriptionsUrl:s,checkSubscribed:a,addSubscription:c,removeSubscription:l}}function Os(){const e=window.localStorage.getItem("tag-subscriptions")??"[]";let t=JSON.parse(e);return t=t.map(r=>decodeURIComponent(r)),t}function Rs(e){const t=JSON.stringify(e);window.localStorage.setItem("tag-subscriptions",t)}const $s=e=>" ( "+e.join(" ~ ")+" ) ",Wc=()=>"/index.php?page=post&s=list&subscriptions=yes",Vc="Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.",Kc=e=>o(ve,{viewBox:"0 0 512 512",path:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z",props:e}),Gc=e=>o(ve,{viewBox:"0 0 576 512",path:"M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z",props:e}),Yc=e=>o(ve,{viewBox:"0 0 576 512",path:"M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z",props:e}),Zc=e=>o(ve,{viewBox:"0 0 512 512",path:"M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.2s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16l-97.5 0c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8l97.5 0c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32L0 448c0 17.7 14.3 32 32 32l64 0c17.7 0 32-14.3 32-32l0-224c0-17.7-14.3-32-32-32l-64 0z",props:e}),Jc=e=>o(ve,{viewBox:"0 0 512 512",path:"M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2l144 0c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48l-97.5 0c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3l0-38.3 0-48 0-24.9c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192l64 0c17.7 0 32 14.3 32 32l0 224c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32L0 224c0-17.7 14.3-32 32-32z",props:e}),Xc=e=>o(ve,{viewBox:"0 0 512 512",path:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z",props:e}),el=e=>o(ve,{viewBox:"0 0 448 512",path:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z",props:e}),tl=e=>o(ve,{viewBox:"0 0 512 512",path:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z",props:e}),rl=e=>o(ve,{viewBox:"0 0 512 512",path:"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z",props:e}),nl=e=>o(ve,{viewBox:"0 0 448 512",path:"M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z",props:e}),ve=({viewBox:e,path:t,props:r})=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,"data-license":Vc,...r,children:o("path",{d:t})}),il={search:Kc,upload:Xc,"star-regular":Gc,"star-solid":Yc,"thumbsup-regular":Zc,"thumbsup-solid":Jc,"profile-solid":el,"info-solid":tl,"settings-solid":rl,"bars-solid":nl},ft=({icon:e,fill:t,size:r,...n})=>{const i=il[e],s={fill:t??E.link,...r?{width:r,height:r}:{},...n.style??{}};return o(i,{style:s,...n})},be={newest:"newest",score:"score",random:"random",hot:"hot"};Rr({tags:Et(zn(Q())),sort:Et(Qn(be)),minScore:Et(Wn()),subscriptionsOnly:Et(Bn())});const vr={sort:be.newest,tags:[],minScore:20,subscriptionsOnly:!1},Ns={encodeInParam(e,t){!t||t===vr.sort||t in be&&e.set("sort",t)},decodeFromParam(e){const t=e.get("sort");if(t&&(t==="newest"||t==="score"||t==="random"||t==="hot"))return t}},As={encodeInParam(e,t){!t||t.length===0||e.set("searchTags",t.join(" "))},decodeFromParam(e){const t=e.get("searchTags");if(!t)return;let r=t.split(" ");if(r=r.filter(n=>!!n.trim()),r=[...new Set(r)],r.length!==0)return r}},Is={encodeInParam(e,t){t&&e.set("subscriptions","yes")},decodeFromParam(e){if(e.get("subscriptions"))return!0}};function sl(e){const t=new URLSearchParams;return Ns.encodeInParam(t,e.sort),As.encodeInParam(t,e.tags),Is.encodeInParam(t,e.subscriptionsOnly),t}function ol(e){const t=Ns.decodeFromParam(e)??vr.sort,r=As.decodeFromParam(e)??vr.tags,n=Is.decodeFromParam(e)??vr.subscriptionsOnly;return{sort:t,tags:r,subscriptionsOnly:n,minScore:0}}function Ds(e,t){if(t!=="rule34")throw new Error("Unsupported");const{sort:r,minScore:n,tags:i}=e;let s=[];return n&&s.push(`score:>=${n}`),i&&s.push(...i),r===be.score&&s.push("sort:score"),r===be.random&&s.push("sort:random:1"),r===be.hot&&(s.push("sort:score"),s.push("id:>=9000000")),e.subscriptionsOnly&&s.push($s(Os())),s.join(" ")}function Ms(){const e=new URL(document.location.href);return e.searchParams.delete("tags"),history.replaceState(null,"",e.toString()),ol(e.searchParams)}function vn(e,t,r=!0){const n=sl(e);return r&&n.set("tags",Ds(e,t)),n}const al=Date.now(),cl=e=>new Intl.DateTimeFormat("en-GB",{dateStyle:"full"}).format(e),ll=e=>{const r=(al-e.getTime())/1e3,n=r/60,i=n/60,s=i/24,a=s/30,c=s/365;return c>=1?`${c.toFixed()} years`:a>=1?`${a.toFixed()} months`:s>=1?`${s.toFixed()} days`:i>=1?`${i.toFixed()} hours`:n>=1?`${n.toFixed()} minutes`:r>=1?`${r.toFixed()} seconds`:"now"},bn=e=>new Intl.NumberFormat("en",{notation:"compact"}).format(e),ul=e=>e.replace(/&#[0-9]+;/,t=>String.fromCharCode(parseInt("&#039;".slice(2).slice(0,-1)))),Fs=Bi(({tag:{name:e,type:t,count:r},preview:n=!0})=>{const{checkSubscribed:i,addSubscription:s,removeSubscription:a}=_n(),c=i(e),l=H(ut(null),"linkRef"),h=ss(l,100),f=ul(e).replaceAll(/_\([a-z_-\s]*\)/g,"").replaceAll(/_/g," "),u=H(ne(()=>`index.php?page=post&s=list&${vn({tags:[e]},"rule34").toString()}`,[e]),"href"),_=J(()=>{c?a(e):s(e)},[s,c,e,a]);return o("div",{className:dl,children:[h&&n&&o(zc,{tag:e}),o("div",{className:Ts(hl,C(`--tag-color: ${os(t)};`)),children:[o("a",{href:u,ref:l,children:f}),r&&o("span",{className:"tag-count",children:[" ","/ ",bn(r)]}),o("button",{onClick:_,className:C`
                            background: none;
                        `,children:o(ft,{size:"0.75rem",icon:c?"star-solid":"star-regular"})})]})]})}),hl=C`
    display: flex;
    align-items: center;
    gap: 0.25rem;

    padding: 0.15rem 0.25rem;
    width: fit-content;

    background: ${E.bgHighlight};
    border-radius: 0 1rem 1rem 0;
    border-left: 0.15rem solid var(--tag-color);

    a {
        color: var(--tag-color);
        word-break: break-all;
        text-decoration: none;
        &:hover {
            text-decoration: underline;
        }
    }
`,dl=C`
    position: relative;
`,wn=(e,t)=>t.some(r=>e instanceof r);let Ls,js;function fl(){return Ls||(Ls=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pl(){return js||(js=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xn=new WeakMap,Sn=new WeakMap,br=new WeakMap;function ml(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{r(Qe(e.result)),i()},a=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",a)});return br.set(t,e),t}function gl(e){if(xn.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});xn.set(e,t)}let Cn={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return xn.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Qe(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Us(e){Cn=e(Cn)}function yl(e){return pl().includes(e)?function(...t){return e.apply(kn(this),t),Qe(this.request)}:function(...t){return Qe(e.apply(kn(this),t))}}function _l(e){return typeof e=="function"?yl(e):(e instanceof IDBTransaction&&gl(e),wn(e,fl())?new Proxy(e,Cn):e)}function Qe(e){if(e instanceof IDBRequest)return ml(e);if(Sn.has(e))return Sn.get(e);const t=_l(e);return t!==e&&(Sn.set(e,t),br.set(t,e)),t}const kn=e=>br.get(e);function vl(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),c=Qe(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Qe(a.result),l.oldVersion,l.newVersion,Qe(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const bl=["get","getKey","getAll","getAllKeys","count"],wl=["put","add","delete","clear"],Pn=new Map;function Hs(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Pn.get(t))return Pn.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=wl.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||bl.includes(r)))return;const s=async function(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),i&&l.done]))[0]};return Pn.set(t,s),s}Us(e=>({...e,get:(t,r,n)=>Hs(t,r)||e.get(t,r,n),has:(t,r)=>!!Hs(t,r)||e.has(t,r)}));const xl=["continue","continuePrimaryKey","advance"],qs={},En=new WeakMap,zs=new WeakMap,Sl={get(e,t){if(!xl.includes(t))return e[t];let r=qs[t];return r||(r=qs[t]=function(...n){En.set(this,zs.get(this)[t](...n))}),r}};async function*Cl(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,Sl);for(zs.set(r,t),br.set(r,kn(t));t;)yield r,t=await(En.get(r)||t.continue()),En.delete(r)}function Bs(e,t){return t===Symbol.asyncIterator&&wn(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&wn(e,[IDBIndex,IDBObjectStore])}Us(e=>({...e,get(t,r,n){return Bs(t,r)?Cl:e.get(t,r,n)},has(t,r){return Bs(t,r)||e.has(t,r)}}));function kl(e){const t=r=>e.filter(({type:n})=>n===r);return{general:t("general"),artist:t("artist"),copyright:t("copyright"),character:t("character"),metadata:t("metadata")}}let Tn;async function Qs(){return Tn||(Tn=await vl("tagDatabase",1,{upgrade(e){e.createObjectStore("tags",{keyPath:"name"})}})),Tn}async function Pl(e){const r=(await Qs()).transaction("tags","readonly"),n=await Promise.all(e.map(async i=>({name:i,data:await r.store.get(i)})));return await r.done,n.map(({name:i,data:s})=>s?{name:i,...s}:{name:i,type:"general"})}async function Ws(e){const r=(await Qs()).transaction("tags","readwrite");await Promise.all(e.map(async n=>{await r.store.delete(n.name),await r.store.add(n)})),await r.done}const El=({tags:e})=>{const t=kl(e);return o("div",{className:Tl,children:[o(qt,{title:"Creator",tags:t.artist}),o(qt,{title:"Characters",tags:t.character}),o(qt,{title:"Copyright",tags:t.copyright}),o(qt,{title:"General",tags:t.general}),o(qt,{title:"Meta",tags:t.metadata})]})},qt=({title:e,tags:t})=>t.length===0?null:o(ae,{children:[o("h3",{children:e}),o("div",{className:Ol,children:t.map(r=>o(Fs,{tag:r},r.name))})]}),Tl=C`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 0.5rem;
`,Ol=C`
    width: fit-content;

    display: flex;
    flex-direction: row;
    gap: 0.5rem 1rem;
    flex-wrap: wrap;
`;function Rl({comment:e}){return o("div",{className:$l,children:[o("div",{style:{display:"flex",gap:"1rem"},children:[o("a",{href:`index.php?page=account&s=profile&uname=${e.uploader.id}`,children:e.uploader.name}),o("span",{children:e.createdAt.toLocaleDateString()})]}),o("div",{children:e.text})]})}const $l=C`
    background: ${E.bgHighlight};
    border: 0.1rem solid black;
    border-radius: 0.5rem;

    width: 100%;
    height: fit-content;
    padding: 0.5rem;

    display: flex;
    flex-direction: column;

    word-break: break-all;
`,Nl=e=>{const t="children"in e?e.children:e.text;return"href"in e?o("a",{className:Vs,href:e.href,children:t}):o("button",{className:Vs,onClick:()=>e.action(),children:t})},Al=({icon:e,size:t,...r})=>"href"in r?o("a",{className:Ks,href:r.href,style:{"--size":t},children:o(ft,{icon:e,size:t,className:Gs})}):o("button",{className:Ks,onClick:()=>r.action(),children:o(ft,{icon:e,size:t,className:Gs})}),Vs=C`
    display: block;
    height: var(--size);
    width: var(--size);
    color: ${E.text};
    font-size: 110% !important;
    border-radius: 0.5rem;
    background: ${E.bgHighlight};
    border: 0.1rem solid ${E.textSoft};
    user-select: none;

    &:hover {
        background: ${E.bgDeep};
    }
`,Ks=C`
    display: block;
    height: var(--size);
    width: var(--size);

    font-size: 110% !important;
    user-select: none;
    background: none !important;
    border: none !important;

    color: ${E.textActive} !important;
    &:hover,
    &:active {
        color: ${E.textActive};
    }
`,Gs=C`
    width: auto;
    height: 100%;
`;function Il({xml:e,rootNodeName:t}){const r=new DOMParser().parseFromString(e,"text/xml"),n=r.querySelector(t);if(!n)throw new Error("Could not find root node");const s=Array.from(n.children).map(a=>{const c=Array.from(a.attributes).map(l=>[l.nodeName,l.nodeValue]);return Object.fromEntries(c)});return{document:r,nodes:s}}async function Dl(e){const t=`https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index&post_id=${e}`,n=await(await fetch(t)).text(),{nodes:i}=Il({xml:n,rootNodeName:"comments"});return i.map(s=>({id:s.id,createdAt:new Date(s.created_at),text:s.body,uploader:{id:s.creator_id,name:s.creator}}))}const Ml=({post_id:e,total:t,comments:r})=>{const[n,i]=H(V(r),"comments"),s=n.length>=t;async function a(){const c=await Dl(e);i(c)}return t===0?o("div",{}):o("div",{className:Fl,children:[o("h4",{children:[t," Comments"]}),o("div",{className:Ll,children:n.map(c=>o(Rl,{comment:c},c.id))}),o("div",{children:!s&&o(Nl,{text:"Load More",action:a})})]})},Fl=C`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 0.5rem;
`,Ll=C`
    display: flex;
    flex-direction: column;
    align-items: center;

    gap: 0.5rem;
`,jl=ze(null),On={didCatch:!1,error:null};class Ys extends ce{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=On}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:s,reason:"imperative-api"}),this.setState(On)}}componentDidCatch(t,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&Ul(t.resetKeys,i)){var s,a;(s=(a=this.props).onReset)===null||s===void 0||s.call(a,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(On)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:s,error:a}=this.state;let c=t;if(s){const l={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")c=r(l);else if(n)c=de(n,l);else if(i!==void 0)c=i;else throw a}return de(jl.Provider,{value:{didCatch:s,error:a,resetErrorBoundary:this.resetErrorBoundary}},c)}}function Ul(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}const Hl=({error:e})=>o("pre",{className:C`
                background: ${E.bgOverlay};
                color: red;
                padding: 1rem;
                font-size: 120%;
            `,children:e.message}),ql=({post:e})=>{const[t,r]=H(V(()=>zl(e.id)),"hasLiked"),[n,i]=H(V(0),"likeIncrement");return o("button",{className:Ql,disabled:t,onClick:async()=>{await Bl(e.id),r(!0),i(1)},children:[o("span",{children:e.score+n}),o(ft,{icon:t?"thumbsup-regular":"thumbsup-solid",size:"1rem"})]})},zl=e=>!!localStorage.getItem(`post-liked-${e}`),Bl=async e=>{const t=`https://rule34.xxx/index.php?page=post&s=vote&id=${e}&type=up`;await fetch(t),localStorage.setItem(`post-liked-${e}`,"yes")},Ql=C`
    width: fit-content;
    height: fit-content;
    display: flex;
    align-items: center;
    gap: 0.5rem;

    font-size: 110%;
    border-radius: 0.5rem;
    padding: 0.25rem 0.5rem;

    &,
    &[disabled] {
        background: ${E.bgHighlight};
        border: 0.1rem solid ${E.textSoft};
        color: ${E.text};
    }

    &:active {
        background: ${E.textSoft};
        color: ${E.textActive};
    }

    & > span {
        color: ${E.text};
    }

    & > div {
        height: 1rem;
        width: 1rem;
        display: block;
        color: ${E.link};
    }
`,Wl=({post:e})=>o(ae,{children:o("div",{className:C`
                    display: flex;
                    flex-direction: column;
                    gap: 0.25rem;
                    font-size: 110%;
                `,children:[o("span",{children:[cl(e.created_at),"(",ll(e.created_at)," ago)"]}),o("span",{children:[o("b",{children:"Resolution"}),": ",e.full.width,"x",e.full.height]}),o(ql,{post:e})]})});function Vl({post:e}){const[t,r]=H(V(!1),"zoomed");return o("img",{className:Kl,"data-zoomed":t,onClick:()=>r(n=>!n),src:e.full.url,width:e.full.width,height:e.full.height})}const Kl=C`
    width: 100%;
    height: 100%;
    &[data-zoomed="true"] {
        height: max-content;
        cursor: zoom-out;
    }

    &[data-zoomed="false"] {
        height: calc(100vh - 6rem);
        cursor: zoom-in;
        object-fit: contain;
    }

    background-size: contain;
    background-repeat: no-repeat;
    background-position-x: center;
`;function Gl({post:e}){return o("video",{src:e.full.url,controls:!0,loop:!0,poster:e.thumbnail.url,className:C`
                height: calc(100vh - 6rem);
                width: 100%;
                position: relative;
                background: black;
            `})}const Yl=({post:e})=>o("div",{className:Zl,children:e.type==="video"?o(Gl,{post:e}):o(Vl,{post:e})}),Zl=C`
    height: 100%;
    width: 100%;
    padding: 0 10%;
`,Jl=({page:e,post:t})=>o("div",{className:eu,children:[o(Yl,{post:t}),o(Xl,{}),o(Ys,{fallbackRender:Hl,children:o("div",{className:C`
                        width: 100%;
                        display: grid;
                        grid-template-columns: 20rem 3fr;
                        grid-template-rows: auto auto;
                        gap: 2rem;
                        padding: 2rem;
                    `,children:[o(Wl,{post:t}),o(El,{tags:e.tags}),o("div",{}),o("div",{className:C`
                            width: min(100%, 40rem);
                        `,children:o(Ml,{post_id:t.id,total:e.totalComments,comments:e.comments})})]})})]}),Xl=()=>o("div",{className:C`
            width: calc(100% - 4rem);
            background: ${E.linkSoft};
            border-radius: 1rem;
            height: 2px;
        `}),eu=C`
    width: 100%;
    padding: 1rem;

    /* In order to switch to grid-rows, we need to update image zoom */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
`,tu="#tag-sidebar > li:not(:has(h6))";function Zs(){return He(()=>U(tu).map(ru).filter(t=>!!t))??[]}const ru=e=>{const t=e.className.replace("tag-type-","").replace(" tag",""),r=F("a:last-of-type",e),n=new URL(r.href),i=tt("tags",n.search);if(!i)return null;const s=F(".tag-count",e);if(!s)return null;const a=parseInt(s.innerText,10);return{name:i,count:a,type:t}};async function nu(){const e=await Zs(),t=He(iu)??{comments:[],totalCommentPages:0,totalComments:0},{comments:r,totalCommentPages:n,totalComments:i}=t;return{type:"post",tags:e,comments:r,totalCommentPages:n,totalComments:i}}function iu(){return{comments:U("#comment-list>div").map(e=>({id:au(e),createdAt:uu(e),text:cu(e),uploader:lu(e)})),totalComments:su(),totalCommentPages:ou()}}const su=()=>{try{const e=F("#comment-list").innerText;return parseInt(/\d+ comments/g.exec(e)[0])}catch{return 0}},ou=()=>{const e=U("#paginator>:not([alt], script)").map(r=>parseInt(r.innerText));return Math.max(...e)},au=e=>e.id.slice(1),cu=e=>F(".col2",e).innerText,lu=e=>{const t=F(".col1 > a:first-child",e);if(!t)throw new Error;const r=t.innerText,n=tt("uname",t.href);if(!n)throw new Error;return{id:n,name:r}},uu=e=>{var n;const r=(n=/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}/g.exec(e.innerText))==null?void 0:n.pop();if(!r)throw new Error;return new Date(r)};async function hu(){return{type:"forum",posts:U(".odd,.even").map(r=>He(()=>du(r))).filter(r=>!!r)}}const du=e=>{const t=F(".forum-topic>a",e),r=t.innerText,n=t.href,s=e.children[1].innerText,a=e.children[2],c=fu(a.innerText),h=e.children[3].innerText,f=e.children[4],u=parseInt(f.innerText);return{title:r,link:n,creator:s,lastReplier:h,replyCount:u,lastUpdated:c}},fu=e=>{};async function pu(){const e=Js();if(e==="forum")return hu();if(e==="post")return await nu();if(e==="posts"||e==="subscriptions"){const r=Zs();return Ws(r),{type:e,tags:r}}const t=F("#content");if(t)return{type:"generic",html:t.innerHTML}}const mu="Please enter the CAPTCHA to continue to rule34.xxx",Js=()=>{const e=document.body.innerHTML,t=tt("page"),r=tt("s"),n=!!tt("subscriptions");return e.includes(mu)?"captcha":n?"subscriptions":t=="post"&&r=="list"?"posts":t=="post"&&r=="view"?"post":t=="account"&&r=="options"?"options":t=="account"?"account":t=="forum"?"forum":t=="help"?"help":"home"};function gu(e){const{data:t,fetchNextPage:r}=Hc({queryKey:["posts",e.tags,e.sort,e.subscriptionsOnly],initialPageParam:0,queryFn:async({pageParam:c=0})=>{const l=await $r({search:Ds(e,"rule34"),page:c,limit:100});return{pageParam:c+1,data:l}},getNextPageParam:c=>c.pageParam}),n=H(ne(()=>{let c=((t==null?void 0:t.pages)??[]).reduce((h,f)=>[...h,...f.data.posts],[]);const l=new Set;return c=c.filter(h=>l.has(h.id)?!1:(l.add(h.id),!0)),c},[t==null?void 0:t.pages]),"posts"),{total:i,remaining:s}=H(ne(()=>{var f,u,_;const c=(_=(u=(f=t==null?void 0:t.pages)==null?void 0:f[0])==null?void 0:u.data)==null?void 0:_.total;if(!t||!c)return{total:null,remaining:null};const l=t.pages.map(p=>p.data.posts.length).reduce((p,g)=>p+g,0),h=c-l;return{total:c,remaining:h}},[t]),"total"),a=J(async()=>{await r({cancelRefetch:!1})},[r]);return oe(()=>{r({cancelRefetch:!1})},[r]),{posts:n,remaining:s,total:i,nextPage:a}}const yu=({scale:e=1})=>{const t='<style>.spinner_qM83{animation:spinner_8HQG 1.05s infinite}.spinner_oXPr{animation-delay:.1s}.spinner_ZTLf{animation-delay:.2s}@keyframes spinner_8HQG{0%,57.14%{animation-timing-function:cubic-bezier(0.33,.66,.66,1);transform:translate(0)}28.57%{animation-timing-function:cubic-bezier(0.33,0,.66,.33);transform:translateY(-6px)}100%{transform:translate(0)}}</style><circle class="spinner_qM83" cx="4" cy="12" r="3"/><circle class="spinner_qM83 spinner_oXPr" cx="12" cy="12" r="3"/><circle class="spinner_qM83 spinner_ZTLf" cx="20" cy="12" r="3"/>',r=24*e,n=24*e;return o("div",{className:_u,style:{width:r,height:n},children:o("svg",{style:{transform:`scale(${e})`},width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",dangerouslySetInnerHTML:{__html:t}})})},_u=C`
    display: flex;
    align-items: center;
    justify-content: center;
    fill: ${E.linkSoft};
`,vu=({post:e})=>{let t=null;oe(()=>()=>{t&&clearInterval(t)},[t]);const r=n=>{n.currentTime=(n.duration??2)/2,n.playbackRate=.5,n.play(),t=setTimeout(()=>{n.pause(),n.src=""},4e3)};return o("div",{className:bu,children:o("video",{className:wu,src:e.full.url,width:e.full.width,height:e.full.height,onLoadedMetadata:n=>r(n.currentTarget),autoPlay:!0,loop:!0,poster:e.thumbnail.url,disablePictureInPicture:!0,playsInline:!0,muted:!0})})},bu=C`
    position: relative;
    isolation: isolate;
    overflow: hidden;

    width: 100%;
    height: 100%;
`,wu=C`
    width: 100%;
    height: 100%;
    object-fit: cover;
`,xu=({post:e})=>{const t=J(async()=>e!=null&&e.tags?(await Pl(e.tags)).filter(({type:l})=>l==="artist")[0]:void 0,[e==null?void 0:e.tags]),{data:r}=yn({queryFn:t,queryKey:["thumbnail-artist",e==null?void 0:e.id]}),n=H(ut(null),"imageRef"),i=H(ut(null),"thumbnailRef"),s=ss(i,200);return oe(()=>{const a=n.current;if(!a)return;const c=([h])=>{h.isIntersecting?a.loading="eager":a.loading="lazy"},l=new IntersectionObserver(c,{});return l.observe(a),()=>l.disconnect()}),o("a",{className:Su,ref:i,href:e&&`/index.php?page=post&s=view&id=${e.id}`,children:[o("div",{className:ku,children:e&&((e==null?void 0:e.type)==="video"&&s?o(vu,{post:e}):o("img",{loading:"lazy",ref:n,src:e==null?void 0:e.thumbnail.url,width:e==null?void 0:e.thumbnail.width,height:e==null?void 0:e.thumbnail.height}))}),o("div",{className:Cu,"data-type":(e==null?void 0:e.type)??"image",children:[o("span",{className:C`
                        color: ${E.linkArtist};
                    `,children:(r==null?void 0:r.name)??""}),e&&o("span",{children:["Score ",bn(e.score)]})]})]})},Su=C`
    position: relative;
    isolation: isolate;
    overflow: hidden;
    width: var(--GRID-SIZE);
    height: calc(var(--GRID-SIZE) * 1.5);

    background: ${E.bgHighlight};
    border: 0.1rem solid black;
    border-radius: 1rem;
    color: ${E.textActive};
    text-decoration: none;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
`,Cu=C`
    height: 2rem;
    width: 100%;
    padding: 0 2rem;

    text-shadow: none;
    display: flex;
    justify-content: space-between;
    align-items: center;

    &[data-type="video"] {
        background: #2c2d75;
    }
`,ku=C`
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: ${E.bgDeep};

    & > * {
        transition: 300ms;
        transform-origin: center;

        transform: scale(1);
        filter: brightness(1);
    }

    & > img {
        object-fit: cover;
        width: 100%;
        height: 100%;
    }

    &:hover > * {
        transform: scale(1.07);
        filter: brightness(0.6);
    }
`,Pu=({search:e})=>{const{posts:t,remaining:r,nextPage:n,total:i}=gu(e);console.log({posts:t,remaining:r,total:i});const s=J(a=>{if(!a)return;const c=new IntersectionObserver(async l=>{if(l[0].isIntersecting){if(r===0){c.disconnect();return}n()}});c.observe(a)},[n,r]);return o("div",{children:[o("div",{className:Eu,children:t.map((a,c)=>o(xu,{post:a},a.id))}),o("div",{className:Tu,children:!!r&&o("span",{ref:s,children:o(yu,{scale:2})})})]})},Eu=C`
    --GRID-SIZE: 16rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--GRID-SIZE), 1fr));
    justify-items: center;
    gap: 1rem;
`,Tu=C`
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 2rem;
`,Ou=({value:e,options:t,onSelect:r})=>{const n=J(i=>r(i.currentTarget.value),[r]);return o("select",{value:e,className:Ru,onChange:n,children:_o(t).map(([i,s])=>o("option",{"aria-current":i===e,value:i,children:s}))})},Ru=C`
    height: fit-content;
    border-radius: 0.25rem;
    padding: 0.25rem;
    color: ${E.textActive} option;

    option {
        color: ${E.text};
        &[aria-current="true"] {
            color: ${E.textActive};
        }
    }
`,$u={[be.newest]:"Newest",[be.score]:"Top Rated",[be.hot]:"Hotest",[be.random]:"Random"},Nu=()=>{const[e,t]=H(V(()=>Ms()),"search"),{subscriptions:r}=_n(),n=r.toSorted((a,c)=>a.name.localeCompare(c.name)),i=Js(),s=a=>{const c={...e,sort:a},h="/index.php?page=post&s=list&"+vn(c,"rule34",!1).toString();history.replaceState(null,"",h),t(c)};return o("div",{className:C`
                height: 100%;

                position: relative;
                display: grid;
                grid-template-rows: 4rem auto;
                grid-template-columns: 1fr 6fr 1fr;
            `,children:[o("div",{style:{gridRow:1,gridColumn:3},className:C`
                    display: flex;
                    align-items: center;
                    justify-content: space-around;

                    position: sticky;
                    top: 2.5rem;
                    z-index: 10;
                `,children:o(Ou,{options:$u,value:e.sort,onSelect:s})}),o("div",{style:{gridRow:2,gridColumn:1},className:C`
                    display: flex;
                    flex-direction: column;
                    padding-left: 1rem;
                    gap: 0.5rem;
                `,children:i==="subscriptions"&&n.map(a=>o(Fs,{tag:a}))}),o("div",{style:{gridRow:2,gridColumn:2,overflowY:"auto",height:"100%"},children:o(Pu,{search:e})})]})},Au=()=>o("div",{className:"help",children:[o("h1",{children:"Posts"}),o("p",{children:"A post represents a single file that's been uploaded. Each post can have several tags, comments, and notes. If you have an account, you can also add a post to your favorites."}),o("div",{className:"section",children:[o("h4",{children:"Search"}),o("p",{children:["Searching for posts is straightforward. Simply enter the tags you want to search for, separated by spaces. For example, searching for ",o("code",{children:"original panties"})," will return every post that has both the original tag"," ",o("strong",{children:"AND"})," the panties tag."]}),o("h4",{children:"Safe images only mode"}),o("p",{children:["Sometimes viewing all our images is a bit of a problem. You may not be in a location where it is acceptable to view adult content. We have a temporary, hacked together, way to only view safe images when searching our large image database. Not all images are rated correctly so you should not put too much faith into this.",o("br",{}),o("br",{}),"You are still able to view adult images if you click the links to the posts directly."]})]}),o("div",{className:"section",children:[o("h4",{children:"Tag List"}),o("p",{children:"In both the listing page and the show page you'll notice a list of tag links with characters next to them. Here's an explanation of what they do:"}),o("dl",{children:[o("dt",{children:"+"}),o("dd",{children:"This adds the tag to the current search."}),o("dt",{children:""}),o("dd",{children:"This adds the negated tag to the current search."}),o("dt",{children:"950"}),o("dd",{children:"The number next to the tag represents how many posts there are. This isn't always the total number of posts for that tag. It may be slightly out of date as cache isn't always refreshed."}),o("dt",{children:"Color"}),o("dd",{children:"Some tag links may be colored green, purple, or red. Green means the tag represents a character. Purple means the tag represents a copyright (things like anime, manga, games, or novels). Red means the tag represents an artist."})]}),o("p",{children:"When you're not searching for a tag, by default the tag list will show the last few tags added to the database. When you are searching for tags, the tag list will show related tags, alphabetically."})]}),o("h4",{children:"Types"}),o("p",{children:"Tags can be typed. Currently there are only three types: artist, character, and copyright."}),o("div",{className:"section",children:[o("h6",{children:"Artist"}),o("p",{children:["Artist tags identify the tag as the artist. This doesn't mean the artist of the original copyrighted artwork (for example, you wouldn't use the ",o("code",{children:"barasui"})," tag on a picture of Miu drawn by ",o("code",{children:"hanaharu_naruko"}),")."]}),o("p",{children:["When tagging something, you can tell Rule34 that a tag is an artist tag by prefixing it with ",o("code",{children:"artist:"}),". For example, tagging something ",o("code",{children:"artist:mark tree"})," ","will tag a post with ",o("code",{children:"mark"})," and ",o("code",{children:"tree"}),". If the ",o("code",{children:"mark"})," tag doesn't already exist, it'll be created with the tag type set to artist."]}),o("h6",{children:"Character"}),o("p",{children:'Character tags identify the tag as a character. They work exactly like artist tags, only you prefix with "character" (or "char").'}),o("h6",{children:"Copyright"}),o("p",{children:'The copyright type indicates the tag represents an anime, a game, a novel, or some sort of copyrighted setting. Otherwise they work identically to character and artist tags, only you prefix with "copyright" instead (or "copy").'})]}),o("h4",{children:"Artifacts"}),o("p",{children:"Artifacts are the residue of image processing usually left in the JPEG format. It makes the image look weird and blocky around parts of the drawing"}),o("div",{className:"section",children:[o("h6",{children:"Examples"}),o("p",{children:"For your convenience, here are links to some examples. Don't upload images with artifacts."}),o("p",{children:[o("a",{href:"/counter/help/images/1.jpg",children:"1 (No noticeable compression"}),") |"," ",o("a",{href:"/counter/help/images/2.jpg",children:"2 Light Compression"})," ","|"," ",o("a",{href:"/counter/help/images/3.jpg",children:"3 (Heavy Compression)"})," ","|"," ",o("a",{href:"/counter/help/images/4mspaint.jpg",children:"4 (Ms Paint compression)"})]})]})]}),Iu=()=>o("div",{className:"help",children:[o("h1",{children:"Ratings"}),o("div",{className:"section",children:[o("p",{children:["All posts on Rule34 have one of three types of ratings: Safe, Questionable, and Explicit. Questionable is the default rating if you do not choose to specify one."," ",o("strong",{children:"Please take note"}),": occasionally explicit images will be marked safe, and vice versa. You should not depend completely on rating filters unless you can tolerate the occasional wrongly rated image. If this happens to you, fix it so that other users don't have that happen to them."]}),o("div",{className:"section",children:[o("h4",{children:"Explicit"}),o("p",{children:"Any image where the vagina or penis are exposed and easily visible. This includes depictions of sex, masturbation, or any sort of penetration."})]}),o("div",{className:"section",children:[o("h4",{children:"Safe"}),o("p",{children:["Safe posts are images that you would not feel guilty looking at openly in public. Pictures of nudes, exposed nipples or pubic hair, cameltoe, or any sort of sexually suggestive pose are ",o("b",{children:"NOT"})," safe and belong in questionable. Swimsuits and lingerie are borderline cases; some are safe, some are questionable."]})]}),o("div",{className:"section",children:[o("h4",{children:"Questionable"}),o("p",{children:"Basically anything that isn't safe or explicit. This is the great middle area, and since it includes unrated posts, you shouldn't really expect anything one way or the other when browsing questionable posts."})]}),o("div",{className:"section",children:[o("h4",{children:"Search"}),o("p",{children:["You can filter search results by querying for"," ",o("code",{children:"rating:safe"}),", ",o("code",{children:"rating:questionable"}),", or ",o("code",{children:"rating:explicit"}),". You can also combine them with other tags and they work as expected."]}),o("p",{children:["If you want to remove a rating from your search results, use"," ",o("code",{children:"-rating:safe"}),", ",o("code",{children:"-rating:questionable"}),", and ",o("code",{children:"-rating:explicit"}),"."]})]})]})]}),Du=()=>o("div",{className:"help",children:[o("h1",{children:"Forum"}),o("p",{children:"All forum posts are sanitized, meaning all HTML is escaped. That being said, there are a few features you can use:"}),o("div",{className:"section",children:[o("h4",{children:"URLs"}),o("p",{children:"Any URL starting with http:// will automatically be converted into a link."})]}),o("div",{className:"section",children:[o("h4",{children:"Post Link Shorthand"}),o("p",{children:"You can link to specific post/view pages using the following shorthand: [post]nnnn[/post], where nnnn is the id number of the post."})]}),o("div",{className:"section",children:[o("h4",{children:"Forum Link Shorthand"}),o("p",{children:"You can link to specific forum using the following shorthand: [forum]nnnn[/forum], where nnnn is the id number of the forum."})]}),o("div",{className:"section",children:[o("h4",{children:"Forum Post Link Shorthand"}),o("p",{children:"You can link to specific forum posts using the following shorthand: [forump]nnnn[/forump], where nnnn is the id number of the forum post."})]})]}),Mu=()=>o("div",{className:"help",children:[o("h1",{children:"Pools"}),o("div",{className:"section",children:[o("p",{children:"Pools are groups of posts with a common theme. They are similar to favorites with three important differences: public pools allow anyone to add or remove from them, you can create multiple pools, and posts in a pool can be ordered. This makes pools ideal for subjective tags, or for posts that are part of a series (as is the case in cg sets)."}),o("p",{children:["If you're importing several posts into a pool, this process can become tedious. You can instead click on the Import link at the bottom of the pool's page. This allows you to execute a post search using any"," ",o("a",{href:"index.php?page=help&topic=cheatsheet",children:"tag combination"})," ","you would normally use. Remove any posts that are irrelevant to the pool, then finish the import process."]}),o("p",{children:"Pools can be private, public or personal. A private pool means you are the only person who can add or remove from it. In contrast, public pools can be updated by anyone, even anonymous users depending on current site restrictions, while personal pools are just that, personal. Only you have any access to view or make changes to it. This pool type is meant to be used as a favorite grouping system."}),o("p",{children:"To remove a post from a pool, go to the pool's page and select the Delete Mode checkbox. Then click on the posts you want to delete."})]})]}),Fu=()=>o("div",{className:"help",children:[o("h1",{children:"Cheat Sheet"}),o("div",{className:"section",children:[o("h4",{children:"Searching"}),o("dt",{children:"tag1 tag2"}),o("dd",{children:"Search for posts that have tag1 and tag2."}),o("dt",{children:"( tag1 ~ tag2 )"}),o("dd",{children:["Search for posts that have tag1 or tag2. The braces are"," ",o("b",{children:"important"}),' to group the tags between which the "or" counts. The spaces between the braces and tags are also'," ",o("b",{children:"important"})," because some tags end in braces!"]}),o("dt",{children:"night~"}),o("dd",{children:["Fuzzy search for the tag night. This will return results such as night fight bright and so on according to the"," ",o("a",{href:"http://en.wikipedia.org/wiki/Levenshtein_distance",rel:"nofollow",target:"_blank",children:"Levenshtein distance"}),"."]}),o("dt",{children:"-tag1"}),o("dd",{children:"Search for posts that don't have tag1."}),o("dt",{children:"ta*1"}),o("dd",{children:"Search for posts with tags that starts with ta and ends with 1."}),o("dt",{children:"user:bob"}),o("dd",{children:"Search for posts uploaded by the user Bob."}),o("dt",{children:"md5:foo"}),o("dd",{children:"Search for posts with the MD5 hash foo."}),o("dt",{children:"md5:foo*"}),o("dd",{children:"Search for posts whose MD5 starts with the MD5 hash foo."}),o("dt",{children:"rating:questionable"}),o("dd",{children:"Search for posts that are rated questionable."}),o("dt",{children:"-rating:questionable"}),o("dd",{children:"Search for posts that are not rated questionable."}),o("dt",{children:"parent:1234"}),o("dd",{children:"Search for posts that have 1234 as a parent (and include post 1234)."}),o("dt",{children:"rating:questionable rating:safe"}),o("dd",{children:"In general, combining the same metatags (the ones that have colons in them) will not work."}),o("dt",{children:"rating:questionable parent:100"}),o("dd",{children:"You can combine different metatags, however."}),o("dt",{children:"width:>=1000 height:>1000"}),o("dd",{children:"Find images with a width greater than or equal to 1000 and a height greater than 1000."}),o("dt",{children:"score:>=10"}),o("dd",{children:"Find images with a score greater than or equal to 10. This value is updated once daily at 12AM CST."}),o("dt",{children:"sort:updated:desc"}),o("dd",{children:["Sort posts by their most recently updated order.",o("br",{}),o("br",{}),o("i",{children:o("b",{children:"Other sortable types:"})}),o("br",{}),o("div",{children:o("ul",{children:[o("li",{children:"id"}),o("li",{children:"score"}),o("li",{children:"rating"}),o("li",{children:"user"}),o("li",{children:"height"}),o("li",{children:"width"}),o("li",{children:"parent"}),o("li",{children:"source"}),o("li",{children:"updated"})]})}),"Can be sorted by both asc or desc."]})]})]}),Lu=()=>o("div",{className:"help",children:[o("h1",{children:"API Basics"}),'You should never receive an error unless the server is overloaded or the search dies. In cases of the searcher breaking, you will receive a response success of "false" and a message stating "search down" or similiar.',o("br",{}),o("br",{}),o("div",{className:"section",children:[o("h2",{children:"Posts"}),o("h4",{children:"List"}),"Url for API access:"," ",o("b",{children:"https://api.rule34.xxx/index.php?page=dapi&s=post&q=index"}),o("br",{}),o("br",{}),o("ul",{children:[o("li",{children:[o("strong",{children:"limit"})," How many posts you want to retrieve. There is a hard limit of 1000 posts per request."]}),o("li",{children:[o("strong",{children:"pid"})," The page number."]}),o("li",{children:[o("strong",{children:"tags"})," The tags to search for. Any tag combination that works on the web site will work here. This includes all the meta-tags. See cheatsheet for more information."]}),o("li",{children:[o("strong",{children:"cid"})," Change ID of the post. This is in Unix time so there are likely others with the same value if updated at the same time."]}),o("li",{children:[o("strong",{children:"id"})," The post id."]}),o("li",{children:[o("strong",{children:"json"})," Set to 1 for JSON formatted response."]})]}),o("h4",{children:"Deleted Images"}),"Url for API access:"," ",o("b",{children:"https://api.rule34.xxx/index.php?page=dapi&s=post&q=index&deleted=show"}),o("br",{}),o("br",{}),o("ul",{children:o("li",{children:[o("strong",{children:"last_id"})," A numerical value. Will return everything above this number."]})})]}),o("div",{className:"section",children:[o("h2",{children:"Comments"}),o("h4",{children:"List"}),"Url for API access:"," ",o("b",{children:"https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index"}),o("br",{}),o("br",{}),o("ul",{children:o("li",{children:[o("strong",{children:"post_id"})," The id number of the comment to retrieve."]})})]}),o("div",{className:"section",children:[o("h2",{children:"Tags"}),o("h4",{children:"List"}),"Url for API access:"," ",o("strong",{children:"https://api.rule34.xxx/index.php?page=dapi&s=tag&q=index"}),o("br",{}),o("br",{}),o("ul",{children:[o("li",{children:[o("strong",{children:"id"})," The tag's id in the database. This is useful to grab a specific tag if you already know this value."]}),o("li",{children:[o("strong",{children:"limit"})," How many tags you want to retrieve. There is a default limit of 100 per request.",o("br",{})]})]})]})]}),ju=()=>o("div",{className:C`
            padding: 0 2rem;
        `,children:[o(Au,{}),o(Iu,{}),o(Du,{}),o(Mu,{}),o(Fu,{}),o(Lu,{})]}),Uu=({tags:e,onClick:t})=>e===void 0||e.length===0?null:o("div",{className:qu,children:e.map(r=>o(Hu,{onClick:()=>t(r.name),tag:r},r.name))}),Hu=({onClick:e,tag:{name:t,type:r,count:n}})=>o("button",{className:Ts(zu,C`
                    color: ${os(r)};
                `),onMouseDown:e,children:[t,n&&" / "+bn(n)]}),qu=C`
    position: absolute;
    z-index: 20;
    top: 2.5rem;
    left: 0;
    width: 100%;
    border-radius: 0.5rem;
    padding: 1rem;
    background: ${E.bgAlt};

    display: flex;
    flex-direction: column;
    gap: 0.25rem;
`,zu=C`
    cursor: pointer;
    padding: 0.1rem;
    background: none;
    border: none;
    text-align: left;

    &:focus {
        border: none;
        text-decoration: underline;
    }
`;async function Bu(e){return(await(await fetch(`https://ac.rule34.xxx/autocomplete.php?q=${e}`)).json()).map(i=>({name:i.value,type:i.type??"general",count:He(()=>parseInt(/\(([0-9]+)\)/.exec(i.label)[1]))??0}))}async function Qu(e){if(e===void 0||e==="")return[];if(e.startsWith("sort:"))return[{name:"sort:score",type:"general"},{name:"sort:random",type:"general"},{name:"sort:id",type:"general"},{name:"sort:id:desc",type:"general"},{name:"sort:created_at",type:"general"},{name:"sort:updated",type:"general"}];if(e.startsWith("meta:"))return[{name:"meta:subscribed",type:"general"}];const t=await Bu(e);return await Ws(t),t}function Wu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vu=function(){function e(t,r,n,i,s){return t<r||n<r?t>n?n+1:t+1:i===s?r:r+1}return function(t,r){if(t===r)return 0;if(t.length>r.length){var n=t;t=r,r=n}for(var i=t.length,s=r.length;i>0&&t.charCodeAt(i-1)===r.charCodeAt(s-1);)i--,s--;for(var a=0;a<i&&t.charCodeAt(a)===r.charCodeAt(a);)a++;if(i-=a,s-=a,i===0||s<3)return s;var c=0,l,h,f,u,_,p,g,m,v,w,b,x,k=[];for(l=0;l<i;l++)k.push(l+1),k.push(t.charCodeAt(a+l));for(var y=k.length-1;c<s-3;)for(v=r.charCodeAt(a+(h=c)),w=r.charCodeAt(a+(f=c+1)),b=r.charCodeAt(a+(u=c+2)),x=r.charCodeAt(a+(_=c+3)),p=c+=4,l=0;l<y;l+=2)g=k[l],m=k[l+1],h=e(g,h,f,v,m),f=e(h,f,u,w,m),u=e(f,u,_,b,m),p=e(u,_,p,x,m),k[l]=p,_=u,u=f,f=h,h=g;for(;c<s;)for(v=r.charCodeAt(a+(h=c)),p=++c,l=0;l<y;l+=2)g=k[l],k[l]=p=e(g,h,p,v,k[l+1]),h=g;return p}}();const Ku=Wu(Vu),Gu=async({callback:e,key:t,timeout:r})=>{const n="cache-"+(typeof t=="object"?t.join("-"):t);let i=Yu(n,r);if(i)return i;const s={value:await e(),timestamp:Date.now()};return sessionStorage.setItem(n,JSON.stringify(s)),s.value},Yu=(e,t)=>{let r=sessionStorage.getItem(e);if(r)try{const n=JSON.parse(r);if(!t)return n.value;if(Date.now()-n.timestamp>t){sessionStorage.removeItem(e);return}return n.value}catch(n){sessionStorage.removeItem(e),console.warn("Cache retrival failed"),console.warn(n)}};function Zu(e,t){return e.sort((r,n)=>t(r)-t(n))}async function Ju(e){if(!e)return[];let t=await Gu({callback:()=>Qu(e),key:["tag-search",e]});const r=n=>Ku(n,e??"");return t=Zu(t,n=>r(n.name)),t}function Xu(e){const t=H(ne(()=>e.split(" ").at(-1),[e]),"tag"),r=J(async()=>await Ju(t),[t]),{data:n}=yn({queryFn:r,queryKey:["tag-autocomplete",e??""],placeholderData:cc});return n}const eh=e=>{const[t,r]=H(V(!1),"focused");return oe(()=>{const n=e.current;if(!n)return;const{abort:i,signal:s}=new AbortController;return n.addEventListener("focus",()=>r(!0),{signal:s}),n.addEventListener("blur",()=>r(!1),{signal:s}),()=>i()},[e]),t},th=({initialSearch:e,onSubmit:t})=>{const[r,n]=H(V(""),"search"),[i,s]=H(V(e.tags),"tags"),a=H(ut(null),"inputRef"),c=eh(a),l=Xu(r),h=l==null?void 0:l.filter(p=>!i.includes(p.name)),f=c&&r.length>0,u=p=>{p.key!=="Backspace"||r!==""||(p.preventDefault(),s(g=>g.slice(0,-1)))},_=J(p=>{if(p.preventDefault(),!(r.length>0))t({tags:i});else{const m=i.includes(r)?i:[...i,r];s(m),n("")}},[t,r,i]);return o("div",{className:rh,children:[o("div",{className:ih,children:[o("div",{className:ah,children:i.map(p=>o("button",{className:ch,onClick:()=>s(g=>g.filter(m=>m!==p)),children:p}))}),o("form",{className:nh,onSubmit:_,children:o("input",{type:"text",ref:a,value:r,className:sh,onKeyDown:u,onChange:p=>{n(p.target.value)}})})]}),f&&o(Uu,{onClick:p=>{s(g=>[...g,p]),n("")},tags:h??[]}),o("button",{className:oh,onClick:()=>t({tags:i}),children:o(ft,{icon:"search",fill:E.bg,size:"1.5rem"})})]})},rh=C`
    position: relative;
    height: 2rem;
    width: 100%;

    display: grid;
    grid-template-columns: 1fr 3rem;
`,nh=C`
    width: 100%;
`,ih=C`
    padding-left: 0.5rem;
    border-radius: 0.75rem 0 0 0.75rem;
    background: ${E.bgDeep};
    border: ${E.linkSoft} solid 0.1rem;
    border-right: 0;

    display: flex;
    align-items: center;
`,sh=C`
    width: 100%;
    border: none !important;
    background: none;
`,oh=C`
    display: flex;
    place-items: center;
    justify-content: center;

    border: ${E.linkSoft} solid;
    border-top: 0.1rem;
    border-bottom: 0.1rem;

    font-weight: 700;
    color: ${E.bg};
    background-color: ${E.linkSoft};
    border-radius: 0 0.5rem 0.5rem 0;
`,ah=C`
    display: flex;
    gap: 0.5rem;
    padding-left: 0.25rem;
`,ch=C`
    padding: 0.1rem 0.25rem;
    background: ${E.bgHighlight};
    border-radius: 0.25rem;
    color: ${E.textActive};

    display: flex;
    gap: 0.25rem;
    text-wrap: nowrap;
`,Rn=({href:e,icon:t,alt:r})=>o("a",{href:e,className:lh,children:o(ft,{icon:t,size:"1.5rem",alt:r})}),lh=C`
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 0;

    height: 100%;
    color: ${E.textActive} !important;
`,wr=({href:e,current:t,label:r})=>o("a",{href:e,"data-current":t,className:uh,children:o("span",{children:r})}),uh=C`
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;

    height: 3rem;
    width: 100%;
    text-shadow: 1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000,
        -1px 1px 1px #000;
    font-size: 130%;

    color: ${E.textActive} !important;

    &:hover {
        text-decoration: underline;
    }

    &[data-current="true"] {
        background-color: ${E.bgHighlight};
    }
`,hh=({type:e,open:t,onClose:r})=>{const{subscriptionsUrl:n}=_n();return o("div",{className:fh,children:[o("nav",{className:ph,"aria-hidden":!t,children:[o("div",{className:"top",children:[o(wr,{label:"Posts",href:"/index.php?page=post&s=list",current:e==="posts"}),o(wr,{label:"Subscriptions",href:n,current:e==="subscriptions"}),o(wr,{label:"Forum",href:"/index.php?page=forum&s=list",current:e==="forum"})]}),o("div",{className:"bottom",children:o(wr,{label:"Help",href:"/index.php?page=help",current:e==="help"})})]}),o("div",{className:dh,"aria-hidden":!t,onClick:i=>{i.target.tagName==="DIV"&&r()}})]})},dh=C`
    position: absolute;
    inset: 0;
    width: 100vw;
    height: calc(100vh - 3rem);
    z-index: 20;

    background-color: rgb(0, 0, 0, 0.3);

    transition: 150ms ease-out;
    opacity: 1;
    &[aria-hidden="true"] {
        visibility: hidden;
        opacity: 0;
    }
`,fh=C`
    position: sticky;
    left: 0;
    top: 0;
    width: 0;
    height: 0;
    z-index: 20;
`,ph=C`
    z-index: 30;
    height: calc(100vh - 3rem);
    width: 12rem;
    position: sticky;
    top: 3rem;
    left: 0;
    isolation: isolate;
    background: ${E.bg};

    display: flex;
    flex-direction: column;
    justify-content: space-between;

    .top,
    .bottom {
        display: flex;
        flex-direction: column;
    }

    transition: 150ms ease-out;
    opacity: 1;
    transform: translateX(0%);
    &[aria-hidden="true"] {
        opacity: 0;
        transform: translateX(-100%);
    }
`,Xs=({page:{type:e}})=>{const t=Ms(),[r,n]=H(V(!1),"sidebarOpen"),i=J(({tags:s})=>{const a={...t,tags:s},l="/index.php?page=post&s=list&"+vn(a,"rule34",!1).toString();window.location.assign(l)},[t]);return o("div",{className:mh,children:[o("header",{className:gh,children:o("nav",{className:yh,children:[o("div",{children:o(Al,{icon:"bars-solid",size:"1.5rem",action:()=>n(s=>!s)})}),o(th,{initialSearch:t,onSubmit:i}),o(Rn,{icon:"settings-solid",alt:"Settings",href:"/index.php?page=account&s=options"}),o(Rn,{icon:"upload",alt:"Upload",href:"/index.php?page=post&s=add"}),o(Rn,{icon:"profile-solid",alt:"Account",href:"/index.php?page=account&s=home"})]})}),o(hh,{open:r,type:e,onClose:()=>n(!1)})]})},mh=C`
    position: sticky;
    top: 0;
    z-index: 100;
`,gh=C`
    height: 3rem;
    position: sticky;
    top: 0;
    left: 0;
    isolation: isolate;
    z-index: 100;
    padding: 0 1rem;
`,yh=C`
    height: 100%;
    display: flex;
    justify-content: left;
    align-items: center;
    gap: 1.5rem;

    font-weight: bold;
    background: ${E.bg};
`,_h=({error:e,resetErrorBoundary:t})=>(console.error(e),o("div",{className:vh,children:[o("h3",{children:"Something went wrong!"}),o("pre",{className:bh,children:e.message}),o("button",{className:wh,onClick:t,children:"Try Again"})]})),vh=C`
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 1rem;
    align-items: center;
`,bh=C`
    background: ${E.bgOverlay};
    color: red;
    padding: 1rem;
    font-size: 120%;
`,wh=C`
    padding: 0.5rem;
    border: 0.1rem solid black;
    border-radius: 0.25rem;
    background: ${E.bgHighlight};
    color: ${E.link};
    cursor: pointer;
`,xr=({children:e,page:t})=>o("div",{children:[o(Xs,{page:t}),o(Ys,{fallbackRender:_h,children:o(Ft,{children:e})})]}),xh=ze(null),Sh=({page:e,children:t})=>o(xh.Provider,{value:e,children:t}),Bh="",Qh="";var Sr={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var eo;function Ch(){if(eo)return Sr;eo=1,Sr.parse=a,Sr.serialize=h;var e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,r=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,n=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function a(p,g){if(typeof p!="string")throw new TypeError("argument str must be a string");var m={},v=p.length;if(v<2)return m;var w=g&&g.decode||f,b=0,x=0,k=0;do{if(x=p.indexOf("=",b),x===-1)break;if(k=p.indexOf(";",b),k===-1)k=v;else if(x>k){b=p.lastIndexOf(";",x-1)+1;continue}var y=c(p,b,x),R=l(p,x,y),T=p.slice(y,R);if(!t.call(m,T)){var A=c(p,x+1,k),M=l(p,k,A);p.charCodeAt(A)===34&&p.charCodeAt(M-1)===34&&(A++,M--);var he=p.slice(A,M);m[T]=_(he,w)}b=k+1}while(b<v);return m}function c(p,g,m){do{var v=p.charCodeAt(g);if(v!==32&&v!==9)return g}while(++g<m);return m}function l(p,g,m){for(;g>m;){var v=p.charCodeAt(--g);if(v!==32&&v!==9)return g+1}return m}function h(p,g,m){var v=m&&m.encode||encodeURIComponent;if(typeof v!="function")throw new TypeError("option encode is invalid");if(!r.test(p))throw new TypeError("argument name is invalid");var w=v(g);if(!n.test(w))throw new TypeError("argument val is invalid");var b=p+"="+w;if(!m)return b;if(m.maxAge!=null){var x=Math.floor(m.maxAge);if(!isFinite(x))throw new TypeError("option maxAge is invalid");b+="; Max-Age="+x}if(m.domain){if(!i.test(m.domain))throw new TypeError("option domain is invalid");b+="; Domain="+m.domain}if(m.path){if(!s.test(m.path))throw new TypeError("option path is invalid");b+="; Path="+m.path}if(m.expires){var k=m.expires;if(!u(k)||isNaN(k.valueOf()))throw new TypeError("option expires is invalid");b+="; Expires="+k.toUTCString()}if(m.httpOnly&&(b+="; HttpOnly"),m.secure&&(b+="; Secure"),m.partitioned&&(b+="; Partitioned"),m.priority){var y=typeof m.priority=="string"?m.priority.toLowerCase():m.priority;switch(y){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(m.sameSite){var R=typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite;switch(R){case!0:b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"strict":b+="; SameSite=Strict";break;case"none":b+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return b}function f(p){return p.indexOf("%")!==-1?decodeURIComponent(p):p}function u(p){return e.call(p)==="[object Date]"}function _(p,g){try{return g(p)}catch{return p}}return Sr}var Cr=Ch();function kh(){const e=typeof global>"u"?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return typeof e=="boolean"?e:typeof document=="object"&&typeof document.cookie=="string"}function Ph(e){return typeof e=="string"?Cr.parse(e):typeof e=="object"&&e!==null?e:{}}function $n(e,t={}){const r=Eh(e);if(!t.doNotParse)try{return JSON.parse(r)}catch{}return e}function Eh(e){return e&&e[0]==="j"&&e[1]===":"?e.substr(2):e}class Th{constructor(t,r={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const i=this.cookies;this.cookies=Cr.parse(document.cookie),this._checkChanges(i)};const n=typeof document>"u"?"":document.cookie;this.cookies=Ph(t||n),this.defaultSetOptions=r,this.HAS_DOCUMENT_COOKIE=kh()}_emitChange(t){for(let r=0;r<this.changeListeners.length;++r)this.changeListeners[r](t)}_checkChanges(t){new Set(Object.keys(t).concat(Object.keys(this.cookies))).forEach(n=>{t[n]!==this.cookies[n]&&this._emitChange({name:n,value:$n(this.cookies[n])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(t,r={}){return r.doNotUpdate||this.update(),$n(this.cookies[t],r)}getAll(t={}){t.doNotUpdate||this.update();const r={};for(let n in this.cookies)r[n]=$n(this.cookies[n],t);return r}set(t,r,n){n?n=Object.assign(Object.assign({},this.defaultSetOptions),n):n=this.defaultSetOptions;const i=typeof r=="string"?r:JSON.stringify(r);this.cookies=Object.assign(Object.assign({},this.cookies),{[t]:i}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Cr.serialize(t,i,n)),this._emitChange({name:t,value:r,options:n})}remove(t,r){const n=r=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),r),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[t],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Cr.serialize(t,"",n)),this._emitChange({name:t,value:void 0,options:r})}addChangeListener(t){this.changeListeners.push(t),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(t){const r=this.changeListeners.indexOf(t);r>=0&&this.changeListeners.splice(r,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const Oh=ze(new Th);typeof SuppressedError=="function"&&SuppressedError;var Nn={exports:{}},L={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var to;function Rh(){if(to)return L;to=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,h=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,_=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function x(y){if(typeof y=="object"&&y!==null){var R=y.$$typeof;switch(R){case t:switch(y=y.type,y){case l:case h:case n:case s:case i:case u:return y;default:switch(y=y&&y.$$typeof,y){case c:case f:case g:case p:case a:return y;default:return R}}case r:return R}}}function k(y){return x(y)===h}return L.AsyncMode=l,L.ConcurrentMode=h,L.ContextConsumer=c,L.ContextProvider=a,L.Element=t,L.ForwardRef=f,L.Fragment=n,L.Lazy=g,L.Memo=p,L.Portal=r,L.Profiler=s,L.StrictMode=i,L.Suspense=u,L.isAsyncMode=function(y){return k(y)||x(y)===l},L.isConcurrentMode=k,L.isContextConsumer=function(y){return x(y)===c},L.isContextProvider=function(y){return x(y)===a},L.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},L.isForwardRef=function(y){return x(y)===f},L.isFragment=function(y){return x(y)===n},L.isLazy=function(y){return x(y)===g},L.isMemo=function(y){return x(y)===p},L.isPortal=function(y){return x(y)===r},L.isProfiler=function(y){return x(y)===s},L.isStrictMode=function(y){return x(y)===i},L.isSuspense=function(y){return x(y)===u},L.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===h||y===s||y===i||y===u||y===_||typeof y=="object"&&y!==null&&(y.$$typeof===g||y.$$typeof===p||y.$$typeof===a||y.$$typeof===c||y.$$typeof===f||y.$$typeof===v||y.$$typeof===w||y.$$typeof===b||y.$$typeof===m)},L.typeOf=x,L}var ro;function $h(){return ro||(ro=1,Nn.exports=Rh()),Nn.exports}var An,no;function Nh(){if(no)return An;no=1;var e=$h(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=n,s[e.Memo]=i;function a(g){return e.isMemo(g)?i:s[g.$$typeof]||t}var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,_=Object.prototype;function p(g,m,v){if(typeof m!="string"){if(_){var w=u(m);w&&w!==_&&p(g,w,v)}var b=l(m);h&&(b=b.concat(h(m)));for(var x=a(g),k=a(m),y=0;y<b.length;++y){var R=b[y];if(!r[R]&&!(v&&v[R])&&!(k&&k[R])&&!(x&&x[R])){var T=f(m,R);try{c(g,R,T)}catch{}}}}return g}return An=p,An}Nh();function Ah(){return typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"}function Ih(e,t){const r=ht(Oh);if(!r)throw new Error("Missing <CookiesProvider>");const i=Object.assign(Object.assign({},{doNotUpdate:!0}),t),[s,a]=V(()=>r.getAll(i));Ah()&&lt(()=>{function f(){const u=r.getAll(i);Dh(e||null,u,s)&&a(u)}return r.addChangeListener(f),()=>{r.removeChangeListener(f)}},[r,s]);const c=ne(()=>r.set.bind(r),[r]),l=ne(()=>r.remove.bind(r),[r]),h=ne(()=>r.update.bind(r),[r]);return[s,c,l,h]}function Dh(e,t,r){if(!e)return!0;for(let n of e)if(t[n]!==r[n])return!0;return!1}const Mh=({children:e})=>{const[t]=Ih(["theme"]),[r,n]=H(V(),"_");return oe(()=>{const i=t.theme==="dark"?ic:nc,s=sc(i);n(a=>(a&&a.remove(),mo(` body { ${s} }`)))},[t.theme]),e},zt=({page:e,children:t})=>{const r=new Sc;return o(rc.StrictMode,{children:o(Oc,{client:r,children:o(Sh,{page:e,children:o(Mh,{children:t})})})})};function Bt(e){return{render:function(t){Xi(t,e)},unmount:function(){is(e)}}}async function Fh(e){if(e.type==="post")return await Lh(e);e.type==="help"?await Uh(e):e.type==="posts"||e.type==="subscriptions"?await jh(e):e.type==="generic"?await Hh(e):await qh(e)}async function Lh(e){const t=tt("id"),r=await Po(t);if(!r)return;Bt(document.body).render(o(zt,{page:e,children:o(xr,{page:e,children:o(Jl,{page:e,post:r})})}))}async function jh(e){Bt(document.body).render(o(zt,{page:e,children:o(xr,{page:e,children:o(Nu,{page:e})})}))}async function Uh(e){Bt(document.body).render(o(zt,{page:e,children:o(xr,{page:e,children:o(ju,{})})}))}async function Hh(e){Bt(document.body).render(o(zt,{page:e,children:o(xr,{page:e,children:o("div",{id:"content",dangerouslySetInnerHTML:{__html:e.html}})})}))}async function qh(e){const t=await Y("#header");t.id="rr-header",Bt(t).render(o(zt,{page:e,children:o(Xs,{page:e})}))}function zh(){$e("[data-nosnippet]"),$e(".horizontalFlexWithMargins"),$e("img[src$='r34chibi.png']")}(async()=>{const e=await pu();!e||e.type==="captcha"||(He(zh),await Fh(e))})()});
;
(function(){
                    const el = document.createElement("style");
                    el.innerText = "body,div,h1,h2,h3,h4,h5,h6,p,ul,li,dd,dt{margin:0;padding:0}:where(a:link,a:visited,a:hover,a:active){color:var(--c-link);text-decoration:none}a.spoiler{cursor:text}div#static-index{text-align:center;display:flex;flex-direction:column;align-items:center}div#static-index>div#links>a{margin:0 .5em}div#static-more>div{float:left;width:25%}div#static-more>div>ul{margin-top:2em}div#static-more>div>ul>li{list-style-type:none;margin:0}addr{display:block;margin-left:2em;font-weight:700}code{font-family:monospace;font-size:1.2em}dd{margin-bottom:1em}dt{font-weight:700}h1{font-size:2em}h2{font-size:1.8em}h2.wiki-title{margin-bottom:.25em}h3{font-size:1.6em}h4{font-size:1.4em}h5{font-size:1.2em}h6{font-size:1em}img{border:none;vertical-align:middle}label{font-weight:700;white-space:nowrap}ol{margin-left:1em}p{margin-bottom:1em}span.informational{cursor:help}span.spoiler{cursor:text}span.plid{display:none}span.unread-topic,strong.divider{font-weight:700}textarea{display:block;padding:0 .3em;font-family:monospace;font-size:1.2em}textarea.no-block{display:inline}ul{margin-bottom:1em}ul.bare-list li{list-style-type:none}ul.flat-list{margin:0;padding:0}ul.flat-list li{display:inline;list-style-type:none;font-weight:700;padding:0;margin:0 1em 0 0}ul.flat-list li a{font-weight:400}ul.flat-list li a.forum-update{font-style:italic}ul.link-page{font-size:1.2em;font-weight:700}ul.link-page>li{margin:0;padding:0;list-style-type:none}.history-search-row{clear:left;margin:0;bottom:0}.history-search-label{width:10%;float:left}div#artist-index>table td{white-space:nowrap}div.auto_complete{width:350px}div.auto_complete ul{border:1px solid;margin:0;padding:0;width:100%;list-style-type:none}div.auto_complete ul li{margin:0;padding:3px}div.auto_complete ul strong.highlight{margin:0;padding:0}div.blocked{border:2px solid;font-size:1.2em;padding:1em;margin:1em;text-align:center}div#footer{margin-top:1em;text-align:center;font-size:120%;clear:both}div.has-mail{border:2px solid;padding:1em;margin:1em;font-size:1.5em;text-align:center}div.help{margin-top:2em}div.help a.code{font-family:monospace}div.help div.code{border:1px dashed;margin:1em 0;padding:1em 2em;overflow:hidden;font-family:monospace}div.help>div.section{margin-bottom:4em}div.help>div.section>div.section{margin-bottom:2em}div.help h1,div.help h2,div.help h3,div.help h4{margin:0 0 .5em}div#info{font-style:italic}div#mail-show div.message{margin-bottom:4em}div.notice{font-size:1.2em;font-weight:700;margin-bottom:1em;padding-left:20px}div.quote{margin-top:10px;padding:12px;text-align:justify;font-style:italic;font-size:12px;font-family:sans-serif,arial,tahoma;border:1px solid}div#related{margin:0 3em 1em 0}div#related>div.tag-column{float:left;margin:0 2em 2em 0;max-width:12em;height:35em}div#related>div.tag-column>a{margin-right:1em}div.sidebar li{list-style-type:none;margin:0;word-wrap:break-word}a.original-file-changed#highres{font-weight:700}div.status-notice{border:2px solid;padding:1em;margin:1em}div.status-notice p{margin:0}div#tag-list{text-align:center;margin-bottom:2em}div#tag-list>a{padding-right:5px}div.tips{background:#d9e6f7;border-bottom:1px solid #c9def8;padding:5px 5px 5px 20px;font-size:11px}div#forum>table th:first-child{text-align:left}div#forum>table td:first-child{text-align:left}div.response-list>div.post>div.content>div.footer{margin-top:1em}div.mailbuttons{font-size:15px;color:#dadada;text-align:center}div.mailhint{padding:25px;font-weight:700}div.mailheader{margin-bottom:5px}div.mailbody{margin:5px;border-style:solid;border-width:1px;padding:15px}div.mailtitle{font-weight:lighter;font-size:large}div.mailtitle>div{font-weight:bolder;padding-left:25px}#navbar li.current-page a{font-weight:700}.tradio{position:absolute;clip:rect(0,0,0,0)}div#paginator a{border:1px solid}div#paginator span{margin:0 3px;padding:2px 6px}.manual-page-chooser>input[type=text]{width:4em}img.flagged,img.has-children,img.has-parent,img.pending,img.video{border:3px solid}img.preview{margin:auto}div#post-add p#scale{font-style:italic}div#post-popular>h3{text-align:center;margin-bottom:1em}div#note-container{position:absolute}div#note-container>div.note-body{border:1px solid;display:none;max-width:300px;min-width:140px;min-height:10px;position:absolute;padding:5px;cursor:pointer;overflow:auto}div#note-container>div.note-body>p.tn{font-size:.8em}div#note-container>div.note-box{position:absolute;border:1px solid;width:150px;height:150px;cursor:move}div#note-container>div.note-box>div.note-corner{width:7px;height:7px;position:absolute;bottom:0;right:0;cursor:se-resize}div#note-container>div.unsaved{border:1px solid}div#post-view>div#right-col>div#edit{margin-bottom:2em;padding:1em}span.blacklisted-image{display:none}table{margin-bottom:2em}table.form p{font-size:.8em;font-weight:400;margin:0;padding:0}table.highlightable{border-collapse:collapse;border-spacing:0}table.highlightable td{border:1px dotted;margin:0}table.highlightable th{margin:0}table td{padding:1px 4px;vertical-align:top}table th{font-weight:700;text-align:left;vertical-align:top;padding:.2em .5em;white-space:nowrap}.unchanged-tags{font-size:.8em}div.wiki>h2.title{color:#009}div#wiki-show>div#body{line-height:2em;width:50em;text-align:left;float:left}div#wiki-show>div#body ul{line-height:1.2em;margin:0 0 0 1em}div#wiki-show>div#body>ul{margin-bottom:1em}div#wiki-show>div#body>div#byline{font-style:italic}div#wiki-diff>div#body{font-family:monospace;font-size:1.2em;margin-top:1em}div#wiki-diff del{text-decoration:line-through}div#post-comments{max-width:680px;margin-top:10px}div#post-comments div#comment-list>div{margin-bottom:1em}div#post-comments div#comment-list>div>div.col2{margin-top:10px}div#post-comments div#comment-list>div>div.col2>div.header{margin-bottom:1em}div#post-comments div#comment-list>div>div.col2>div.header>div>span.info{margin-right:1em}div#post-comments div#comment-list>div>div.col2>div.header>div.tags>span{margin:0 .5em 0 0}div#comments div#comment-list>div.post{float:left;clear:left;margin-bottom:3em}div#comments div#comment-list>div.post>div.col1{float:left;clear:left}div#comments div#comment-list>div.post>div.col2{float:left;width:50em}div#comments div#comment-list>div.post>div.col2>div.header{margin-bottom:1em}div#comments div#comment-list>div.post>div.col2>div.header>div>span.info{margin-right:1em}div#comments div#comment-list>div.post>div.col2>div.header>div.tags>span{margin:0 .5em 0 0}html{min-height:100%}body{font-size:80%;padding:0;margin:0}div#content{padding:0 20px 30px}div.sidebar{margin-right:1em;overflow:visible;max-width:200px}div.sidebarRight{padding-left:20px}div.verticalFlexWithMargins{display:flex;flex-direction:column;padding-top:5px;padding-bottom:5px}div.verticalFlexWithMargins>*{margin-top:5px;margin-bottom:5px}div.horizontalFlexWithMargins{display:flex;flex-direction:row;padding-left:5px;padding-right:5px}div.horizontalFlexWithMargins>*{margin-left:5px;margin-right:5px}li{margin-right:.5em}div.page,div.help{width:40em}input{padding:0 .3em}div.response-list{display:flex;flex-direction:column}div.response-list>div.post{margin-bottom:2em}div.response-list>div.post>div.author{float:left;width:15em;padding-right:1em;overflow-x:hidden}div.response-list>div.post>div.author>h6{font-size:1.3em}div.response-list>div.post>div.content{float:left;width:30em;padding:0 0 0 10px;margin:0}div.mailmessage{width:750px}div.mailbuttons :not(:last-child):after{content:\"  |\"}label[for=nav-trigger],.nav-trigger{display:none}div#header{margin-bottom:1em}div#header ul#subnavbar{padding:5px 20px 5px 15px;margin:0 0 1em}div#header ul#navbar{padding:5px 20px 3px 10px;margin:0}div#header ul#navbar li{font-size:120%;padding:2px 10px 3px;margin:0}div#header ul#navbar li.current-page a{font-weight:700}div#header ul#subnavbar li{padding:0 5px}div#header #site-title{padding:10px 20px 1px}div#paginator{display:block;padding:2em 0 1em;font-size:1em;text-align:center;clear:both}div#paginator a{margin:0 3px;padding:2px 6px}div#post-view,div#post-list,div.flexi{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start}div#upload-form table,div#edit-form table{width:850px}.thumb{display:inline-block;text-align:center;vertical-align:top;margin:0 10px 20px 0;width:200px;height:200px}.thumb img{max-width:100%;max-height:100%;vertical-align:middle}div.tag-search{padding-bottom:5px;width:150px}div.tag-search small{display:none}div.tag-search input[type=text]{width:100%;padding:0;clear:both;box-sizing:border-box}div.tag-search input[type=submit]{box-sizing:border-box;width:100%;border:1px solid;margin-top:3px}div.tag-search form br{display:none}div.tag-search{margin:0}table.form th{white-space:normal;padding-right:1em;text-align:right}table.form{width:70em}*{--c-bg: #303a30;--c-bg-alt: #293129;--c-bg-deep: #303030;--c-bg-highlight: #505a50;--c-bg-overlay: #242424e6;--c-text: #c0c0c0;--c-text-soft: #878787;--c-link: #b0e0b0;--c-link-soft: #93b393;--c-link-artist: #f0a0a0;--c-link-character: #f0f0a0;--c-link-copyright: #f0a0f0;--c-link-metadata: #90d9ed;--ff-narrow: \"tahoma\", \"trebuchet ms\", \"arial\", sans-serif}body{color:var(--c-text);background-color:var(--c-bg);background-image:none}a.last-page{color:#666}a.spoiler{color:#000;background:#000}a.spoiler:hover{color:#fff}.blacklisted-tags-disabled{color:#aaa}dt.bad{color:red}h2.wiki-title{color:#003dd8}:where(input[type=text],input[type=password],input[type=email],input[type=date],textarea,select){border-width:1px;border-style:solid;border-color:var(--c-bg-highlight);background-color:var(--c-bg-deep);color:var(--c-text)}input[type=submit],input[type=button],button{border-width:1px;border-style:solid;font-weight:700;color:var(--c-bg);border-color:var(--c-bg-highlight);background-color:var(--c-link-soft)}input[type=submit][disabled],input[type=button][disabled],button[disabled]{filter:saturate(0%) brightness(70%)}input[type=submit]:not([disabled]):active,input[type=button]:not([disabled]):active,button:not([disabled]):active{filter:invert(100%) hue-rotate(180deg)}input[type=submit][name=commit][style]{border-color:var(--c-bg-highlight);background-color:var(--c-link-soft)}input[type=text]:focus,input[type=password]:focus,textarea:focus{background-color:var(--c-bg-deep)}span.author,span.date{color:#aaa}span.locked-topic{color:#666}span.post-count{color:#aaa}span.spoiler{color:#000;background:#000}span.spoiler:hover{color:#fff}strong.divider{color:gray}div.auto_complete{background:#fff}div.auto_complete ul{border-color:#888}div.auto_complete ul li.selected{background-color:#ffb}div.auto_complete ul strong.highlight{color:#800}div.blocked{border-color:red;background:#fcc;color:red}div#footer{color:#ccc}div#footer>.footer-disabled{color:#777}div#footer>#label{color:#777}div.help div.code{border-color:green;background:#eee}div.help h4{color:unset}div.mail .received{color:#060}div.mail .sent{color:#600}div#notice{color:red}div.quote{background-color:var(--c-bg-highlight);border-color:var(--c-text)}div.status-notice,div.has-mail{border-width:1px;border-color:var(--c-bg-highlight);background-color:var(--c-bg-deep)}#post-list>div.status-notice,#post-view>div.status-notice{width:100%}.status-notice+br,.status-notice+br+br{display:none}div.tips{border-bottom-color:#c9def8}a.original-file-changed#highres{color:#0030fa}div#user-record>table>tbody>tr.positive-record{background:#efe}div#user-record>table>tbody>tr.negative-record{background:#fee}.blacklisted-image{filter:invert(100%) contrast(80%) brightness(145%)}img[src$=\"rule34.xxx/images/r34chibi.png\"],img[src$=\"rule34.xxx/icame.png\"],img[src$=\"rule34.xxx//icame.png\"]{opacity:.5}form[action=\"index.php?page=search\"]+small{display:none}div#wiki-show>div#body>div#byline{color:#666}div#wiki-diff del{background-color:#f88}div#wiki-diff ins{background-color:#8f8}.obsolete-tag-change{color:#000}.tag-type-artist>a,a.tag-type-artist,.tag-type-artist>a:hover,a.tag-type-artist:hover,.tag-type-artist{color:var(--c-link-artist)}.tag-type-character>a,a.tag-type-character,.tag-type-character>a:hover,a.tag-type-character:hover,.tag-type-character{color:var(--c-link-character)}.tag-type-copyright>a,a.tag-type-copyright,.tag-type-copyright>a:hover,a.tag-type-copyright:hover,.tag-type-copyright{color:var(--c-link-copyright)}.tag-type-metadata>a,a.tag-type-metadata,.tag-type-metadata>a:hover,a.tag-type-metadata:hover,.tag-type-metadata{color:var(--c-link-metadata)}.tag-count{color:var(--c-text-soft)}.added-tags{color:#0c0}.removed-tags{color:red}#tag-sidebar>li[class*=tag-type-]>span:not([class]){font-size:xx-small;font-family:var(--ff-narrow);color:var(--c-text-soft)}#tag-sidebar>li[class*=tag-type-]>span:not([class])[style]{color:var(--c-text-soft)}tr.tableheader,thead tr{background-color:var(--c-bg-highlight)}tr.tableheader,thead tr,table.highlightable>tbody>tr{background-image:unset}table.form th{color:unset}table.highlightable>tbody>tr:not(.tableheader):hover{background-color:unset}table.highlightable th{color:#fff}table.highlightable td{border-color:#eee}table tr.good{background:#e6ffe6}table tr.selected{background:#aee}table tr.highlight{background:#ffd}table tr.pending-tag{background-color:var(--c-bg-alt)}img.flagged{border-color:red}img.has-children{border-color:#0f0}img.has-parent{border-color:#cc0}img.pending,img.video{border-color:#00f}div#post-add p#scale{color:#999}div#note-container>div.note-body,div#note-container>#edit-box{background:var(--c-bg-overlay);border-color:#000}div#note-container>div.note-body>p.tn{color:var(--c-text)}tn{color:gray}div#note-container>div.note-box{border-color:#000;background:#ffe}div#note-container>div.note-box>div.note-corner{background:#000}div#note-container>div.unsaved{background:#fff;border-color:red}div#note-container>div.unsaved>div.note-corner{background:red}div.response-list>div.post>div.content>div.footer{color:#ccc}div.response-list>div.post>div.content>div.footer a{color:var(--c-link)}div#paginator a:hover{background-color:var(--c-link-soft);color:var(--c-link)}#navbar li.current-page a{color:unset}.tlabel{background-color:var(--c-link-soft);outline:.2rem solid var(--c-link-soft)}body{font-family:verdana,sans-serif;background:var(--r-bg);color:var(--r-text);font-size:80%;overflow-x:hidden}:where(button){all:unset;cursor:pointer}[disabled]:where(button){cursor:unset}div#content{padding:1rem}:scope:focus,:scope:active{outline:inherit;border:inherit}#rr-header{position:sticky;top:0;z-index:1000;margin:0!important}*,*:before,*:after{box-sizing:border-box}*{margin:0}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{overflow-wrap:break-word}:where(input:focus,input:active){outline:unset;border:unset}\n";
                    el.type = "text/css";
                    document.head.appendChild(el);
                })();
