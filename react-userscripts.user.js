// ==UserScript==
// @name        Rule34 Redux V2
// @run-at      document-body
// @description A redesign of r34 with subscription and infinte scroll
// @namespace   https://github.com/mister-milky/r34-redux
// @updateURL   https://github.com/mister-milky/r34-redux/blob/main/react-userscripts.user.js
// @version     1.0.1
// @match       *://rule34.xxx/*
// @icon        https://www.google.com/s2/favicons?sz=64&domain=rule34.xxx
// @grant       xmlHttpRequest
// @grant       GM_addStyle
// ==/UserScript==

var In=(L,U,Y)=>{if(!U.has(L))throw TypeError("Cannot "+Y)};var d=(L,U,Y)=>(In(L,U,"read from private field"),Y?Y.call(L):U.get(L)),P=(L,U,Y)=>{if(U.has(L))throw TypeError("Cannot add the same private member more than once");U instanceof WeakSet?U.add(L):U.set(L,Y)},S=(L,U,Y,Re)=>(In(L,U,"write to private field"),Re?Re.call(L,Y):U.set(L,Y),Y);var Pr=(L,U,Y,Re)=>({set _(Ue){S(L,U,Ue,Y)},get _(){return d(L,U,Re)}}),N=(L,U,Y)=>(In(L,U,"access private method"),Y);(function(L){typeof define=="function"&&define.amd?define(L):L()})(function(){var We,Ne,ft,no,pt,Ae,mt,io,Ve,so,gt,yt,ue,Ke,X,Qt,Ge,fe,Oe,oo,we,ao,xe,ee,Ye,Se,je,co,Te,pe,Wt,lo,z,Ie,De,_t,vt,Me,bt,wt,uo,ie,$,Vt,te,Ze,xt,Le,Ce,Kt,St,Ct,Je,Xe,Fe,kt,et,rr,Gt,Dn,Yt,Mn,Zt,Ln,Jt,Fn,Xt,jn,er,Un,tr,Hn,Cr,fo,ho;"use strict";const L=(e,t=document.body)=>t.querySelector(e),U=(e,t=document.body)=>Array.from(t.querySelectorAll(e)),Y=async(e,{parent:t=document.body,maxWait:r=2e3}={})=>{const n=performance.now();for(;performance.now()-n<r;){await mo(1);const i=L(e,t);if(i)return i}throw new Error(`Could not find ${e}`)},Re=(e,t=document.body)=>U(e,t).map(r=>r.remove()),Ue=e=>{try{return e()}catch(t){console.error(t)}};function po(e){const t=document.createElement("style");return t.innerHTML=e,document.head.appendChild(t),t}const mo=e=>new Promise(t=>setTimeout(t,e)),tt=(e,t=document.location.href)=>go(t).get(e),go=e=>{if(e.startsWith("?"))return new URLSearchParams(e.slice(1));if(e.startsWith("http")){const r=new URL(e);return new URLSearchParams(r.search)}const t=new URL("https://example.com"+e.split("?").slice(1).join(""));return new URLSearchParams(t.search)};function yo(e){return Object.entries(e)}var ke;function _o(e){return{lang:(e==null?void 0:e.lang)??(ke==null?void 0:ke.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(ke==null?void 0:ke.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(ke==null?void 0:ke.abortPipeEarly)}}var Er;function vo(e){return Er==null?void 0:Er.get(e)}var Tr;function bo(e){return Tr==null?void 0:Tr.get(e)}var Or;function wo(e,t){var r;return(r=Or==null?void 0:Or.get(e))==null?void 0:r.get(t)}function qn(e){var r,n;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((n=(r=Object.getPrototypeOf(e))==null?void 0:r.constructor)==null?void 0:n.name))??"null":t}function rt(e,t,r,n,i){const s=i&&"input"in i?i.input:r.value,a=(i==null?void 0:i.expected)??e.expects??null,c=(i==null?void 0:i.received)??qn(s),l={kind:e.kind,type:e.type,input:s,expected:a,received:c,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${c}`,requirement:e.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},h=e.kind==="schema",f=(i==null?void 0:i.message)??e.message??wo(e.reference,l.lang)??(h?bo(l.lang):null)??n.message??vo(l.lang);f&&(l.message=typeof f=="function"?f(l):f),h&&(r.typed=!1),r.issues?r.issues.push(l):r.issues=[l]}function xo(e,t){const r=[...new Set(e)];return r.length>1?`(${r.join(` ${t} `)})`:r[0]??"never"}function So(e,t,r){return typeof e.default=="function"?e.default(t,r):e.default}function zn(e,t){return{kind:"schema",type:"array",reference:zn,expects:"Array",async:!1,item:e,message:t,_run(r,n){var s;const i=r.value;if(Array.isArray(i)){r.typed=!0,r.value=[];for(let a=0;a<i.length;a++){const c=i[a],l=this.item._run({typed:!1,value:c},n);if(l.issues){const h={type:"array",origin:"value",input:i,key:a,value:c};for(const f of l.issues)f.path?f.path.unshift(h):f.path=[h],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),r.value.push(l.value)}}else rt(this,"type",r,n);return r}}}function Bn(e){return{kind:"schema",type:"boolean",reference:Bn,expects:"boolean",async:!1,message:e,_run(t,r){return typeof t.value=="boolean"?t.typed=!0:rt(this,"type",t,r),t}}}function Qn(e,t){const r=Object.entries(e).filter(([n])=>isNaN(+n)).map(([,n])=>n);return{kind:"schema",type:"enum",reference:Qn,expects:xo(r.map(qn),"|"),async:!1,enum:e,options:r,message:t,_run(n,i){return this.options.includes(n.value)?n.typed=!0:rt(this,"type",n,i),n}}}function Wn(e){return{kind:"schema",type:"number",reference:Wn,expects:"number",async:!1,message:e,_run(t,r){return typeof t.value=="number"&&!isNaN(t.value)?t.typed=!0:rt(this,"type",t,r),t}}}function Rr(e,t){return{kind:"schema",type:"object",reference:Rr,expects:"Object",async:!1,entries:e,message:t,_run(r,n){var s;const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const a in this.entries){const c=i[a],l=this.entries[a]._run({typed:!1,value:c},n);if(l.issues){const h={type:"object",origin:"value",input:i,key:a,value:c};for(const f of l.issues)f.path?f.path.unshift(h):f.path=[h],(s=r.issues)==null||s.push(f);if(r.issues||(r.issues=l.issues),n.abortEarly){r.typed=!1;break}}l.typed||(r.typed=!1),(l.value!==void 0||a in i)&&(r.value[a]=l.value)}}else rt(this,"type",r,n);return r}}}function Pt(e,...t){const r={kind:"schema",type:"optional",reference:Pt,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,_run(n,i){return n.value===void 0&&("default"in this&&(n.value=So(this,n,i)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,i)}};return 0 in t&&(r.default=t[0]),r}function Q(e){return{kind:"schema",type:"string",reference:Q,expects:"string",async:!1,message:e,_run(t,r){return typeof t.value=="string"?t.typed=!0:rt(this,"type",t,r),t}}}function Co(e,t,r){const n=e._run({typed:!1,value:t},_o(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}async function $r({search:e,page:t=0,limit:r=64}){return await Vn({limit:r,page:t,params:{tags:e}})}async function ko(e){const{posts:t}=await Vn({params:{id:e},limit:1});return t.length===1?t[0]:null}async function Vn({limit:e=64,page:t=0,params:r={}}){const n=new URLSearchParams(r);n.set("limit",e.toString()),n.set("pid",t.toString());const s=await(await fetch(`https://api.rule34.xxx/index.php?page=dapi&s=post&q=index&${n.toString()}`)).text(),c=new DOMParser().parseFromString(s,"text/xml").querySelector("posts");if(!c)return{posts:[],remaining:0,total:0};const l=c.attributes.getNamedItem("count"),h=parseInt((l==null?void 0:l.nodeValue)??"0"),f=h-(t+1)*64;return{posts:Array.from(c.children).map(Po).filter(p=>!!p),total:h,remaining:f}}const Kn=(e,t)=>new URL(e).pathname.endsWith(t);function Po(e){const t=Array.from(e.attributes).map(a=>[a.nodeName,a.nodeValue]),r=Object.fromEntries(t),n=Co(Eo,r);if(!n.success)return;const i=n.output,s=Kn(i.file_url,"mp4")||Kn(i.file_url,"webm");return{id:i.id,created_at:new Date(i.created_at),type:s?"video":"image",score:parseInt(i.score),source:i.source,tags:i.tags.split(" ").filter(a=>a!==""),full:{url:Nr(i.file_url),height:parseInt(i.height),width:parseInt(i.width)},preview:{url:Nr(i.sample_url),width:parseInt(i.sample_width),height:parseInt(i.sample_height)},thumbnail:{url:Nr(i.preview_url),width:parseInt(i.preview_width),height:parseInt(i.preview_height)}}}const Nr=e=>{let t=new URL(e);return t.host="rule34.xxx",t.toString()},Eo=Rr({id:Q(),created_at:Q(),score:Q(),rating:Q(),tags:Q(),md5:Q(),creator_id:Q(),source:Q(),file_url:Q(),width:Q(),height:Q(),sample_url:Q(),sample_width:Q(),sample_height:Q(),preview_url:Q(),preview_width:Q(),preview_height:Q()});var To=!1;function Oo(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Ro(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $o=function(){function e(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!To:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Ro(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Oo(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var i;return(i=n.parentNode)==null?void 0:i.removeChild(n)}),this.tags=[],this.ctr=0},e}(),Z="-ms-",nr="-moz-",I="-webkit-",Gn="comm",Ar="rule",Ir="decl",No="@import",Yn="@keyframes",Ao="@layer",Io=Math.abs,ir=String.fromCharCode,Do=Object.assign;function Mo(e,t){return V(e,0)^45?(((t<<2^V(e,0))<<2^V(e,1))<<2^V(e,2))<<2^V(e,3):0}function Zn(e){return e.trim()}function Lo(e,t){return(e=t.exec(e))?e[0]:e}function D(e,t,r){return e.replace(t,r)}function Dr(e,t){return e.indexOf(t)}function V(e,t){return e.charCodeAt(t)|0}function Et(e,t,r){return e.slice(t,r)}function ge(e){return e.length}function Mr(e){return e.length}function sr(e,t){return t.push(e),e}function Fo(e,t){return e.map(t).join("")}var or=1,nt=1,Jn=0,re=0,B=0,it="";function ar(e,t,r,n,i,s,a){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:or,column:nt,length:a,return:""}}function Tt(e,t){return Do(ar("",null,null,"",null,null,0),e,{length:-e.length},t)}function jo(){return B}function Uo(){return B=re>0?V(it,--re):0,nt--,B===10&&(nt=1,or--),B}function se(){return B=re<Jn?V(it,re++):0,nt++,B===10&&(nt=1,or++),B}function ye(){return V(it,re)}function cr(){return re}function Ot(e,t){return Et(it,e,t)}function Rt(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Xn(e){return or=nt=1,Jn=ge(it=e),re=0,[]}function ei(e){return it="",e}function lr(e){return Zn(Ot(re-1,Lr(e===91?e+2:e===40?e+1:e)))}function Ho(e){for(;(B=ye())&&B<33;)se();return Rt(e)>2||Rt(B)>3?"":" "}function qo(e,t){for(;--t&&se()&&!(B<48||B>102||B>57&&B<65||B>70&&B<97););return Ot(e,cr()+(t<6&&ye()==32&&se()==32))}function Lr(e){for(;se();)switch(B){case e:return re;case 34:case 39:e!==34&&e!==39&&Lr(B);break;case 40:e===41&&Lr(e);break;case 92:se();break}return re}function zo(e,t){for(;se()&&e+B!==47+10;)if(e+B===42+42&&ye()===47)break;return"/*"+Ot(t,re-1)+"*"+ir(e===47?e:se())}function Bo(e){for(;!Rt(ye());)se();return Ot(e,re)}function Qo(e){return ei(ur("",null,null,null,[""],e=Xn(e),0,[0],e))}function ur(e,t,r,n,i,s,a,c,l){for(var h=0,f=0,u=a,v=0,p=0,g=0,m=1,_=1,w=1,b=0,x="",k=i,y=s,O=n,T=x;_;)switch(g=b,b=se()){case 40:if(g!=108&&V(T,u-1)==58){Dr(T+=D(lr(b),"&","&\f"),"&\f")!=-1&&(w=-1);break}case 34:case 39:case 91:T+=lr(b);break;case 9:case 10:case 13:case 32:T+=Ho(g);break;case 92:T+=qo(cr()-1,7);continue;case 47:switch(ye()){case 42:case 47:sr(Wo(zo(se(),cr()),t,r),l);break;default:T+="/"}break;case 123*m:c[h++]=ge(T)*w;case 125*m:case 59:case 0:switch(b){case 0:case 125:_=0;case 59+f:w==-1&&(T=D(T,/\f/g,"")),p>0&&ge(T)-u&&sr(p>32?ri(T+";",n,r,u-1):ri(D(T," ","")+";",n,r,u-2),l);break;case 59:T+=";";default:if(sr(O=ti(T,t,r,h,f,i,c,x,k=[],y=[],u),s),b===123)if(f===0)ur(T,t,O,O,k,s,u,c,y);else switch(v===99&&V(T,3)===110?100:v){case 100:case 108:case 109:case 115:ur(e,O,O,n&&sr(ti(e,O,O,0,0,i,c,x,i,k=[],u),y),i,y,u,c,n?k:y);break;default:ur(T,O,O,O,[""],y,0,c,y)}}h=f=p=0,m=w=1,x=T="",u=a;break;case 58:u=1+ge(T),p=g;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&Uo()==125)continue}switch(T+=ir(b),b*m){case 38:w=f>0?1:(T+="\f",-1);break;case 44:c[h++]=(ge(T)-1)*w,w=1;break;case 64:ye()===45&&(T+=lr(se())),v=ye(),f=u=ge(x=T+=Bo(cr())),b++;break;case 45:g===45&&ge(T)==2&&(m=0)}}return s}function ti(e,t,r,n,i,s,a,c,l,h,f){for(var u=i-1,v=i===0?s:[""],p=Mr(v),g=0,m=0,_=0;g<n;++g)for(var w=0,b=Et(e,u+1,u=Io(m=a[g])),x=e;w<p;++w)(x=Zn(m>0?v[w]+" "+b:D(b,/&\f/g,v[w])))&&(l[_++]=x);return ar(e,t,r,i===0?Ar:c,l,h,f)}function Wo(e,t,r){return ar(e,t,r,Gn,ir(jo()),Et(e,2,-2),0)}function ri(e,t,r,n){return ar(e,t,r,Ir,Et(e,0,n),Et(e,n+1,-1),n)}function st(e,t){for(var r="",n=Mr(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function Vo(e,t,r,n){switch(e.type){case Ao:if(e.children.length)break;case No:case Ir:return e.return=e.return||e.value;case Gn:return"";case Yn:return e.return=e.value+"{"+st(e.children,n)+"}";case Ar:e.value=e.props.join(",")}return ge(r=st(e.children,n))?e.return=e.value+"{"+r+"}":""}function Ko(e){var t=Mr(e);return function(r,n,i,s){for(var a="",c=0;c<t;c++)a+=e[c](r,n,i,s)||"";return a}}function Go(e){return function(t){t.root||(t=t.return)&&e(t)}}function Yo(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Zo=function(t,r,n){for(var i=0,s=0;i=s,s=ye(),i===38&&s===12&&(r[n]=1),!Rt(s);)se();return Ot(t,re)},Jo=function(t,r){var n=-1,i=44;do switch(Rt(i)){case 0:i===38&&ye()===12&&(r[n]=1),t[n]+=Zo(re-1,r,n);break;case 2:t[n]+=lr(i);break;case 4:if(i===44){t[++n]=ye()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=ir(i)}while(i=se());return t},Xo=function(t,r){return ei(Jo(Xn(t),r))},ni=new WeakMap,ea=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,i=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!ni.get(n))&&!i){ni.set(t,!0);for(var s=[],a=Xo(r,s),c=n.props,l=0,h=0;l<a.length;l++)for(var f=0;f<c.length;f++,h++)t.props[h]=s[l]?a[l].replace(/&\f/g,c[f]):c[f]+" "+a[l]}}},ta=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function ii(e,t){switch(Mo(e,t)){case 5103:return I+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return I+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return I+e+nr+e+Z+e+e;case 6828:case 4268:return I+e+Z+e+e;case 6165:return I+e+Z+"flex-"+e+e;case 5187:return I+e+D(e,/(\w+).+(:[^]+)/,I+"box-$1$2"+Z+"flex-$1$2")+e;case 5443:return I+e+Z+"flex-item-"+D(e,/flex-|-self/,"")+e;case 4675:return I+e+Z+"flex-line-pack"+D(e,/align-content|flex-|-self/,"")+e;case 5548:return I+e+Z+D(e,"shrink","negative")+e;case 5292:return I+e+Z+D(e,"basis","preferred-size")+e;case 6060:return I+"box-"+D(e,"-grow","")+I+e+Z+D(e,"grow","positive")+e;case 4554:return I+D(e,/([^-])(transform)/g,"$1"+I+"$2")+e;case 6187:return D(D(D(e,/(zoom-|grab)/,I+"$1"),/(image-set)/,I+"$1"),e,"")+e;case 5495:case 3959:return D(e,/(image-set\([^]*)/,I+"$1$`$1");case 4968:return D(D(e,/(.+:)(flex-)?(.*)/,I+"box-pack:$3"+Z+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+I+e+e;case 4095:case 3583:case 4068:case 2532:return D(e,/(.+)-inline(.+)/,I+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ge(e)-1-t>6)switch(V(e,t+1)){case 109:if(V(e,t+4)!==45)break;case 102:return D(e,/(.+:)(.+)-([^]+)/,"$1"+I+"$2-$3$1"+nr+(V(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Dr(e,"stretch")?ii(D(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(V(e,t+1)!==115)break;case 6444:switch(V(e,ge(e)-3-(~Dr(e,"!important")&&10))){case 107:return D(e,":",":"+I)+e;case 101:return D(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+I+(V(e,14)===45?"inline-":"")+"box$3$1"+I+"$2$3$1"+Z+"$2box$3")+e}break;case 5936:switch(V(e,t+11)){case 114:return I+e+Z+D(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return I+e+Z+D(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return I+e+Z+D(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return I+e+Z+e+e}return e}var ra=function(t,r,n,i){if(t.length>-1&&!t.return)switch(t.type){case Ir:t.return=ii(t.value,t.length);break;case Yn:return st([Tt(t,{value:D(t.value,"@","@"+I)})],i);case Ar:if(t.length)return Fo(t.props,function(s){switch(Lo(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return st([Tt(t,{props:[D(s,/:(read-\w+)/,":"+nr+"$1")]})],i);case"::placeholder":return st([Tt(t,{props:[D(s,/:(plac\w+)/,":"+I+"input-$1")]}),Tt(t,{props:[D(s,/:(plac\w+)/,":"+nr+"$1")]}),Tt(t,{props:[D(s,/:(plac\w+)/,Z+"input-$1")]})],i)}return""})}},na=[ra],ia=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(m){var _=m.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=t.stylisPlugins||na,s={},a,c=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(m){for(var _=m.getAttribute("data-emotion").split(" "),w=1;w<_.length;w++)s[_[w]]=!0;c.push(m)});var l,h=[ea,ta];{var f,u=[Vo,Go(function(m){f.insert(m)})],v=Ko(h.concat(i,u)),p=function(_){return st(Qo(_),v)};l=function(_,w,b,x){f=b,p(_?_+"{"+w.styles+"}":w.styles),x&&(g.inserted[w.name]=!0)}}var g={key:r,sheet:new $o({key:r,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:s,registered:{},insert:l};return g.sheet.hydrate(c),g};function sa(e){for(var t=0,r,n=0,i=e.length;i>=4;++n,i-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var oa={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},aa=!1,ca=/[A-Z]|^ms/g,la=/_EMO_([^_]+?)_([^]*?)_EMO_/g,si=function(t){return t.charCodeAt(1)===45},oi=function(t){return t!=null&&typeof t!="boolean"},Fr=Yo(function(e){return si(e)?e:e.replace(ca,"-$&").toLowerCase()}),ai=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(la,function(n,i,s){return _e={name:i,styles:s,next:_e},i})}return oa[t]!==1&&!si(t)&&typeof r=="number"&&r!==0?r+"px":r},ua="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function $t(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var i=r;if(i.anim===1)return _e={name:i.name,styles:i.styles,next:_e},i.name;var s=r;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)_e={name:a.name,styles:a.styles,next:_e},a=a.next;var c=s.styles+";";return c}return ha(e,t,r)}case"function":{if(e!==void 0){var l=_e,h=r(e);return _e=l,$t(e,t,h)}break}}var f=r;if(t==null)return f;var u=t[f];return u!==void 0?u:f}function ha(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=$t(e,t,r[i])+";";else for(var s in r){var a=r[s];if(typeof a!="object"){var c=a;t!=null&&t[c]!==void 0?n+=s+"{"+t[c]+"}":oi(c)&&(n+=Fr(s)+":"+ai(s,c)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&aa)throw new Error(ua);if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var l=0;l<a.length;l++)oi(a[l])&&(n+=Fr(s)+":"+ai(s,a[l])+";");else{var h=$t(e,t,a);switch(s){case"animation":case"animationName":{n+=Fr(s)+":"+h+";";break}default:n+=s+"{"+h+"}"}}}}return n}var ci=/label:\s*([^\s;\n{]+)\s*(;|$)/g,_e;function jr(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,i="";_e=void 0;var s=e[0];if(s==null||s.raw===void 0)n=!1,i+=$t(r,t,s);else{var a=s;i+=a[0]}for(var c=1;c<e.length;c++)if(i+=$t(r,t,e[c]),n){var l=s;i+=l[c]}ci.lastIndex=0;for(var h="",f;(f=ci.exec(i))!==null;)h+="-"+f[1];var u=sa(i)+h;return{name:u,styles:i,next:_e}}var da=!0;function li(e,t,r){var n="";return r.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):n+=i+" "}),n}var fa=function(t,r,n){var i=t.key+"-"+r.name;(n===!1||da===!1)&&t.registered[i]===void 0&&(t.registered[i]=r.styles)},pa=function(t,r,n){fa(t,r,n);var i=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var s=r;do t.insert(r===s?"."+i:"",s,t.sheet,!0),s=s.next;while(s!==void 0)}};function ui(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function hi(e,t,r){var n=[],i=li(e,n,r);return n.length<2?r:i+t(n)}var ma=function(t){var r=ia(t);r.sheet.speedy=function(c){this.isSpeedy=c},r.compat=!0;var n=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];var u=jr(h,r.registered,void 0);return pa(r,u,!1),r.key+"-"+u.name},i=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];var u=jr(h,r.registered),v="animation-"+u.name;return ui(r,{name:u.name,styles:"@keyframes "+v+"{"+u.styles+"}"}),v},s=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];var u=jr(h,r.registered);ui(r,u)},a=function(){for(var l=arguments.length,h=new Array(l),f=0;f<l;f++)h[f]=arguments[f];return hi(r.registered,n,ga(h))};return{css:n,cx:a,injectGlobal:s,keyframes:i,hydrate:function(l){l.forEach(function(h){r.inserted[h]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:li.bind(null,r.registered),merge:hi.bind(null,r.registered,n)}},ga=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(i!=null){var s=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))s=e(i);else{s="";for(var a in i)i[a]&&a&&(s&&(s+=" "),s+=a)}break}default:s=i}s&&(r&&(r+=" "),r+=s)}}return r},ya=ma({key:"css"}),C=ya.css,Nt,R,di,He,fi,pi,Ur,Hr,qr,zr,mi,At={},gi=[],_a=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,hr=Array.isArray;function Pe(e,t){for(var r in t)e[r]=t[r];return e}function yi(e){var t=e.parentNode;t&&t.removeChild(e)}function he(e,t,r){var n,i,s,a={};for(s in t)s=="key"?n=t[s]:s=="ref"?i=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?Nt.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)a[s]===void 0&&(a[s]=e.defaultProps[s]);return It(e,a,n,i,null)}function It(e,t,r,n,i){var s={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++di,__i:-1,__u:0};return i==null&&R.vnode!=null&&R.vnode(s),s}function va(){return{current:null}}function ae(e){return e.children}function ce(e,t){this.props=e,this.context=t}function qe(e,t){if(t==null)return e.__?qe(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?qe(e):null}function _i(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return _i(e)}}function Br(e){(!e.__d&&(e.__d=!0)&&He.push(e)&&!dr.__r++||fi!==R.debounceRendering)&&((fi=R.debounceRendering)||pi)(dr)}function dr(){var e,t,r,n,i,s,a,c;for(He.sort(Ur);e=He.shift();)e.__d&&(t=He.length,n=void 0,s=(i=(r=e).__v).__e,a=[],c=[],r.__P&&((n=Pe({},i)).__v=i.__v+1,R.vnode&&R.vnode(n),Qr(r.__P,n,i,r.__n,r.__P.namespaceURI,32&i.__u?[s]:null,a,s??qe(i),!!(32&i.__u),c),n.__v=i.__v,n.__.__k[n.__i]=n,Si(a,n,c),n.__e!=s&&_i(n)),He.length>t&&He.sort(Ur));dr.__r=0}function vi(e,t,r,n,i,s,a,c,l,h,f){var u,v,p,g,m,_=n&&n.__k||gi,w=t.length;for(r.__d=l,ba(r,t,_),l=r.__d,u=0;u<w;u++)(p=r.__k[u])!=null&&typeof p!="boolean"&&typeof p!="function"&&(v=p.__i===-1?At:_[p.__i]||At,p.__i=u,Qr(e,p,v,i,s,a,c,l,h,f),g=p.__e,p.ref&&v.ref!=p.ref&&(v.ref&&Wr(v.ref,null,p),f.push(p.ref,p.__c||g,p)),m==null&&g!=null&&(m=g),65536&p.__u||v.__k===p.__k?l=bi(p,l,e):typeof p.type=="function"&&p.__d!==void 0?l=p.__d:g&&(l=g.nextSibling),p.__d=void 0,p.__u&=-196609);r.__d=l,r.__e=m}function ba(e,t,r){var n,i,s,a,c,l=t.length,h=r.length,f=h,u=0;for(e.__k=[],n=0;n<l;n++)a=n+u,(i=e.__k[n]=(i=t[n])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?It(null,i,null,null,null):hr(i)?It(ae,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?It(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=e,i.__b=e.__b+1,c=wa(i,r,a,f),i.__i=c,s=null,c!==-1&&(f--,(s=r[c])&&(s.__u|=131072)),s==null||s.__v===null?(c==-1&&u--,typeof i.type!="function"&&(i.__u|=65536)):c!==a&&(c==a-1?u--:c==a+1?u++:c>a?f>l-a?u+=c-a:u--:c<a&&(c==a-u?u-=c-a:u++),c!==n+u&&(i.__u|=65536))):(s=r[a])&&s.key==null&&s.__e&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=qe(s)),Vr(s,s,!1),r[a]=null,f--);if(f)for(n=0;n<h;n++)(s=r[n])!=null&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=qe(s)),Vr(s,s))}function bi(e,t,r){var n,i;if(typeof e.type=="function"){for(n=e.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=e,t=bi(n[i],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=qe(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Ee(e,t){return t=t||[],e==null||typeof e=="boolean"||(hr(e)?e.some(function(r){Ee(r,t)}):t.push(e)),t}function wa(e,t,r,n){var i=e.key,s=e.type,a=r-1,c=r+1,l=t[r];if(l===null||l&&i==l.key&&s===l.type&&!(131072&l.__u))return r;if(n>(l!=null&&!(131072&l.__u)?1:0))for(;a>=0||c<t.length;){if(a>=0){if((l=t[a])&&!(131072&l.__u)&&i==l.key&&s===l.type)return a;a--}if(c<t.length){if((l=t[c])&&!(131072&l.__u)&&i==l.key&&s===l.type)return c;c++}}return-1}function wi(e,t,r){t[0]==="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||_a.test(t)?r:r+"px"}function fr(e,t,r,n,i){var s;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||wi(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||wi(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")s=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=r,r?n?r.u=n.u:(r.u=Hr,e.addEventListener(t,s?zr:qr,s)):e.removeEventListener(t,s?zr:qr,s);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function xi(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=Hr++;else if(t.t<r.u)return;return r(R.event?R.event(t):t)}}}function Qr(e,t,r,n,i,s,a,c,l,h){var f,u,v,p,g,m,_,w,b,x,k,y,O,T,A,M,W=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),s=[c=t.__e=r.__e]),(f=R.__b)&&f(t);e:if(typeof W=="function")try{if(w=t.props,b="prototype"in W&&W.prototype.render,x=(f=W.contextType)&&n[f.__c],k=f?x?x.props.value:f.__:n,r.__c?_=(u=t.__c=r.__c).__=u.__E:(b?t.__c=u=new W(w,k):(t.__c=u=new ce(w,k),u.constructor=W,u.render=Sa),x&&x.sub(u),u.props=w,u.state||(u.state={}),u.context=k,u.__n=n,v=u.__d=!0,u.__h=[],u._sb=[]),b&&u.__s==null&&(u.__s=u.state),b&&W.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=Pe({},u.__s)),Pe(u.__s,W.getDerivedStateFromProps(w,u.__s))),p=u.props,g=u.state,u.__v=t,v)b&&W.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),b&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(b&&W.getDerivedStateFromProps==null&&w!==p&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(w,k),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(w,u.__s,k)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(u.props=w,u.state=u.__s,u.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(me){me&&(me.__=t)}),y=0;y<u._sb.length;y++)u.__h.push(u._sb[y]);u._sb=[],u.__h.length&&a.push(u);break e}u.componentWillUpdate!=null&&u.componentWillUpdate(w,u.__s,k),b&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(p,g,m)})}if(u.context=k,u.props=w,u.__P=e,u.__e=!1,O=R.__r,T=0,b){for(u.state=u.__s,u.__d=!1,O&&O(t),f=u.render(u.props,u.state,u.context),A=0;A<u._sb.length;A++)u.__h.push(u._sb[A]);u._sb=[]}else do u.__d=!1,O&&O(t),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++T<25);u.state=u.__s,u.getChildContext!=null&&(n=Pe(Pe({},n),u.getChildContext())),b&&!v&&u.getSnapshotBeforeUpdate!=null&&(m=u.getSnapshotBeforeUpdate(p,g)),vi(e,hr(M=f!=null&&f.type===ae&&f.key==null?f.props.children:f)?M:[M],t,r,n,i,s,a,c,l,h),u.base=t.__e,t.__u&=-161,u.__h.length&&a.push(u),_&&(u.__E=u.__=null)}catch(me){if(t.__v=null,l||s!=null){for(t.__u|=l?160:32;c&&c.nodeType===8&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,t.__e=c}else t.__e=r.__e,t.__k=r.__k;R.__e(me,t,r)}else s==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=xa(r.__e,t,r,n,i,s,a,l,h);(f=R.diffed)&&f(t)}function Si(e,t,r){t.__d=void 0;for(var n=0;n<r.length;n++)Wr(r[n],r[++n],r[++n]);R.__c&&R.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(s){s.call(i)})}catch(s){R.__e(s,i.__v)}})}function xa(e,t,r,n,i,s,a,c,l){var h,f,u,v,p,g,m,_=r.props,w=t.props,b=t.type;if(b==="svg"?i="http://www.w3.org/2000/svg":b==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(h=0;h<s.length;h++)if((p=s[h])&&"setAttribute"in p==!!b&&(b?p.localName===b:p.nodeType===3)){e=p,s[h]=null;break}}if(e==null){if(b===null)return document.createTextNode(w);e=document.createElementNS(i,b,w.is&&w),s=null,c=!1}if(b===null)_===w||c&&e.data===w||(e.data=w);else{if(s=s&&Nt.call(e.childNodes),_=r.props||At,!c&&s!=null)for(_={},h=0;h<e.attributes.length;h++)_[(p=e.attributes[h]).name]=p.value;for(h in _)if(p=_[h],h!="children"){if(h=="dangerouslySetInnerHTML")u=p;else if(h!=="key"&&!(h in w)){if(h=="value"&&"defaultValue"in w||h=="checked"&&"defaultChecked"in w)continue;fr(e,h,null,p,i)}}for(h in w)p=w[h],h=="children"?v=p:h=="dangerouslySetInnerHTML"?f=p:h=="value"?g=p:h=="checked"?m=p:h==="key"||c&&typeof p!="function"||_[h]===p||fr(e,h,p,_[h],i);if(f)c||u&&(f.__html===u.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(u&&(e.innerHTML=""),vi(e,hr(v)?v:[v],t,r,n,b==="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,a,s?s[0]:r.__k&&qe(r,0),c,l),s!=null)for(h=s.length;h--;)s[h]!=null&&yi(s[h]);c||(h="value",g!==void 0&&(g!==e[h]||b==="progress"&&!g||b==="option"&&g!==_[h])&&fr(e,h,g,_[h],i),h="checked",m!==void 0&&m!==e[h]&&fr(e,h,m,_[h],i))}return e}function Wr(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(i){R.__e(i,r)}}function Vr(e,t,r){var n,i;if(R.unmount&&R.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||Wr(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(s){R.__e(s,t)}n.base=n.__P=null}if(n=e.__k)for(i=0;i<n.length;i++)n[i]&&Vr(n[i],t,r||typeof e.type!="function");r||e.__e==null||yi(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Sa(e,t,r){return this.constructor(e,r)}function Dt(e,t,r){var n,i,s,a;R.__&&R.__(e,t),i=(n=typeof r=="function")?null:r&&r.__k||t.__k,s=[],a=[],Qr(t,e=(!n&&r||t).__k=he(ae,null,[e]),i||At,At,t.namespaceURI,!n&&r?[r]:i?null:t.firstChild?Nt.call(t.childNodes):null,s,!n&&r?r:i?i.__e:t.firstChild,n,a),Si(s,e,a)}function Ci(e,t){Dt(e,t,Ci)}function Ca(e,t,r){var n,i,s,a,c=Pe({},e.props);for(s in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)s=="key"?n=t[s]:s=="ref"?i=t[s]:c[s]=t[s]===void 0&&a!==void 0?a[s]:t[s];return arguments.length>2&&(c.children=arguments.length>3?Nt.call(arguments,2):r),It(e.type,c,n||e.key,i||e.ref,null)}function ze(e,t){var r={__c:t="__cC"+mi++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,s;return this.getChildContext||(i=[],(s={})[t]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&i.some(function(c){c.__e=!0,Br(c)})},this.sub=function(a){i.push(a);var c=a.componentWillUnmount;a.componentWillUnmount=function(){i&&i.splice(i.indexOf(a),1),c&&c.call(a)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r}Nt=gi.slice,R={__e:function(e,t,r,n){for(var i,s,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,n||{}),a=i.__d),a)return i.__E=i}catch(c){e=c}throw e}},di=0,ce.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Pe({},this.state),typeof e=="function"&&(e=e(Pe({},r),this.props)),e&&Pe(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Br(this))},ce.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Br(this))},ce.prototype.render=ae,He=[],pi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ur=function(e,t){return e.__v.__b-t.__v.__b},dr.__r=0,Hr=0,qr=xi(!1),zr=xi(!0),mi=0;var Kr;function H(e,t){return R.__a&&R.__a(t),e}(Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:void 0)!=null&&Kr.__PREACT_DEVTOOLS__&&Kr.__PREACT_DEVTOOLS__.attachPreact("10.23.2",R,{Fragment:ae,Component:ce});var $e,j,Gr,ki,ot=0,Pi=[],q=R,Ei=q.__b,Ti=q.__r,Oi=q.diffed,Ri=q.__c,$i=q.unmount,Ni=q.__;function at(e,t){q.__h&&q.__h(j,e,ot||t),ot=0;var r=j.__H||(j.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function K(e){return ot=1,Yr(Li,e)}function Yr(e,t,r){var n=at($e++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Li(void 0,t),function(c){var l=n.__N?n.__N[0]:n.__[0],h=n.t(l,c);l!==h&&(n.__N=[h,n.__[1]],n.__c.setState({}))}],n.__c=j,!j.u)){var i=function(c,l,h){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(v){return!!v.__c});if(f.every(function(v){return!v.__N}))return!s||s.call(this,c,l,h);var u=!1;return f.forEach(function(v){if(v.__N){var p=v.__[0];v.__=v.__N,v.__N=void 0,p!==v.__[0]&&(u=!0)}}),!(!u&&n.__c.props===c)&&(!s||s.call(this,c,l,h))};j.u=!0;var s=j.shouldComponentUpdate,a=j.componentWillUpdate;j.componentWillUpdate=function(c,l,h){if(this.__e){var f=s;s=void 0,i(c,l,h),s=f}a&&a.call(this,c,l,h)},j.shouldComponentUpdate=i}return n.__N||n.__}function oe(e,t){var r=at($e++,3);!q.__s&&Jr(r.__H,t)&&(r.__=e,r.i=t,j.__H.__h.push(r))}function ct(e,t){var r=at($e++,4);!q.__s&&Jr(r.__H,t)&&(r.__=e,r.i=t,j.__h.push(r))}function lt(e){return ot=5,ne(function(){return{current:e}},[])}function Ai(e,t,r){ot=6,ct(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},r==null?r:r.concat(e))}function ne(e,t){var r=at($e++,7);return Jr(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function J(e,t){return ot=8,ne(function(){return e},t)}function ut(e){var t=j.context[e.__c],r=at($e++,9);return r.c=e,t?(r.__==null&&(r.__=!0,t.sub(j)),t.props.value):e.__}function Ii(e,t){q.useDebugValue&&q.useDebugValue(t?t(e):e)}function Di(){var e=at($e++,11);if(!e.__){for(var t=j.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var r=t.__m||(t.__m=[0,0]);e.__="P"+r[0]+"-"+r[1]++}return e.__}function ka(){for(var e;e=Pi.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pr),e.__H.__h.forEach(Zr),e.__H.__h=[]}catch(t){e.__H.__h=[],q.__e(t,e.__v)}}q.__b=function(e){j=null,Ei&&Ei(e)},q.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ni&&Ni(e,t)},q.__r=function(e){Ti&&Ti(e),$e=0;var t=(j=e.__c).__H;t&&(Gr===j?(t.__h=[],j.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.i=r.__N=void 0})):(t.__h.forEach(pr),t.__h.forEach(Zr),t.__h=[],$e=0)),Gr=j},q.diffed=function(e){Oi&&Oi(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Pi.push(t)!==1&&ki===q.requestAnimationFrame||((ki=q.requestAnimationFrame)||Pa)(ka)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.i=void 0})),Gr=j=null},q.__c=function(e,t){t.some(function(r){try{r.__h.forEach(pr),r.__h=r.__h.filter(function(n){return!n.__||Zr(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],q.__e(n,r.__v)}}),Ri&&Ri(e,t)},q.unmount=function(e){$i&&$i(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{pr(n)}catch(i){t=i}}),r.__H=void 0,t&&q.__e(t,r.__v))};var Mi=typeof requestAnimationFrame=="function";function Pa(e){var t,r=function(){clearTimeout(n),Mi&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Mi&&(t=requestAnimationFrame(r))}function pr(e){var t=j,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),j=t}function Zr(e){var t=j;e.__c=e.__(),j=t}function Jr(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function Li(e,t){return typeof t=="function"?t(e):t}function Fi(e,t){for(var r in t)e[r]=t[r];return e}function Xr(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function en(e,t){this.props=e,this.context=t}function ji(e,t){function r(i){var s=this.props.ref,a=s==i.ref;return!a&&s&&(s.call?s(null):s.current=null),t?!t(this.props,i)||!a:Xr(this.props,i)}function n(i){return this.shouldComponentUpdate=r,he(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(en.prototype=new ce).isPureReactComponent=!0,en.prototype.shouldComponentUpdate=function(e,t){return Xr(this.props,e)||Xr(this.state,t)};var Ui=R.__b;R.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ui&&Ui(e)};var Ea=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ta(e){function t(r){var n=Fi({},r);return delete n.ref,e(n,r.ref||null)}return t.$$typeof=Ea,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Hi=function(e,t){return e==null?null:Ee(Ee(e).map(t))},Oa={map:Hi,forEach:Hi,count:function(e){return e?Ee(e).length:0},only:function(e){var t=Ee(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Ee},Ra=R.__e;R.__e=function(e,t,r,n){if(e.then){for(var i,s=t;s=s.__;)if((i=s.__c)&&i.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),i.__c(e,t)}Ra(e,t,r,n)};var qi=R.unmount;function zi(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Fi({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return zi(n,t,r)})),e}function Bi(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return Bi(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=r)),e}function Mt(){this.__u=0,this.t=null,this.__b=null}function Qi(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function $a(e){var t,r,n;function i(s){if(t||(t=e()).then(function(a){r=a.default||a},function(a){n=a}),n)throw n;if(!r)throw t;return he(r,s)}return i.displayName="Lazy",i.__f=!0,i}function Lt(){this.u=null,this.o=null}R.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),qi&&qi(e)},(Mt.prototype=new ce).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var i=Qi(n.__v),s=!1,a=function(){s||(s=!0,r.__R=null,i?i(c):c())};r.__R=a;var c=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=Bi(l,l.__c.__P,l.__c.__O)}var h;for(n.setState({__a:n.__b=null});h=n.t.pop();)h.forceUpdate()}};n.__u++||32&t.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(a,a)},Mt.prototype.componentWillUnmount=function(){this.t=[]},Mt.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=zi(this.__b,r,n.__O=n.__P)}this.__b=null}var i=t.__a&&he(ae,null,e.fallback);return i&&(i.__u&=-33),[he(ae,null,t.__a?null:e.children),i]};var Wi=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};function Na(e){return this.getChildContext=function(){return e.context},e.children}function Aa(e){var t=this,r=e.i;t.componentWillUnmount=function(){Dt(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],contains:function(){return!0},appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),Dt(he(Na,{context:t.context},e.__v),t.l)}function Ia(e,t){var r=he(Aa,{__v:e,i:t});return r.containerInfo=t,r}(Lt.prototype=new ce).__a=function(e){var t=this,r=Qi(t.__v),n=t.o.get(e);return n[0]++,function(i){var s=function(){t.props.revealOrder?(n.push(i),Wi(t,e,n)):i()};r?r(s):s()}},Lt.prototype.render=function(e){this.u=null,this.o=new Map;var t=Ee(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},Lt.prototype.componentDidUpdate=Lt.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){Wi(e,r,t)})};var Vi=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Da=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ma=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,La=/[A-Z0-9]/g,Fa=typeof document<"u",ja=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function Ki(e,t,r){return t.__k==null&&(t.textContent=""),Dt(e,t),typeof r=="function"&&r(),e?e.__c:null}function Ua(e,t,r){return Ci(e,t),typeof r=="function"&&r(),e?e.__c:null}ce.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(ce.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Gi=R.event;function Ha(){}function qa(){return this.cancelBubble}function za(){return this.defaultPrevented}R.event=function(e){return Gi&&(e=Gi(e)),e.persist=Ha,e.isPropagationStopped=qa,e.isDefaultPrevented=za,e.nativeEvent=e};var tn,Ba={enumerable:!1,configurable:!0,get:function(){return this.class}},Yi=R.vnode;R.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,i={},s=n.indexOf("-")===-1;for(var a in r){var c=r[a];if(!(a==="value"&&"defaultValue"in r&&c==null||Fa&&a==="children"&&n==="noscript"||a==="class"||a==="className")){var l=a.toLowerCase();a==="defaultValue"&&"value"in r&&r.value==null?a="value":a==="download"&&c===!0?c="":l==="translate"&&c==="no"?c=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?a="ondblclick":l!=="onchange"||n!=="input"&&n!=="textarea"||ja(r.type)?l==="onfocus"?a="onfocusin":l==="onblur"?a="onfocusout":Ma.test(a)&&(a=l):l=a="oninput":s&&Da.test(a)?a=a.replace(La,"-$&").toLowerCase():c===null&&(c=void 0),l==="oninput"&&i[a=l]&&(a="oninputCapture"),i[a]=c}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Ee(r.children).forEach(function(h){h.props.selected=i.value.indexOf(h.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=Ee(r.children).forEach(function(h){h.props.selected=i.multiple?i.defaultValue.indexOf(h.props.value)!=-1:i.defaultValue==h.props.value})),r.class&&!r.className?(i.class=r.class,Object.defineProperty(i,"className",Ba)):(r.className&&!r.class||r.class&&r.className)&&(i.class=i.className=r.className),t.props=i}(e),e.$$typeof=Vi,Yi&&Yi(e)};var Zi=R.__r;R.__r=function(e){Zi&&Zi(e),tn=e.__c};var Ji=R.diffed;R.diffed=function(e){Ji&&Ji(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value),tn=null};var Qa={ReactCurrentDispatcher:{current:{readContext:function(e){return tn.__n[e.__c].props.value},useCallback:J,useContext:ut,useDebugValue:Ii,useDeferredValue:ts,useEffect:oe,useId:Di,useImperativeHandle:Ai,useInsertionEffect:ns,useLayoutEffect:ct,useMemo:ne,useReducer:Yr,useRef:lt,useState:K,useSyncExternalStore:rn,useTransition:rs}}};function Wa(e){return he.bind(null,e)}function Ft(e){return!!e&&e.$$typeof===Vi}function Va(e){return Ft(e)&&e.type===ae}function Ka(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function Ga(e){return Ft(e)?Ca.apply(null,arguments):e}function Xi(e){return!!e.__k&&(Dt(null,e),!0)}function Ya(e){return e&&(e.base||e.nodeType===1&&e)||null}var Za=function(e,t){return e(t)},Ja=function(e,t){return e(t)},Xa=ae;function es(e){e()}function ts(e){return e}function rs(){return[!1,es]}var ns=ct,ec=Ft;function rn(e,t){var r=t(),n=K({h:{__:r,v:t}}),i=n[0].h,s=n[1];return ct(function(){i.__=r,i.v=t,nn(i)&&s({h:i})},[e,r,t]),oe(function(){return nn(i)&&s({h:i}),e(function(){nn(i)&&s({h:i})})},[e]),r}function nn(e){var t,r,n=e.v,i=e.__;try{var s=n();return!((t=i)===(r=s)&&(t!==0||1/t==1/r)||t!=t&&r!=r)}catch{return!0}}var tc={useState:K,useId:Di,useReducer:Yr,useEffect:oe,useLayoutEffect:ct,useInsertionEffect:ns,useTransition:rs,useDeferredValue:ts,useSyncExternalStore:rn,startTransition:es,useRef:lt,useImperativeHandle:Ai,useMemo:ne,useCallback:J,useContext:ut,useDebugValue:Ii,version:"17.0.2",Children:Oa,render:Ki,hydrate:Ua,unmountComponentAtNode:Xi,createPortal:Ia,createElement:he,createContext:ze,createFactory:Wa,cloneElement:Ga,createRef:va,Fragment:ae,isValidElement:Ft,isElement:ec,isFragment:Va,isMemo:Ka,findDOMNode:Ya,Component:ce,PureComponent:en,memo:ji,forwardRef:Ta,flushSync:Ja,unstable_batchedUpdates:Za,StrictMode:Xa,Suspense:Mt,SuspenseList:Lt,lazy:$a,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Qa};function is(e,t=void 0){const[r,n]=H(K(!1),"hovering");return oe(()=>{if(!e.current)return;const i=e.current;let s;const a=()=>{t?s=setTimeout(()=>n(!0),t):n(!0)},c=()=>{n(!1),s&&clearTimeout(s)};return i.addEventListener("mouseover",a),i.addEventListener("mouseout",c),()=>{i.removeEventListener("mouseover",a),i.removeEventListener("mouseout",c)}},[e,t]),r}const rc={bg:"#aae5a4",bgAlt:"#aae5a4",bgDeep:"#ffffcc",bgHighlight:"#93c393",bgOverlay:"#ffffff",text:"#000000",textSoft:"#000000",textActive:"#192918",link:"#757575",linkSoft:"#93c393",linkArtist:"#aa0000",linkCharacter:"#00aa00",linkCopyright:"#aa00aa",linkMetadata:"#ff8800"},nc={bg:"#303a30",bgAlt:"#293129",bgDeep:"#303030",bgHighlight:"#505a50",bgOverlay:"#242424e6",text:"#c0c0c0",textSoft:"#878787",textActive:"#b0e0b0",link:"#b0e0b0",linkSoft:"#93b393",linkArtist:"#f0a0a0",linkCharacter:"#f0f0a0",linkCopyright:"#f0a0f0",linkMetadata:"#90d9ed"},E={bg:"var(--r-bg)",bgAlt:"var(--r-bg-alt)",bgDeep:"var(--r-bg-deep)",bgHighlight:"var(--r-bg-highlight)",bgOverlay:"var(--r-bg-overlay)",text:"var(--r-text)",textSoft:"var(--r-text-soft)",textActive:"var(--r-link)",link:"var(--r-link-soft)",linkSoft:"var(--r-link-soft)",linkArtist:"var(--r-link-artist)",linkCharacter:"var(--r-link-character)",linkCopyright:"var(--r-link-copyright)",linkMetadata:"var(--r-link-metadata)"},ss=e=>({general:E.textActive,artist:E.linkArtist,character:E.linkArtist,copyright:E.linkCopyright,metadata:E.linkMetadata})[e],ic=e=>`
        --r-bg: ${e.bg};
        --r-bg-alt: ${e.bgAlt};
        --r-bg-deep: ${e.bgDeep};
        --r-bg-highlight: ${e.bgHighlight};
        --r-bg-overlay: ${e.bgOverlay};
        --r-text: ${e.text};
        --r-text-soft: ${e.textSoft};
        --r-text-active: ${e.textActive};
        --r-link: ${e.textActive};
        --r-link-soft: ${e.linkSoft};
        --r-link-artist: ${e.linkArtist};
        --r-link-character: ${e.linkCharacter};
        --r-link-copyright: ${e.linkCopyright};
        --r-link-metadata: ${e.linkMetadata};
    `;var jt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Be=typeof window>"u"||"Deno"in globalThis;function le(){}function sc(e,t){return typeof e=="function"?e(t):e}function sn(e){return typeof e=="number"&&e>=0&&e!==1/0}function os(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ht(e,t){return typeof e=="function"?e(t):e}function de(e,t){return typeof e=="function"?e(t):e}function as(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:s,queryKey:a,stale:c}=e;if(a){if(n){if(t.queryHash!==on(a,t.options))return!1}else if(!Ht(t.queryKey,a))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||i&&i!==t.state.fetchStatus||s&&!s(t))}function cs(e,t){const{exact:r,status:n,predicate:i,mutationKey:s}=e;if(s){if(!t.options.mutationKey)return!1;if(r){if(Ut(t.options.mutationKey)!==Ut(s))return!1}else if(!Ht(t.options.mutationKey,s))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function on(e,t){return((t==null?void 0:t.queryKeyHashFn)||Ut)(e)}function Ut(e){return JSON.stringify(e,(t,r)=>cn(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Ht(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(r=>!Ht(e[r],t[r])):!1}function ls(e,t){if(e===t)return e;const r=us(e)&&us(t);if(r||cn(e)&&cn(t)){const n=r?e:Object.keys(e),i=n.length,s=r?t:Object.keys(t),a=s.length,c=r?[]:{};let l=0;for(let h=0;h<a;h++){const f=r?h:s[h];(!r&&n.includes(f)||r)&&e[f]===void 0&&t[f]===void 0?(c[f]=void 0,l++):(c[f]=ls(e[f],t[f]),c[f]===e[f]&&e[f]!==void 0&&l++)}return i===a&&l===i?e:c}return t}function an(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function us(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function cn(e){if(!hs(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!hs(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function hs(e){return Object.prototype.toString.call(e)==="[object Object]"}function oc(e){return new Promise(t=>{setTimeout(t,e)})}function ln(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?ls(e,t):t}function ac(e){return e}function cc(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function lc(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var un=Symbol();function ds(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===un?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var uc=(no=class extends jt{constructor(){super();P(this,We,void 0);P(this,Ne,void 0);P(this,ft,void 0);S(this,ft,t=>{if(!Be&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){d(this,Ne)||this.setEventListener(d(this,ft))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Ne))==null||t.call(this),S(this,Ne,void 0))}setEventListener(t){var r;S(this,ft,t),(r=d(this,Ne))==null||r.call(this),S(this,Ne,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){d(this,We)!==t&&(S(this,We,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof d(this,We)=="boolean"?d(this,We):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},We=new WeakMap,Ne=new WeakMap,ft=new WeakMap,no),hn=new uc,hc=(io=class extends jt{constructor(){super();P(this,pt,!0);P(this,Ae,void 0);P(this,mt,void 0);S(this,mt,t=>{if(!Be&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){d(this,Ae)||this.setEventListener(d(this,mt))}onUnsubscribe(){var t;this.hasListeners()||((t=d(this,Ae))==null||t.call(this),S(this,Ae,void 0))}setEventListener(t){var r;S(this,mt,t),(r=d(this,Ae))==null||r.call(this),S(this,Ae,t(this.setOnline.bind(this)))}setOnline(t){d(this,pt)!==t&&(S(this,pt,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return d(this,pt)}},pt=new WeakMap,Ae=new WeakMap,mt=new WeakMap,io),mr=new hc;function dn(){let e,t;const r=new Promise((i,s)=>{e=i,t=s});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}function dc(e){return Math.min(1e3*2**e,3e4)}function fs(e){return(e??"online")==="online"?mr.isOnline():!0}var ps=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function fn(e){return e instanceof ps}function ms(e){let t=!1,r=0,n=!1,i;const s=dn(),a=m=>{var _;n||(v(new ps(m)),(_=e.abort)==null||_.call(e))},c=()=>{t=!0},l=()=>{t=!1},h=()=>hn.isFocused()&&(e.networkMode==="always"||mr.isOnline())&&e.canRun(),f=()=>fs(e.networkMode)&&e.canRun(),u=m=>{var _;n||(n=!0,(_=e.onSuccess)==null||_.call(e,m),i==null||i(),s.resolve(m))},v=m=>{var _;n||(n=!0,(_=e.onError)==null||_.call(e,m),i==null||i(),s.reject(m))},p=()=>new Promise(m=>{var _;i=w=>{(n||h())&&m(w)},(_=e.onPause)==null||_.call(e)}).then(()=>{var m;i=void 0,n||(m=e.onContinue)==null||m.call(e)}),g=()=>{if(n)return;let m;const _=r===0?e.initialPromise:void 0;try{m=_??e.fn()}catch(w){m=Promise.reject(w)}Promise.resolve(m).then(u).catch(w=>{var O;if(n)return;const b=e.retry??(Be?0:3),x=e.retryDelay??dc,k=typeof x=="function"?x(r,w):x,y=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,w);if(t||!y){v(w);return}r++,(O=e.onFail)==null||O.call(e,r,w),oc(k).then(()=>h()?void 0:p()).then(()=>{t?v(w):g()})})};return{promise:s,cancel:a,continue:()=>(i==null||i(),s),cancelRetry:c,continueRetry:l,canStart:f,start:()=>(f()?g():p().then(g),s)}}function fc(){let e=[],t=0,r=c=>{c()},n=c=>{c()},i=c=>setTimeout(c,0);const s=c=>{t?e.push(c):i(()=>{r(c)})},a=()=>{const c=e;e=[],c.length&&i(()=>{n(()=>{c.forEach(l=>{r(l)})})})};return{batch:c=>{let l;t++;try{l=c()}finally{t--,t||a()}return l},batchCalls:c=>(...l)=>{s(()=>{c(...l)})},schedule:s,setNotifyFunction:c=>{r=c},setBatchNotifyFunction:c=>{n=c},setScheduler:c=>{i=c}}}var G=fc(),gs=(so=class{constructor(){P(this,Ve,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),sn(this.gcTime)&&S(this,Ve,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Be?1/0:5*60*1e3))}clearGcTimeout(){d(this,Ve)&&(clearTimeout(d(this,Ve)),S(this,Ve,void 0))}},Ve=new WeakMap,so),pc=(oo=class extends gs{constructor(t){super();P(this,fe);P(this,gt,void 0);P(this,yt,void 0);P(this,ue,void 0);P(this,Ke,void 0);P(this,X,void 0);P(this,Qt,void 0);P(this,Ge,void 0);S(this,Ge,!1),S(this,Qt,t.defaultOptions),this.setOptions(t.options),this.observers=[],S(this,Ke,t.client),S(this,ue,d(this,Ke).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,S(this,gt,mc(this.options)),this.state=t.state??d(this,gt),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=d(this,X))==null?void 0:t.promise}setOptions(t){this.options={...d(this,Qt),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&d(this,ue).remove(this)}setData(t,r){const n=ln(this.state.data,t,this.options);return N(this,fe,Oe).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){N(this,fe,Oe).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,i;const r=(n=d(this,X))==null?void 0:n.promise;return(i=d(this,X))==null||i.cancel(t),r?r.then(le).catch(le):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(d(this,gt))}isActive(){return this.observers.some(t=>de(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===un||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!os(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,X))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=d(this,X))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),d(this,ue).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(d(this,X)&&(d(this,Ge)?d(this,X).cancel({revert:!0}):d(this,X).cancelRetry()),this.scheduleGc()),d(this,ue).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||N(this,fe,Oe).call(this,{type:"invalidate"})}fetch(t,r){var l,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(d(this,X))return d(this,X).continueRetry(),d(this,X).promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(v=>v.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,i=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(S(this,Ge,!0),n.signal)})},s=()=>{const u=ds(this.options,r),v={client:d(this,Ke),queryKey:this.queryKey,meta:this.meta};return i(v),S(this,Ge,!1),this.options.persister?this.options.persister(u,v,this):u(v)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:d(this,Ke),state:this.state,fetchFn:s};i(a),(l=this.options.behavior)==null||l.onFetch(a,this),S(this,yt,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=a.fetchOptions)==null?void 0:h.meta))&&N(this,fe,Oe).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const c=u=>{var v,p,g,m;fn(u)&&u.silent||N(this,fe,Oe).call(this,{type:"error",error:u}),fn(u)||((p=(v=d(this,ue).config).onError)==null||p.call(v,u,this),(m=(g=d(this,ue).config).onSettled)==null||m.call(g,this.state.data,u,this)),this.scheduleGc()};return S(this,X,ms({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:u=>{var v,p,g,m;if(u===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(u)}catch(_){c(_);return}(p=(v=d(this,ue).config).onSuccess)==null||p.call(v,u,this),(m=(g=d(this,ue).config).onSettled)==null||m.call(g,u,this.state.error,this),this.scheduleGc()},onError:c,onFail:(u,v)=>{N(this,fe,Oe).call(this,{type:"failed",failureCount:u,error:v})},onPause:()=>{N(this,fe,Oe).call(this,{type:"pause"})},onContinue:()=>{N(this,fe,Oe).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),d(this,X).start()}},gt=new WeakMap,yt=new WeakMap,ue=new WeakMap,Ke=new WeakMap,X=new WeakMap,Qt=new WeakMap,Ge=new WeakMap,fe=new WeakSet,Oe=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...ys(n.data,this.options),fetchMeta:t.meta??null};case"success":return{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return fn(i)&&i.revert&&d(this,yt)?{...d(this,yt),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),G.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),d(this,ue).notify({query:this,type:"updated",action:t})})},oo);function ys(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:fs(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function mc(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var gc=(ao=class extends jt{constructor(t={}){super();P(this,we,void 0);this.config=t,S(this,we,new Map)}build(t,r,n){const i=r.queryKey,s=r.queryHash??on(i,r);let a=this.get(s);return a||(a=new pc({client:t,queryKey:i,queryHash:s,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(i)}),this.add(a)),a}add(t){d(this,we).has(t.queryHash)||(d(this,we).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=d(this,we).get(t.queryHash);r&&(t.destroy(),r===t&&d(this,we).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){G.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return d(this,we).get(t)}getAll(){return[...d(this,we).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>as(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>as(t,n)):r}notify(t){G.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){G.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){G.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},we=new WeakMap,ao),yc=(co=class extends gs{constructor(t){super();P(this,Se);P(this,xe,void 0);P(this,ee,void 0);P(this,Ye,void 0);this.mutationId=t.mutationId,S(this,ee,t.mutationCache),S(this,xe,[]),this.state=t.state||_c(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){d(this,xe).includes(t)||(d(this,xe).push(t),this.clearGcTimeout(),d(this,ee).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){S(this,xe,d(this,xe).filter(r=>r!==t)),this.scheduleGc(),d(this,ee).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){d(this,xe).length||(this.state.status==="pending"?this.scheduleGc():d(this,ee).remove(this))}continue(){var t;return((t=d(this,Ye))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,s,a,c,l,h,f,u,v,p,g,m,_,w,b,x,k,y,O,T;S(this,Ye,ms({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(A,M)=>{N(this,Se,je).call(this,{type:"failed",failureCount:A,error:M})},onPause:()=>{N(this,Se,je).call(this,{type:"pause"})},onContinue:()=>{N(this,Se,je).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>d(this,ee).canRun(this)}));const r=this.state.status==="pending",n=!d(this,Ye).canStart();try{if(!r){N(this,Se,je).call(this,{type:"pending",variables:t,isPaused:n}),await((s=(i=d(this,ee).config).onMutate)==null?void 0:s.call(i,t,this));const M=await((c=(a=this.options).onMutate)==null?void 0:c.call(a,t));M!==this.state.context&&N(this,Se,je).call(this,{type:"pending",context:M,variables:t,isPaused:n})}const A=await d(this,Ye).start();return await((h=(l=d(this,ee).config).onSuccess)==null?void 0:h.call(l,A,t,this.state.context,this)),await((u=(f=this.options).onSuccess)==null?void 0:u.call(f,A,t,this.state.context)),await((p=(v=d(this,ee).config).onSettled)==null?void 0:p.call(v,A,null,this.state.variables,this.state.context,this)),await((m=(g=this.options).onSettled)==null?void 0:m.call(g,A,null,t,this.state.context)),N(this,Se,je).call(this,{type:"success",data:A}),A}catch(A){try{throw await((w=(_=d(this,ee).config).onError)==null?void 0:w.call(_,A,t,this.state.context,this)),await((x=(b=this.options).onError)==null?void 0:x.call(b,A,t,this.state.context)),await((y=(k=d(this,ee).config).onSettled)==null?void 0:y.call(k,void 0,A,this.state.variables,this.state.context,this)),await((T=(O=this.options).onSettled)==null?void 0:T.call(O,void 0,A,t,this.state.context)),A}finally{N(this,Se,je).call(this,{type:"error",error:A})}}finally{d(this,ee).runNext(this)}}},xe=new WeakMap,ee=new WeakMap,Ye=new WeakMap,Se=new WeakSet,je=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),G.batch(()=>{d(this,xe).forEach(n=>{n.onMutationUpdate(t)}),d(this,ee).notify({mutation:this,type:"updated",action:t})})},co);function _c(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var vc=(lo=class extends jt{constructor(t={}){super();P(this,Te,void 0);P(this,pe,void 0);P(this,Wt,void 0);this.config=t,S(this,Te,new Set),S(this,pe,new Map),S(this,Wt,0)}build(t,r,n){const i=new yc({mutationCache:this,mutationId:++Pr(this,Wt)._,options:t.defaultMutationOptions(r),state:n});return this.add(i),i}add(t){d(this,Te).add(t);const r=gr(t);if(typeof r=="string"){const n=d(this,pe).get(r);n?n.push(t):d(this,pe).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(d(this,Te).delete(t)){const r=gr(t);if(typeof r=="string"){const n=d(this,pe).get(r);if(n)if(n.length>1){const i=n.indexOf(t);i!==-1&&n.splice(i,1)}else n[0]===t&&d(this,pe).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=gr(t);if(typeof r=="string"){const n=d(this,pe).get(r),i=n==null?void 0:n.find(s=>s.state.status==="pending");return!i||i===t}else return!0}runNext(t){var n;const r=gr(t);if(typeof r=="string"){const i=(n=d(this,pe).get(r))==null?void 0:n.find(s=>s!==t&&s.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){G.batch(()=>{d(this,Te).forEach(t=>{this.notify({type:"removed",mutation:t})}),d(this,Te).clear(),d(this,pe).clear()})}getAll(){return Array.from(d(this,Te))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>cs(r,n))}findAll(t={}){return this.getAll().filter(r=>cs(t,r))}notify(t){G.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return G.batch(()=>Promise.all(t.map(r=>r.continue().catch(le))))}},Te=new WeakMap,pe=new WeakMap,Wt=new WeakMap,lo);function gr(e){var t;return(t=e.options.scope)==null?void 0:t.id}function yr(e){return{onFetch:(t,r)=>{var f,u,v,p,g;const n=t.options,i=(v=(u=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:u.fetchMore)==null?void 0:v.direction,s=((p=t.state.data)==null?void 0:p.pages)||[],a=((g=t.state.data)==null?void 0:g.pageParams)||[];let c={pages:[],pageParams:[]},l=0;const h=async()=>{let m=!1;const _=x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},w=ds(t.options,t.fetchOptions),b=async(x,k,y)=>{if(m)return Promise.reject();if(k==null&&x.pages.length)return Promise.resolve(x);const O={client:t.client,queryKey:t.queryKey,pageParam:k,direction:y?"backward":"forward",meta:t.options.meta};_(O);const T=await w(O),{maxPages:A}=t.options,M=y?lc:cc;return{pages:M(x.pages,T,A),pageParams:M(x.pageParams,k,A)}};if(i&&s.length){const x=i==="backward",k=x?_s:pn,y={pages:s,pageParams:a},O=k(n,y);c=await b(y,O,x)}else{const x=e??s.length;do{const k=l===0?a[0]??n.initialPageParam:pn(n,c);if(l>0&&k==null)break;c=await b(c,k),l++}while(l<x)}return c};t.options.persister?t.fetchFn=()=>{var m,_;return(_=(m=t.options).persister)==null?void 0:_.call(m,h,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=h}}}function pn(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function _s(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}function bc(e,t){return t?pn(e,t)!=null:!1}function wc(e,t){return!t||!e.getPreviousPageParam?!1:_s(e,t)!=null}var xc=(uo=class{constructor(e={}){P(this,z,void 0);P(this,Ie,void 0);P(this,De,void 0);P(this,_t,void 0);P(this,vt,void 0);P(this,Me,void 0);P(this,bt,void 0);P(this,wt,void 0);S(this,z,e.queryCache||new gc),S(this,Ie,e.mutationCache||new vc),S(this,De,e.defaultOptions||{}),S(this,_t,new Map),S(this,vt,new Map),S(this,Me,0)}mount(){Pr(this,Me)._++,d(this,Me)===1&&(S(this,bt,hn.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,z).onFocus())})),S(this,wt,mr.subscribe(async e=>{e&&(await this.resumePausedMutations(),d(this,z).onOnline())})))}unmount(){var e,t;Pr(this,Me)._--,d(this,Me)===0&&((e=d(this,bt))==null||e.call(this),S(this,bt,void 0),(t=d(this,wt))==null||t.call(this),S(this,wt,void 0))}isFetching(e){return d(this,z).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return d(this,Ie).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,z).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=d(this,z).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(ht(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return d(this,z).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=d(this,z).get(n.queryHash),s=i==null?void 0:i.state.data,a=sc(t,s);if(a!==void 0)return d(this,z).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(e,t,r){return G.batch(()=>d(this,z).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=d(this,z).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=d(this,z);G.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=d(this,z),n={type:"active",...e};return G.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(n,t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=G.batch(()=>d(this,z).findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(le).catch(le)}invalidateQueries(e,t={}){return G.batch(()=>{if(d(this,z).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none")return Promise.resolve();const r={...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"};return this.refetchQueries(r,t)})}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=G.batch(()=>d(this,z).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let s=i.fetch(void 0,r);return r.throwOnError||(s=s.catch(le)),i.state.fetchStatus==="paused"?Promise.resolve():s}));return Promise.all(n).then(le)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=d(this,z).build(this,t);return r.isStaleByTime(ht(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(le).catch(le)}fetchInfiniteQuery(e){return e.behavior=yr(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(le).catch(le)}ensureInfiniteQueryData(e){return e.behavior=yr(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return mr.isOnline()?d(this,Ie).resumePausedMutations():Promise.resolve()}getQueryCache(){return d(this,z)}getMutationCache(){return d(this,Ie)}getDefaultOptions(){return d(this,De)}setDefaultOptions(e){S(this,De,e)}setQueryDefaults(e,t){d(this,_t).set(Ut(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...d(this,_t).values()],r={};return t.forEach(n=>{Ht(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){d(this,vt).set(Ut(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...d(this,vt).values()];let r={};return t.forEach(n=>{Ht(e,n.mutationKey)&&(r={...r,...n.defaultOptions})}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...d(this,De).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=on(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===un&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...d(this,De).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){d(this,z).clear(),d(this,Ie).clear()}},z=new WeakMap,Ie=new WeakMap,De=new WeakMap,_t=new WeakMap,vt=new WeakMap,Me=new WeakMap,bt=new WeakMap,wt=new WeakMap,uo),vs=(ho=class extends jt{constructor(t,r){super();P(this,et);P(this,Gt);P(this,Yt);P(this,Zt);P(this,Jt);P(this,Xt);P(this,er);P(this,tr);P(this,Cr);P(this,ie,void 0);P(this,$,void 0);P(this,Vt,void 0);P(this,te,void 0);P(this,Ze,void 0);P(this,xt,void 0);P(this,Le,void 0);P(this,Ce,void 0);P(this,Kt,void 0);P(this,St,void 0);P(this,Ct,void 0);P(this,Je,void 0);P(this,Xe,void 0);P(this,Fe,void 0);P(this,kt,new Set);this.options=r,S(this,ie,t),S(this,Ce,null),S(this,Le,dn()),this.options.experimental_prefetchInRender||d(this,Le).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(d(this,$).addObserver(this),bs(d(this,$),this.options)?N(this,et,rr).call(this):this.updateResult(),N(this,Jt,Fn).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mn(d(this,$),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mn(d(this,$),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,N(this,Xt,jn).call(this),N(this,er,Un).call(this),d(this,$).removeObserver(this)}setOptions(t,r){const n=this.options,i=d(this,$);if(this.options=d(this,ie).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof de(this.options.enabled,d(this,$))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");N(this,tr,Hn).call(this),d(this,$).setOptions(this.options),n._defaulted&&!an(this.options,n)&&d(this,ie).getQueryCache().notify({type:"observerOptionsUpdated",query:d(this,$),observer:this});const s=this.hasListeners();s&&ws(d(this,$),i,this.options,n)&&N(this,et,rr).call(this),this.updateResult(r),s&&(d(this,$)!==i||de(this.options.enabled,d(this,$))!==de(n.enabled,d(this,$))||ht(this.options.staleTime,d(this,$))!==ht(n.staleTime,d(this,$)))&&N(this,Gt,Dn).call(this);const a=N(this,Yt,Mn).call(this);s&&(d(this,$)!==i||de(this.options.enabled,d(this,$))!==de(n.enabled,d(this,$))||a!==d(this,Fe))&&N(this,Zt,Ln).call(this,a)}getOptimisticResult(t){const r=d(this,ie).getQueryCache().build(d(this,ie),t),n=this.createResult(r,t);return Cc(this,n)&&(S(this,te,n),S(this,xt,this.options),S(this,Ze,d(this,$).state)),n}getCurrentResult(){return d(this,te)}trackResult(t,r){const n={};return Object.keys(t).forEach(i=>{Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),r==null||r(i),t[i])})}),n}trackProp(t){d(this,kt).add(t)}getCurrentQuery(){return d(this,$)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=d(this,ie).defaultQueryOptions(t),n=d(this,ie).getQueryCache().build(d(this,ie),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return N(this,et,rr).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),d(this,te)))}createResult(t,r){var A;const n=d(this,$),i=this.options,s=d(this,te),a=d(this,Ze),c=d(this,xt),h=t!==n?t.state:d(this,Vt),{state:f}=t;let u={...f},v=!1,p;if(r._optimisticResults){const M=this.hasListeners(),W=!M&&bs(t,r),me=M&&ws(t,n,r,i);(W||me)&&(u={...u,...ys(f.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:m,status:_}=u;if(r.select&&u.data!==void 0)if(s&&u.data===(a==null?void 0:a.data)&&r.select===d(this,Kt))p=d(this,St);else try{S(this,Kt,r.select),p=r.select(u.data),p=ln(s==null?void 0:s.data,p,r),S(this,St,p),S(this,Ce,null)}catch(M){S(this,Ce,M)}else p=u.data;if(r.placeholderData!==void 0&&p===void 0&&_==="pending"){let M;if(s!=null&&s.isPlaceholderData&&r.placeholderData===(c==null?void 0:c.placeholderData))M=s.data;else if(M=typeof r.placeholderData=="function"?r.placeholderData((A=d(this,Ct))==null?void 0:A.state.data,d(this,Ct)):r.placeholderData,r.select&&M!==void 0)try{M=r.select(M),S(this,Ce,null)}catch(W){S(this,Ce,W)}M!==void 0&&(_="success",p=ln(s==null?void 0:s.data,M,r),v=!0)}d(this,Ce)&&(g=d(this,Ce),p=d(this,St),m=Date.now(),_="error");const w=u.fetchStatus==="fetching",b=_==="pending",x=_==="error",k=b&&w,y=p!==void 0,T={status:_,fetchStatus:u.fetchStatus,isPending:b,isSuccess:_==="success",isError:x,isInitialLoading:k,isLoading:k,data:p,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:m,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:w,isRefetching:w&&!b,isLoadingError:x&&!y,isPaused:u.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:x&&y,isStale:gn(t,r),refetch:this.refetch,promise:d(this,Le)};if(this.options.experimental_prefetchInRender){const M=kr=>{T.status==="error"?kr.reject(T.error):T.data!==void 0&&kr.resolve(T.data)},W=()=>{const kr=S(this,Le,T.promise=dn());M(kr)},me=d(this,Le);switch(me.status){case"pending":t.queryHash===n.queryHash&&M(me);break;case"fulfilled":(T.status==="error"||T.data!==me.value)&&W();break;case"rejected":(T.status!=="error"||T.error!==me.reason)&&W();break}}return T}updateResult(t){const r=d(this,te),n=this.createResult(d(this,$),this.options);if(S(this,Ze,d(this,$).state),S(this,xt,this.options),d(this,Ze).data!==void 0&&S(this,Ct,d(this,$)),an(n,r))return;S(this,te,n);const i={},s=()=>{if(!r)return!0;const{notifyOnChangeProps:a}=this.options,c=typeof a=="function"?a():a;if(c==="all"||!c&&!d(this,kt).size)return!0;const l=new Set(c??d(this,kt));return this.options.throwOnError&&l.add("error"),Object.keys(d(this,te)).some(h=>{const f=h;return d(this,te)[f]!==r[f]&&l.has(f)})};(t==null?void 0:t.listeners)!==!1&&s()&&(i.listeners=!0),N(this,Cr,fo).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&N(this,Jt,Fn).call(this)}},ie=new WeakMap,$=new WeakMap,Vt=new WeakMap,te=new WeakMap,Ze=new WeakMap,xt=new WeakMap,Le=new WeakMap,Ce=new WeakMap,Kt=new WeakMap,St=new WeakMap,Ct=new WeakMap,Je=new WeakMap,Xe=new WeakMap,Fe=new WeakMap,kt=new WeakMap,et=new WeakSet,rr=function(t){N(this,tr,Hn).call(this);let r=d(this,$).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(le)),r},Gt=new WeakSet,Dn=function(){N(this,Xt,jn).call(this);const t=ht(this.options.staleTime,d(this,$));if(Be||d(this,te).isStale||!sn(t))return;const n=os(d(this,te).dataUpdatedAt,t)+1;S(this,Je,setTimeout(()=>{d(this,te).isStale||this.updateResult()},n))},Yt=new WeakSet,Mn=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(d(this,$)):this.options.refetchInterval)??!1},Zt=new WeakSet,Ln=function(t){N(this,er,Un).call(this),S(this,Fe,t),!(Be||de(this.options.enabled,d(this,$))===!1||!sn(d(this,Fe))||d(this,Fe)===0)&&S(this,Xe,setInterval(()=>{(this.options.refetchIntervalInBackground||hn.isFocused())&&N(this,et,rr).call(this)},d(this,Fe)))},Jt=new WeakSet,Fn=function(){N(this,Gt,Dn).call(this),N(this,Zt,Ln).call(this,N(this,Yt,Mn).call(this))},Xt=new WeakSet,jn=function(){d(this,Je)&&(clearTimeout(d(this,Je)),S(this,Je,void 0))},er=new WeakSet,Un=function(){d(this,Xe)&&(clearInterval(d(this,Xe)),S(this,Xe,void 0))},tr=new WeakSet,Hn=function(){const t=d(this,ie).getQueryCache().build(d(this,ie),this.options);if(t===d(this,$))return;const r=d(this,$);S(this,$,t),S(this,Vt,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Cr=new WeakSet,fo=function(t){G.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(d(this,te))}),d(this,ie).getQueryCache().notify({query:d(this,$),type:"observerResultsUpdated"})})},ho);function Sc(e,t){return de(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function bs(e,t){return Sc(e,t)||e.state.data!==void 0&&mn(e,t,t.refetchOnMount)}function mn(e,t,r){if(de(t.enabled,e)!==!1){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&gn(e,t)}return!1}function ws(e,t,r,n){return(e!==t||de(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&gn(e,r)}function gn(e,t){return de(t.enabled,e)!==!1&&e.isStaleByTime(ht(t.staleTime,e))}function Cc(e,t){return!an(e.getCurrentResult(),t)}var kc=class extends vs{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:yr()},t)}getOptimisticResult(e){return e.behavior=yr(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var g,m;const{state:r}=e,n=super.createResult(e,t),{isFetching:i,isRefetching:s,isError:a,isRefetchError:c}=n,l=(m=(g=r.fetchMeta)==null?void 0:g.fetchMore)==null?void 0:m.direction,h=a&&l==="forward",f=i&&l==="forward",u=a&&l==="backward",v=i&&l==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:bc(t,r.data),hasPreviousPage:wc(t,r.data),isFetchNextPageError:h,isFetchingNextPage:f,isFetchPreviousPageError:u,isFetchingPreviousPage:v,isRefetchError:c&&!h&&!u,isRefetching:s&&!f&&!v}}},Pc=0;function o(e,t,r,n,i,s){t||(t={});var a,c,l=t;if("ref"in l)for(c in l={},t)c=="ref"?a=t[c]:l[c]=t[c];var h={type:e,props:l,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--Pc,__i:-1,__u:0,__source:i,__self:s};if(typeof e=="function"&&(a=e.defaultProps))for(c in a)l[c]===void 0&&(l[c]=a[c]);return R.vnode&&R.vnode(h),h}var xs=ze(void 0),Ec=e=>{const t=ut(xs);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Tc=({client:e,children:t})=>(oe(()=>(e.mount(),()=>{e.unmount()}),[e]),o(xs.Provider,{value:e,children:t})),Ss=ze(!1),Oc=()=>ut(Ss);Ss.Provider;function Rc(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var $c=ze(Rc()),Nc=()=>ut($c);function Ac(e,t){return typeof e=="function"?e(...t):!!e}function Cs(){}var Ic=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Dc=e=>{oe(()=>{e.clearReset()},[e])},Mc=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&e.data===void 0||Ac(r,[e.error,n])),Lc=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...r)=>Math.max(t(...r),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},Fc=(e,t)=>e.isLoading&&e.isFetching&&!t,jc=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ks=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Ps(e,t,r){var u,v,p,g,m;const n=Ec(r),i=Oc(),s=Nc(),a=n.defaultQueryOptions(e);(v=(u=n.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||v.call(u,a),a._optimisticResults=i?"isRestoring":"optimistic",Lc(a),Ic(a,s),Dc(s);const c=!n.getQueryCache().get(a.queryHash),[l]=K(()=>new t(n,a)),h=l.getOptimisticResult(a),f=!i&&e.subscribed!==!1;if(rn(J(_=>{const w=f?l.subscribe(G.batchCalls(_)):Cs;return l.updateResult(),w},[l,f]),()=>l.getCurrentResult()),oe(()=>{l.setOptions(a,{listeners:!1})},[a,l]),jc(a,h))throw ks(a,l,s);if(Mc({result:h,errorResetBoundary:s,throwOnError:a.throwOnError,query:n.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw h.error;if((g=(p=n.getDefaultOptions().queries)==null?void 0:p._experimental_afterQuery)==null||g.call(p,a,h),a.experimental_prefetchInRender&&!Be&&Fc(h,i)){const _=c?ks(a,l,s):(m=n.getQueryCache().get(a.queryHash))==null?void 0:m.promise;_==null||_.catch(Cs).finally(()=>{l.updateResult()})}return a.notifyOnChangeProps?h:l.trackResult(h)}function yn(e,t){return Ps(e,vs,t)}function Uc(e,t){return Ps(e,kc,t)}const Hc=async e=>{{let{posts:t}=await $r({search:`${e} sort:score -video width:<2000 height:<2000`,limit:3});if(t.length===3)return t}{let{posts:t}=await $r({search:`${e} score:>=100`,limit:3});return t}},qc=({tag:e})=>{const{data:t}=yn({queryFn:J(()=>Hc(e),[e]),queryKey:["tag-preview",e]});if(t)return o("div",{className:zc,children:t.map(r=>o("div",{className:Bc,children:o("img",{src:r.thumbnail.url,width:r.thumbnail.width,height:r.thumbnail.height})},r.id))})},zc=C`
    position: absolute;
    top: -13rem;
    height: 12rem;
    padding: 1rem;
    z-index: 10;

    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: row;
    gap: 1rem;

    background: ${E.bgOverlay};
    border: 0.1rem solid black;
    border-radius: 0.5rem;
`,Bc=C`
    height: 100%;
    width: 8rem;
    object-fit: cover;
    border-radius: 1rem;
    overflow: hidden;

    img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
`,Es=(...e)=>e.join(" ");function _n(){const[e,t]=H(K(Ts()),"tags"),r=J(h=>{t(f=>{const u=h(f);return Os(u),u})},[]);oe(()=>Os(e),[e]);const n=H(ne(()=>e.map(h=>({name:h,type:"artist"})),[e]),"subscriptions"),i=H(ne(()=>Rs(e),[e]),"subscriptionsTag"),s=H(ne(Qc,[]),"subscriptionsUrl"),a=J(h=>e.includes(h),[e]),c=J(h=>{r(f=>[h,...f])},[r]),l=J(h=>{r(f=>f.filter(u=>u!==h))},[r]);return{subscriptions:n,subscriptionsTag:i,subscriptionsUrl:s,checkSubscribed:a,addSubscription:c,removeSubscription:l}}function Ts(){const e=window.localStorage.getItem("tag-subscriptions")??"[]";let t=JSON.parse(e);return t=t.map(r=>decodeURIComponent(r)),t}function Os(e){const t=JSON.stringify(e);window.localStorage.setItem("tag-subscriptions",t)}const Rs=e=>" ( "+e.join(" ~ ")+" ) ",Qc=()=>"/index.php?page=post&s=list&subscriptions=yes",Wc="Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.",Vc=e=>o(ve,{viewBox:"0 0 512 512",path:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z",props:e}),Kc=e=>o(ve,{viewBox:"0 0 576 512",path:"M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z",props:e}),Gc=e=>o(ve,{viewBox:"0 0 576 512",path:"M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z",props:e}),Yc=e=>o(ve,{viewBox:"0 0 512 512",path:"M323.8 34.8c-38.2-10.9-78.1 11.2-89 49.4l-5.7 20c-3.7 13-10.4 25-19.5 35l-51.3 56.4c-8.9 9.8-8.2 25 1.6 33.9s25 8.2 33.9-1.6l51.3-56.4c14.1-15.5 24.4-34 30.1-54.1l5.7-20c3.6-12.7 16.9-20.1 29.7-16.5s20.1 16.9 16.5 29.7l-5.7 20c-5.7 19.9-14.7 38.7-26.6 55.5c-5.2 7.3-5.8 16.9-1.7 24.9s12.3 13 21.3 13L448 224c8.8 0 16 7.2 16 16c0 6.8-4.3 12.7-10.4 15c-7.4 2.8-13 9-14.9 16.7s.1 15.8 5.3 21.7c2.5 2.8 4 6.5 4 10.6c0 7.8-5.6 14.3-13 15.7c-8.2 1.6-15.1 7.3-18 15.2s-1.6 16.7 3.6 23.3c2.1 2.7 3.4 6.1 3.4 9.9c0 6.7-4.2 12.6-10.2 14.9c-11.5 4.5-17.7 16.9-14.4 28.8c.4 1.3 .6 2.8 .6 4.3c0 8.8-7.2 16-16 16l-97.5 0c-12.6 0-25-3.7-35.5-10.7l-61.7-41.1c-11-7.4-25.9-4.4-33.3 6.7s-4.4 25.9 6.7 33.3l61.7 41.1c18.4 12.3 40 18.8 62.1 18.8l97.5 0c34.7 0 62.9-27.6 64-62c14.6-11.7 24-29.7 24-50c0-4.5-.5-8.8-1.3-13c15.4-11.7 25.3-30.2 25.3-51c0-6.5-1-12.8-2.8-18.7C504.8 273.7 512 257.7 512 240c0-35.3-28.6-64-64-64l-92.3 0c4.7-10.4 8.7-21.2 11.8-32.2l5.7-20c10.9-38.2-11.2-78.1-49.4-89zM32 192c-17.7 0-32 14.3-32 32L0 448c0 17.7 14.3 32 32 32l64 0c17.7 0 32-14.3 32-32l0-224c0-17.7-14.3-32-32-32l-64 0z",props:e}),Zc=e=>o(ve,{viewBox:"0 0 512 512",path:"M313.4 32.9c26 5.2 42.9 30.5 37.7 56.5l-2.3 11.4c-5.3 26.7-15.1 52.1-28.8 75.2l144 0c26.5 0 48 21.5 48 48c0 18.5-10.5 34.6-25.9 42.6C497 275.4 504 288.9 504 304c0 23.4-16.8 42.9-38.9 47.1c4.4 7.3 6.9 15.8 6.9 24.9c0 21.3-13.9 39.4-33.1 45.6c.7 3.3 1.1 6.8 1.1 10.4c0 26.5-21.5 48-48 48l-97.5 0c-19 0-37.5-5.6-53.3-16.1l-38.5-25.7C176 420.4 160 390.4 160 358.3l0-38.3 0-48 0-24.9c0-29.2 13.3-56.7 36-75l7.4-5.9c26.5-21.2 44.6-51 51.2-84.2l2.3-11.4c5.2-26 30.5-42.9 56.5-37.7zM32 192l64 0c17.7 0 32 14.3 32 32l0 224c0 17.7-14.3 32-32 32l-64 0c-17.7 0-32-14.3-32-32L0 224c0-17.7 14.3-32 32-32z",props:e}),Jc=e=>o(ve,{viewBox:"0 0 512 512",path:"M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z",props:e}),Xc=e=>o(ve,{viewBox:"0 0 448 512",path:"M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z",props:e}),el=e=>o(ve,{viewBox:"0 0 512 512",path:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z",props:e}),tl=e=>o(ve,{viewBox:"0 0 512 512",path:"M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z",props:e}),rl=e=>o(ve,{viewBox:"0 0 448 512",path:"M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z",props:e}),ve=({viewBox:e,path:t,props:r})=>o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:e,"data-license":Wc,...r,children:o("path",{d:t})}),nl={search:Vc,upload:Jc,"star-regular":Kc,"star-solid":Gc,"thumbsup-regular":Yc,"thumbsup-solid":Zc,"profile-solid":Xc,"info-solid":el,"settings-solid":tl,"bars-solid":rl},dt=({icon:e,fill:t,size:r,...n})=>{const i=nl[e],s={fill:t??E.link,...r?{width:r,height:r}:{},...n.style??{}};return o(i,{style:s,...n})},be={newest:"newest",score:"score",random:"random",hot:"hot"};Rr({tags:Pt(zn(Q())),sort:Pt(Qn(be)),minScore:Pt(Wn()),subscriptionsOnly:Pt(Bn())});const _r={sort:be.newest,tags:[],minScore:20,subscriptionsOnly:!1},$s={encodeInParam(e,t){!t||t===_r.sort||t in be&&e.set("sort",t)},decodeFromParam(e){const t=e.get("sort");if(t&&(t==="newest"||t==="score"||t==="random"||t==="hot"))return t}},Ns={encodeInParam(e,t){!t||t.length===0||e.set("searchTags",t.join(" "))},decodeFromParam(e){const t=e.get("searchTags");if(!t)return;let r=t.split(" ");if(r=r.filter(n=>!!n.trim()),r=[...new Set(r)],r.length!==0)return r}},As={encodeInParam(e,t){t&&e.set("subscriptions","yes")},decodeFromParam(e){if(e.get("subscriptions"))return!0}};function il(e){const t=new URLSearchParams;return $s.encodeInParam(t,e.sort),Ns.encodeInParam(t,e.tags),As.encodeInParam(t,e.subscriptionsOnly),t}function sl(e){const t=$s.decodeFromParam(e)??_r.sort,r=Ns.decodeFromParam(e)??_r.tags,n=As.decodeFromParam(e)??_r.subscriptionsOnly;return{sort:t,tags:r,subscriptionsOnly:n,minScore:0}}function Is(e,t){if(t!=="rule34")throw new Error("Unsupported");const{sort:r,minScore:n,tags:i}=e;let s=[];return n&&s.push(`score:>=${n}`),i&&s.push(...i),r===be.score&&s.push("sort:score"),r===be.random&&s.push("sort:random:1"),r===be.hot&&(s.push("sort:score"),s.push("id:>=9000000")),e.subscriptionsOnly&&s.push(Rs(Ts())),s.join(" ")}function Ds(){const e=new URL(document.location.href);return e.searchParams.delete("tags"),history.replaceState(null,"",e.toString()),sl(e.searchParams)}function vn(e,t,r=!0){const n=il(e);return r&&n.set("tags",Is(e,t)),n}const ol=Date.now(),al=e=>new Intl.DateTimeFormat("en-GB",{dateStyle:"full"}).format(e),cl=e=>{const r=(ol-e.getTime())/1e3,n=r/60,i=n/60,s=i/24,a=s/30,c=s/365;return c>=1?`${c.toFixed()} years`:a>=1?`${a.toFixed()} months`:s>=1?`${s.toFixed()} days`:i>=1?`${i.toFixed()} hours`:n>=1?`${n.toFixed()} minutes`:r>=1?`${r.toFixed()} seconds`:"now"},bn=e=>new Intl.NumberFormat("en",{notation:"compact"}).format(e),ll=e=>e.replace(/&#[0-9]+;/,t=>String.fromCharCode(parseInt(t.slice(2).slice(0,-1)))),Ms=ji(({tag:{name:e,type:t,count:r},preview:n=!0})=>{const{checkSubscribed:i,addSubscription:s,removeSubscription:a}=_n(),c=i(e),l=H(lt(null),"linkRef"),h=is(l,100),f=ll(e).replaceAll(/_\([a-z_-\s]*\)/g,"").replaceAll(/_/g," "),u=H(ne(()=>`index.php?page=post&s=list&${vn({tags:[e]},"rule34").toString()}`,[e]),"href"),v=J(()=>{c?a(e):s(e)},[s,c,e,a]);return o("div",{className:hl,children:[h&&n&&o(qc,{tag:e}),o("div",{className:Es(ul,C(`--tag-color: ${ss(t)};`)),children:[o("a",{href:u,ref:l,children:f}),r&&o("span",{className:"tag-count",children:[" ","/ ",bn(r)]}),o("button",{onClick:v,className:C`
                            background: none;
                        `,children:o(dt,{size:"0.75rem",icon:c?"star-solid":"star-regular"})})]})]})}),ul=C`
    display: flex;
    align-items: center;
    gap: 0.25rem;

    padding: 0.15rem 0.25rem;
    width: fit-content;

    background: ${E.bgHighlight};
    border-radius: 0 1rem 1rem 0;
    border-left: 0.15rem solid var(--tag-color);

    a {
        color: var(--tag-color);
        word-break: break-all;
        text-decoration: none;
        &:hover {
            text-decoration: underline;
        }
    }
`,hl=C`
    position: relative;
`,wn=(e,t)=>t.some(r=>e instanceof r);let Ls,Fs;function dl(){return Ls||(Ls=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fl(){return Fs||(Fs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xn=new WeakMap,Sn=new WeakMap,vr=new WeakMap;function pl(e){const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",a)},s=()=>{r(Qe(e.result)),i()},a=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",a)});return vr.set(t,e),t}function ml(e){if(xn.has(e))return;const t=new Promise((r,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",a),e.removeEventListener("abort",a)},s=()=>{r(),i()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",a),e.addEventListener("abort",a)});xn.set(e,t)}let Cn={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return xn.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Qe(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function js(e){Cn=e(Cn)}function gl(e){return fl().includes(e)?function(...t){return e.apply(kn(this),t),Qe(this.request)}:function(...t){return Qe(e.apply(kn(this),t))}}function yl(e){return typeof e=="function"?gl(e):(e instanceof IDBTransaction&&ml(e),wn(e,dl())?new Proxy(e,Cn):e)}function Qe(e){if(e instanceof IDBRequest)return pl(e);if(Sn.has(e))return Sn.get(e);const t=yl(e);return t!==e&&(Sn.set(e,t),vr.set(t,e)),t}const kn=e=>vr.get(e);function _l(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(e,t),c=Qe(a);return n&&a.addEventListener("upgradeneeded",l=>{n(Qe(a.result),l.oldVersion,l.newVersion,Qe(a.transaction),l)}),r&&a.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const vl=["get","getKey","getAll","getAllKeys","count"],bl=["put","add","delete","clear"],Pn=new Map;function Us(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Pn.get(t))return Pn.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=bl.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||vl.includes(r)))return;const s=async function(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let h=l.store;return n&&(h=h.index(c.shift())),(await Promise.all([h[r](...c),i&&l.done]))[0]};return Pn.set(t,s),s}js(e=>({...e,get:(t,r,n)=>Us(t,r)||e.get(t,r,n),has:(t,r)=>!!Us(t,r)||e.has(t,r)}));const wl=["continue","continuePrimaryKey","advance"],Hs={},En=new WeakMap,qs=new WeakMap,xl={get(e,t){if(!wl.includes(t))return e[t];let r=Hs[t];return r||(r=Hs[t]=function(...n){En.set(this,qs.get(this)[t](...n))}),r}};async function*Sl(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,xl);for(qs.set(r,t),vr.set(r,kn(t));t;)yield r,t=await(En.get(r)||t.continue()),En.delete(r)}function zs(e,t){return t===Symbol.asyncIterator&&wn(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&wn(e,[IDBIndex,IDBObjectStore])}js(e=>({...e,get(t,r,n){return zs(t,r)?Sl:e.get(t,r,n)},has(t,r){return zs(t,r)||e.has(t,r)}}));function Cl(e){const t=r=>e.filter(({type:n})=>n===r);return{general:t("general"),artist:t("artist"),copyright:t("copyright"),character:t("character"),metadata:t("metadata")}}let Tn;async function Bs(){return Tn||(Tn=await _l("tagDatabase",1,{upgrade(e){e.createObjectStore("tags",{keyPath:"name"})}})),Tn}async function kl(e){const r=(await Bs()).transaction("tags","readonly"),n=await Promise.all(e.map(async i=>({name:i,data:await r.store.get(i)})));return await r.done,n.map(({name:i,data:s})=>s?{name:i,...s}:{name:i,type:"general"})}async function Qs(e){if(e.length===0)return;const r=(await Bs()).transaction("tags","readwrite");await Promise.all(e.map(async n=>{await r.store.delete(n.name),await r.store.add(n)})),await r.done}const Pl=({tags:e})=>{const t=Cl(e);return o("div",{className:El,children:[o(qt,{title:"Creator",tags:t.artist}),o(qt,{title:"Characters",tags:t.character}),o(qt,{title:"Copyright",tags:t.copyright}),o(qt,{title:"General",tags:t.general}),o(qt,{title:"Meta",tags:t.metadata})]})},qt=({title:e,tags:t})=>t.length===0?null:o(ae,{children:[o("h3",{children:e}),o("div",{className:Tl,children:t.map(r=>o(Ms,{tag:r},r.name))})]}),El=C`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 0.5rem;
`,Tl=C`
    width: fit-content;

    display: flex;
    flex-direction: row;
    gap: 0.5rem 1rem;
    flex-wrap: wrap;
`;function Ol({comment:e}){return o("div",{className:Rl,children:[o("div",{style:{display:"flex",gap:"1rem"},children:[o("a",{href:`index.php?page=account&s=profile&uname=${e.uploader.id}`,children:e.uploader.name}),o("span",{children:e.createdAt.toLocaleDateString()})]}),o("div",{children:e.text})]})}const Rl=C`
    background: ${E.bgHighlight};
    border: 0.1rem solid black;
    border-radius: 0.5rem;

    width: 100%;
    height: fit-content;
    padding: 0.5rem;

    display: flex;
    flex-direction: column;

    word-break: break-all;
`,$l=e=>{const t="children"in e?e.children:e.text;return"href"in e?o("a",{className:Ws,href:e.href,children:t}):o("button",{className:Ws,onClick:()=>e.action(),children:t})},Nl=({icon:e,size:t,...r})=>"href"in r?o("a",{className:Vs,href:r.href,style:{"--size":t},children:o(dt,{icon:e,size:t,className:Ks})}):o("button",{className:Vs,onClick:()=>r.action(),children:o(dt,{icon:e,size:t,className:Ks})}),Ws=C`
    display: block;
    height: var(--size);
    width: var(--size);
    color: ${E.text};
    font-size: 110% !important;
    border-radius: 0.5rem;
    background: ${E.bgHighlight};
    border: 0.1rem solid ${E.textSoft};
    user-select: none;

    &:hover {
        background: ${E.bgDeep};
    }
`,Vs=C`
    display: block;
    height: var(--size);
    width: var(--size);

    font-size: 110% !important;
    user-select: none;
    background: none !important;
    border: none !important;

    color: ${E.textActive} !important;
    &:hover,
    &:active {
        color: ${E.textActive};
    }
`,Ks=C`
    width: auto;
    height: 100%;
`;function Al({xml:e,rootNodeName:t}){const r=new DOMParser().parseFromString(e,"text/xml"),n=r.querySelector(t);if(!n)throw new Error("Could not find root node");const s=Array.from(n.children).map(a=>{const c=Array.from(a.attributes).map(l=>[l.nodeName,l.nodeValue]);return Object.fromEntries(c)});return{document:r,nodes:s}}async function Il(e){const t=`https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index&post_id=${e}`,n=await(await fetch(t)).text(),{nodes:i}=Al({xml:n,rootNodeName:"comments"});return i.map(s=>({id:s.id,createdAt:new Date(s.created_at),text:s.body,uploader:{id:s.creator_id,name:s.creator}}))}const Dl=({post_id:e,total:t,comments:r})=>{const[n,i]=H(K(r),"comments"),s=n.length>=t;async function a(){const c=await Il(e);i(c)}return t===0?o("div",{}):o("div",{className:Ml,children:[o("h4",{children:[t," Comments"]}),o("div",{className:Ll,children:n.map(c=>o(Ol,{comment:c},c.id))}),o("div",{children:!s&&o($l,{text:"Load More",action:a})})]})},Ml=C`
    width: 100%;

    display: flex;
    flex-direction: column;
    gap: 0.5rem;
`,Ll=C`
    display: flex;
    flex-direction: column;
    align-items: center;

    gap: 0.5rem;
`,Fl=ze(null),On={didCatch:!1,error:null};class Gs extends ce{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=On}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var r,n,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:s,reason:"imperative-api"}),this.setState(On)}}componentDidCatch(t,r){var n,i;(n=(i=this.props).onError)===null||n===void 0||n.call(i,t,r)}componentDidUpdate(t,r){const{didCatch:n}=this.state,{resetKeys:i}=this.props;if(n&&r.error!==null&&jl(t.resetKeys,i)){var s,a;(s=(a=this.props).onReset)===null||s===void 0||s.call(a,{next:i,prev:t.resetKeys,reason:"keys"}),this.setState(On)}}render(){const{children:t,fallbackRender:r,FallbackComponent:n,fallback:i}=this.props,{didCatch:s,error:a}=this.state;let c=t;if(s){const l={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")c=r(l);else if(n)c=he(n,l);else if(i===null||Ft(i))c=i;else throw a}return he(Fl.Provider,{value:{didCatch:s,error:a,resetErrorBoundary:this.resetErrorBoundary}},c)}}function jl(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}const Ul=({error:e})=>o("pre",{className:C`
                background: ${E.bgOverlay};
                color: red;
                padding: 1rem;
                font-size: 120%;
            `,children:e.message}),Hl=({post:e})=>{const[t,r]=H(K(()=>ql(e.id)),"hasLiked"),[n,i]=H(K(0),"likeIncrement");return o("button",{className:Bl,disabled:t,onClick:async()=>{await zl(e.id),r(!0),i(1)},children:[o("span",{children:e.score+n}),o(dt,{icon:t?"thumbsup-regular":"thumbsup-solid",size:"1rem"})]})},ql=e=>!!localStorage.getItem(`post-liked-${e}`),zl=async e=>{const t=`https://rule34.xxx/index.php?page=post&s=vote&id=${e}&type=up`;await fetch(t),localStorage.setItem(`post-liked-${e}`,"yes")},Bl=C`
    width: fit-content;
    height: fit-content;
    display: flex;
    align-items: center;
    gap: 0.5rem;

    font-size: 110%;
    border-radius: 0.5rem;
    padding: 0.25rem 0.5rem;

    &,
    &[disabled] {
        background: ${E.bgHighlight};
        border: 0.1rem solid ${E.textSoft};
        color: ${E.text};
    }

    &:active {
        background: ${E.textSoft};
        color: ${E.textActive};
    }

    & > span {
        color: ${E.text};
    }

    & > div {
        height: 1rem;
        width: 1rem;
        display: block;
        color: ${E.link};
    }
`,Ql=({post:e})=>o(ae,{children:o("div",{className:C`
                    display: flex;
                    flex-direction: column;
                    gap: 0.25rem;
                    font-size: 110%;
                `,children:[o("span",{children:[al(e.created_at),"(",cl(e.created_at)," ago)"]}),o("span",{children:[o("b",{children:"Resolution"}),": ",e.full.width,"x",e.full.height]}),o(Hl,{post:e})]})});function Wl({post:e}){const[t,r]=H(K(!1),"zoomed");return o("img",{className:Vl,"data-zoomed":t,onClick:()=>r(n=>!n),src:e.full.url,width:e.full.width,height:e.full.height})}const Vl=C`
    width: 100%;
    height: 100%;
    &[data-zoomed="true"] {
        height: max-content;
        cursor: zoom-out;
    }

    &[data-zoomed="false"] {
        height: calc(100vh - 6rem);
        cursor: zoom-in;
        object-fit: contain;
    }

    background-size: contain;
    background-repeat: no-repeat;
    background-position-x: center;
`;function Kl({post:e}){return o("video",{src:e.full.url,controls:!0,loop:!0,poster:e.thumbnail.url,className:C`
                height: calc(100vh - 6rem);
                width: 100%;
                position: relative;
                background: black;
            `})}const Gl=({post:e})=>o("div",{className:Yl,children:e.type==="video"?o(Kl,{post:e}):o(Wl,{post:e})}),Yl=C`
    height: 100%;
    width: 100%;
    padding: 0 10%;
`,Zl=({page:e,post:t})=>o("div",{className:Xl,children:[o(Gl,{post:t}),o(Jl,{}),o(Gs,{fallbackRender:Ul,children:o("div",{className:C`
                        width: 100%;
                        display: grid;
                        grid-template-columns: 20rem 3fr;
                        grid-template-rows: auto auto;
                        gap: 2rem;
                        padding: 2rem;
                    `,children:[o(Ql,{post:t}),o(Pl,{tags:e.tags}),o("div",{}),o("div",{className:C`
                            width: min(100%, 40rem);
                        `,children:o(Dl,{post_id:t.id,total:e.totalComments,comments:e.comments})})]})})]}),Jl=()=>o("div",{className:C`
            width: calc(100% - 4rem);
            background: ${E.linkSoft};
            border-radius: 1rem;
            height: 2px;
        `}),Xl=C`
    width: 100%;
    padding: 1rem;

    /* In order to switch to grid-rows, we need to update image zoom */
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
`,eu="#tag-sidebar > li:not(:has(h6))";function Ys(){return Ue(()=>U(eu).map(tu).filter(t=>!!t))??[]}const tu=e=>{const t=e.className.replace("tag-type-","").replace(" tag",""),r=L("a:last-of-type",e),n=new URL(r.href),i=tt("tags",n.search);if(!i)return null;const s=L(".tag-count",e);if(!s)return null;const a=parseInt(s.innerText,10);return{name:i,count:a,type:t}};async function ru(){const e=await Ys(),t=Ue(nu)??{comments:[],totalCommentPages:0,totalComments:0},{comments:r,totalCommentPages:n,totalComments:i}=t;return{type:"post",tags:e,comments:r,totalCommentPages:n,totalComments:i}}function nu(){return{comments:U("#comment-list>div").map(e=>({id:ou(e),createdAt:lu(e),text:au(e),uploader:cu(e)})),totalComments:iu(),totalCommentPages:su()}}const iu=()=>{try{const e=L("#comment-list").innerText;return parseInt(/\d+ comments/g.exec(e)[0])}catch{return 0}},su=()=>{const e=U("#paginator>:not([alt], script)").map(r=>parseInt(r.innerText));return Math.max(...e)},ou=e=>e.id.slice(1),au=e=>L(".col2",e).innerText,cu=e=>{const t=L(".col1 > a:first-child",e);if(!t)throw new Error;const r=t.innerText,n=tt("uname",t.href);if(!n)throw new Error;return{id:n,name:r}},lu=e=>{var n;const r=(n=/\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}/g.exec(e.innerText))==null?void 0:n.pop();if(!r)throw new Error;return new Date(r)};async function uu(){return{type:"forum",posts:U(".odd,.even").map(r=>Ue(()=>hu(r))).filter(r=>!!r)}}const hu=e=>{const t=L(".forum-topic>a",e),r=t.innerText,n=t.href,s=e.children[1].innerText,a=void 0,l=e.children[3].innerText,h=e.children[4],f=parseInt(h.innerText);return{title:r,link:n,creator:s,lastReplier:l,replyCount:f,lastUpdated:a}};async function du(){const e=Zs();if(e==="forum")return uu();if(e==="post")return await ru();if(e==="posts"||e==="subscriptions"){const r=Ys();return Qs(r),{type:e,tags:r}}const t=L("#content");if(t)return{type:"generic",html:t.innerHTML}}const fu="Please enter the CAPTCHA to continue to rule34.xxx",Zs=()=>{if(document.body.innerHTML.toLowerCase().includes(fu))return"captcha";let t=window.location.pathname;t.endsWith("/")&&(t=t.slice(0,-1));const r=tt("page"),n=tt("s");return tt("subscriptions")?"subscriptions":r=="post"&&n=="list"?"posts":r=="post"&&n=="view"?"post":r=="account"&&n=="options"?"options":r=="account"?"account":r=="forum"?"forum":r=="help"?"help":t===""||t==="index.php"?"posts":"generic"};function pu(e){const{data:t,fetchNextPage:r}=Uc({queryKey:["posts",e.tags,e.sort,e.subscriptionsOnly],initialPageParam:0,queryFn:async({pageParam:c=0})=>{const l=await $r({search:Is(e,"rule34"),page:c,limit:100});return{pageParam:c+1,data:l}},getNextPageParam:c=>c.pageParam}),n=H(ne(()=>{let c=((t==null?void 0:t.pages)??[]).reduce((h,f)=>[...h,...f.data.posts],[]);const l=new Set;return c=c.filter(h=>l.has(h.id)?!1:(l.add(h.id),!0)),c},[t==null?void 0:t.pages]),"posts"),{total:i,remaining:s}=H(ne(()=>{var f,u,v;const c=(v=(u=(f=t==null?void 0:t.pages)==null?void 0:f[0])==null?void 0:u.data)==null?void 0:v.total;if(!t||!c)return{total:null,remaining:null};const l=t.pages.map(p=>p.data.posts.length).reduce((p,g)=>p+g,0),h=c-l;return{total:c,remaining:h}},[t]),"total"),a=J(async()=>{await r({cancelRefetch:!1})},[r]);return oe(()=>{r({cancelRefetch:!1})},[r]),{posts:n,remaining:s,total:i,nextPage:a}}const mu=({scale:e=1})=>{const t='<style>.spinner_qM83{animation:spinner_8HQG 1.05s infinite}.spinner_oXPr{animation-delay:.1s}.spinner_ZTLf{animation-delay:.2s}@keyframes spinner_8HQG{0%,57.14%{animation-timing-function:cubic-bezier(0.33,.66,.66,1);transform:translate(0)}28.57%{animation-timing-function:cubic-bezier(0.33,0,.66,.33);transform:translateY(-6px)}100%{transform:translate(0)}}</style><circle class="spinner_qM83" cx="4" cy="12" r="3"/><circle class="spinner_qM83 spinner_oXPr" cx="12" cy="12" r="3"/><circle class="spinner_qM83 spinner_ZTLf" cx="20" cy="12" r="3"/>',r=24*e,n=24*e;return o("div",{className:gu,style:{width:r,height:n},children:o("svg",{style:{transform:`scale(${e})`},width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",dangerouslySetInnerHTML:{__html:t}})})},gu=C`
    display: flex;
    align-items: center;
    justify-content: center;
    fill: ${E.linkSoft};
`,yu=({post:e})=>{let t=null;oe(()=>()=>{t&&clearInterval(t)},[t]);const r=n=>{n.currentTime=(n.duration??2)/2,n.playbackRate=.5,n.play(),t=setTimeout(()=>{n.pause(),n.src=""},4e3)};return o("div",{className:_u,children:o("video",{className:vu,src:e.full.url,width:e.full.width,height:e.full.height,onLoadedMetadata:n=>r(n.currentTarget),autoPlay:!0,loop:!0,poster:e.thumbnail.url,disablePictureInPicture:!0,playsInline:!0,muted:!0})})},_u=C`
    position: relative;
    isolation: isolate;
    overflow: hidden;

    width: 100%;
    height: 100%;
`,vu=C`
    width: 100%;
    height: 100%;
    object-fit: cover;
`,bu=({post:e})=>{const t=J(async()=>e!=null&&e.tags?(await kl(e.tags)).filter(({type:l})=>l==="artist")[0]:void 0,[e==null?void 0:e.tags]),{data:r}=yn({queryFn:t,queryKey:["thumbnail-artist",e==null?void 0:e.id]}),n=H(lt(null),"imageRef"),i=H(lt(null),"thumbnailRef"),s=is(i,200);return oe(()=>{const a=n.current;if(!a)return;const c=([h])=>{h.isIntersecting?a.loading="eager":a.loading="lazy"},l=new IntersectionObserver(c,{});return l.observe(a),()=>l.disconnect()}),o("a",{className:wu,ref:i,href:e&&`/index.php?page=post&s=view&id=${e.id}`,children:[o("div",{className:Su,children:e&&((e==null?void 0:e.type)==="video"&&s?o(yu,{post:e}):o("img",{loading:"lazy",ref:n,src:e==null?void 0:e.thumbnail.url,width:e==null?void 0:e.thumbnail.width,height:e==null?void 0:e.thumbnail.height}))}),o("div",{className:xu,"data-type":(e==null?void 0:e.type)??"image",children:[o("span",{className:C`
                        color: ${E.linkArtist};
                    `,children:(r==null?void 0:r.name)??""}),e&&o("span",{children:["Score ",bn(e.score)]})]})]})},wu=C`
    position: relative;
    isolation: isolate;
    overflow: hidden;
    width: var(--GRID-SIZE);
    height: calc(var(--GRID-SIZE) * 1.5);

    background: ${E.bgHighlight};
    border: 0.1rem solid black;
    border-radius: 1rem;
    color: ${E.textActive};
    text-decoration: none;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
`,xu=C`
    height: 2rem;
    width: 100%;
    padding: 0 2rem;

    text-shadow: none;
    display: flex;
    justify-content: space-between;
    align-items: center;

    &[data-type="video"] {
        background: #2c2d75;
    }
`,Su=C`
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: ${E.bgDeep};

    & > * {
        transition: 300ms;
        transform-origin: center;

        transform: scale(1);
        filter: brightness(1);
    }

    & > img {
        object-fit: cover;
        width: 100%;
        height: 100%;
    }

    &:hover > * {
        transform: scale(1.07);
        filter: brightness(0.6);
    }
`,Cu=({search:e})=>{const{posts:t,remaining:r,nextPage:n,total:i}=pu(e);console.log({posts:t,remaining:r,total:i});const s=J(a=>{if(!a)return;const c=new IntersectionObserver(async l=>{if(l[0].isIntersecting){if(r===0){c.disconnect();return}n()}});c.observe(a)},[n,r]);return o("div",{children:[o("div",{className:ku,children:t.map(a=>o(bu,{post:a},a.id))}),o("div",{className:Pu,children:!!r&&o("span",{ref:s,children:o(mu,{scale:2})})})]})},ku=C`
    --GRID-SIZE: 16rem;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--GRID-SIZE), 1fr));
    justify-items: center;
    gap: 1rem;
`,Pu=C`
    width: 100%;
    display: flex;
    justify-content: center;
    padding: 2rem;
`,Eu=({value:e,options:t,onSelect:r})=>{const n=J(i=>r(i.currentTarget.value),[r]);return o("select",{value:e,className:Tu,onChange:n,children:yo(t).map(([i,s])=>o("option",{"aria-current":i===e,value:i,children:s}))})},Tu=C`
    height: fit-content;
    border-radius: 0.25rem;
    padding: 0.25rem;
    color: ${E.textActive} option;

    option {
        color: ${E.text};
        &[aria-current="true"] {
            color: ${E.textActive};
        }
    }
`,Ou={[be.newest]:"Newest",[be.score]:"Top Rated",[be.hot]:"Hotest",[be.random]:"Random"},Ru=()=>{const[e,t]=H(K(()=>Ds()),"search"),{subscriptions:r}=_n(),n=r.toSorted((a,c)=>a.name.localeCompare(c.name)),i=Zs(),s=a=>{const c={...e,sort:a},h="/index.php?page=post&s=list&"+vn(c,"rule34",!1).toString();history.replaceState(null,"",h),t(c)};return o("div",{className:C`
                height: 100%;

                position: relative;
                display: grid;
                grid-template-rows: 4rem auto;
                grid-template-columns: 1fr 6fr 1fr;
            `,children:[o("div",{style:{gridRow:1,gridColumn:3},className:C`
                    display: flex;
                    align-items: center;
                    justify-content: space-around;

                    position: sticky;
                    top: 2.5rem;
                    z-index: 10;
                `,children:o(Eu,{options:Ou,value:e.sort,onSelect:s})}),o("div",{style:{gridRow:2,gridColumn:1},className:C`
                    display: flex;
                    flex-direction: column;
                    padding-left: 1rem;
                    gap: 0.5rem;
                `,children:i==="subscriptions"&&n.map(a=>o(Ms,{tag:a}))}),o("div",{style:{gridRow:2,gridColumn:2,overflowY:"auto",height:"100%"},children:o(Cu,{search:e})})]})},$u=()=>o("div",{className:"help",children:[o("h1",{children:"Posts"}),o("p",{children:"A post represents a single file that's been uploaded. Each post can have several tags, comments, and notes. If you have an account, you can also add a post to your favorites."}),o("div",{className:"section",children:[o("h4",{children:"Search"}),o("p",{children:["Searching for posts is straightforward. Simply enter the tags you want to search for, separated by spaces. For example, searching for ",o("code",{children:"original panties"})," will return every post that has both the original tag"," ",o("strong",{children:"AND"})," the panties tag."]}),o("h4",{children:"Safe images only mode"}),o("p",{children:["Sometimes viewing all our images is a bit of a problem. You may not be in a location where it is acceptable to view adult content. We have a temporary, hacked together, way to only view safe images when searching our large image database. Not all images are rated correctly so you should not put too much faith into this.",o("br",{}),o("br",{}),"You are still able to view adult images if you click the links to the posts directly."]})]}),o("div",{className:"section",children:[o("h4",{children:"Tag List"}),o("p",{children:"In both the listing page and the show page you'll notice a list of tag links with characters next to them. Here's an explanation of what they do:"}),o("dl",{children:[o("dt",{children:"+"}),o("dd",{children:"This adds the tag to the current search."}),o("dt",{children:""}),o("dd",{children:"This adds the negated tag to the current search."}),o("dt",{children:"950"}),o("dd",{children:"The number next to the tag represents how many posts there are. This isn't always the total number of posts for that tag. It may be slightly out of date as cache isn't always refreshed."}),o("dt",{children:"Color"}),o("dd",{children:"Some tag links may be colored green, purple, or red. Green means the tag represents a character. Purple means the tag represents a copyright (things like anime, manga, games, or novels). Red means the tag represents an artist."})]}),o("p",{children:"When you're not searching for a tag, by default the tag list will show the last few tags added to the database. When you are searching for tags, the tag list will show related tags, alphabetically."})]}),o("h4",{children:"Types"}),o("p",{children:"Tags can be typed. Currently there are only three types: artist, character, and copyright."}),o("div",{className:"section",children:[o("h6",{children:"Artist"}),o("p",{children:["Artist tags identify the tag as the artist. This doesn't mean the artist of the original copyrighted artwork (for example, you wouldn't use the ",o("code",{children:"barasui"})," tag on a picture of Miu drawn by ",o("code",{children:"hanaharu_naruko"}),")."]}),o("p",{children:["When tagging something, you can tell Rule34 that a tag is an artist tag by prefixing it with ",o("code",{children:"artist:"}),". For example, tagging something ",o("code",{children:"artist:mark tree"})," ","will tag a post with ",o("code",{children:"mark"})," and ",o("code",{children:"tree"}),". If the ",o("code",{children:"mark"})," tag doesn't already exist, it'll be created with the tag type set to artist."]}),o("h6",{children:"Character"}),o("p",{children:'Character tags identify the tag as a character. They work exactly like artist tags, only you prefix with "character" (or "char").'}),o("h6",{children:"Copyright"}),o("p",{children:'The copyright type indicates the tag represents an anime, a game, a novel, or some sort of copyrighted setting. Otherwise they work identically to character and artist tags, only you prefix with "copyright" instead (or "copy").'})]}),o("h4",{children:"Artifacts"}),o("p",{children:"Artifacts are the residue of image processing usually left in the JPEG format. It makes the image look weird and blocky around parts of the drawing"}),o("div",{className:"section",children:[o("h6",{children:"Examples"}),o("p",{children:"For your convenience, here are links to some examples. Don't upload images with artifacts."}),o("p",{children:[o("a",{href:"/counter/help/images/1.jpg",children:"1 (No noticeable compression"}),") |"," ",o("a",{href:"/counter/help/images/2.jpg",children:"2 Light Compression"})," ","|"," ",o("a",{href:"/counter/help/images/3.jpg",children:"3 (Heavy Compression)"})," ","|"," ",o("a",{href:"/counter/help/images/4mspaint.jpg",children:"4 (Ms Paint compression)"})]})]})]}),Nu=()=>o("div",{className:"help",children:[o("h1",{children:"Ratings"}),o("div",{className:"section",children:[o("p",{children:["All posts on Rule34 have one of three types of ratings: Safe, Questionable, and Explicit. Questionable is the default rating if you do not choose to specify one."," ",o("strong",{children:"Please take note"}),": occasionally explicit images will be marked safe, and vice versa. You should not depend completely on rating filters unless you can tolerate the occasional wrongly rated image. If this happens to you, fix it so that other users don't have that happen to them."]}),o("div",{className:"section",children:[o("h4",{children:"Explicit"}),o("p",{children:"Any image where the vagina or penis are exposed and easily visible. This includes depictions of sex, masturbation, or any sort of penetration."})]}),o("div",{className:"section",children:[o("h4",{children:"Safe"}),o("p",{children:["Safe posts are images that you would not feel guilty looking at openly in public. Pictures of nudes, exposed nipples or pubic hair, cameltoe, or any sort of sexually suggestive pose are ",o("b",{children:"NOT"})," safe and belong in questionable. Swimsuits and lingerie are borderline cases; some are safe, some are questionable."]})]}),o("div",{className:"section",children:[o("h4",{children:"Questionable"}),o("p",{children:"Basically anything that isn't safe or explicit. This is the great middle area, and since it includes unrated posts, you shouldn't really expect anything one way or the other when browsing questionable posts."})]}),o("div",{className:"section",children:[o("h4",{children:"Search"}),o("p",{children:["You can filter search results by querying for"," ",o("code",{children:"rating:safe"}),", ",o("code",{children:"rating:questionable"}),", or ",o("code",{children:"rating:explicit"}),". You can also combine them with other tags and they work as expected."]}),o("p",{children:["If you want to remove a rating from your search results, use"," ",o("code",{children:"-rating:safe"}),", ",o("code",{children:"-rating:questionable"}),", and ",o("code",{children:"-rating:explicit"}),"."]})]})]})]}),Au=()=>o("div",{className:"help",children:[o("h1",{children:"Forum"}),o("p",{children:"All forum posts are sanitized, meaning all HTML is escaped. That being said, there are a few features you can use:"}),o("div",{className:"section",children:[o("h4",{children:"URLs"}),o("p",{children:"Any URL starting with http:// will automatically be converted into a link."})]}),o("div",{className:"section",children:[o("h4",{children:"Post Link Shorthand"}),o("p",{children:"You can link to specific post/view pages using the following shorthand: [post]nnnn[/post], where nnnn is the id number of the post."})]}),o("div",{className:"section",children:[o("h4",{children:"Forum Link Shorthand"}),o("p",{children:"You can link to specific forum using the following shorthand: [forum]nnnn[/forum], where nnnn is the id number of the forum."})]}),o("div",{className:"section",children:[o("h4",{children:"Forum Post Link Shorthand"}),o("p",{children:"You can link to specific forum posts using the following shorthand: [forump]nnnn[/forump], where nnnn is the id number of the forum post."})]})]}),Iu=()=>o("div",{className:"help",children:[o("h1",{children:"Pools"}),o("div",{className:"section",children:[o("p",{children:"Pools are groups of posts with a common theme. They are similar to favorites with three important differences: public pools allow anyone to add or remove from them, you can create multiple pools, and posts in a pool can be ordered. This makes pools ideal for subjective tags, or for posts that are part of a series (as is the case in cg sets)."}),o("p",{children:["If you're importing several posts into a pool, this process can become tedious. You can instead click on the Import link at the bottom of the pool's page. This allows you to execute a post search using any"," ",o("a",{href:"index.php?page=help&topic=cheatsheet",children:"tag combination"})," ","you would normally use. Remove any posts that are irrelevant to the pool, then finish the import process."]}),o("p",{children:"Pools can be private, public or personal. A private pool means you are the only person who can add or remove from it. In contrast, public pools can be updated by anyone, even anonymous users depending on current site restrictions, while personal pools are just that, personal. Only you have any access to view or make changes to it. This pool type is meant to be used as a favorite grouping system."}),o("p",{children:"To remove a post from a pool, go to the pool's page and select the Delete Mode checkbox. Then click on the posts you want to delete."})]})]}),Du=()=>o("div",{className:"help",children:[o("h1",{children:"Cheat Sheet"}),o("div",{className:"section",children:[o("h4",{children:"Searching"}),o("dt",{children:"tag1 tag2"}),o("dd",{children:"Search for posts that have tag1 and tag2."}),o("dt",{children:"( tag1 ~ tag2 )"}),o("dd",{children:["Search for posts that have tag1 or tag2. The braces are"," ",o("b",{children:"important"}),' to group the tags between which the "or" counts. The spaces between the braces and tags are also'," ",o("b",{children:"important"})," because some tags end in braces!"]}),o("dt",{children:"night~"}),o("dd",{children:["Fuzzy search for the tag night. This will return results such as night fight bright and so on according to the"," ",o("a",{href:"http://en.wikipedia.org/wiki/Levenshtein_distance",rel:"nofollow",target:"_blank",children:"Levenshtein distance"}),"."]}),o("dt",{children:"-tag1"}),o("dd",{children:"Search for posts that don't have tag1."}),o("dt",{children:"ta*1"}),o("dd",{children:"Search for posts with tags that starts with ta and ends with 1."}),o("dt",{children:"user:bob"}),o("dd",{children:"Search for posts uploaded by the user Bob."}),o("dt",{children:"md5:foo"}),o("dd",{children:"Search for posts with the MD5 hash foo."}),o("dt",{children:"md5:foo*"}),o("dd",{children:"Search for posts whose MD5 starts with the MD5 hash foo."}),o("dt",{children:"rating:questionable"}),o("dd",{children:"Search for posts that are rated questionable."}),o("dt",{children:"-rating:questionable"}),o("dd",{children:"Search for posts that are not rated questionable."}),o("dt",{children:"parent:1234"}),o("dd",{children:"Search for posts that have 1234 as a parent (and include post 1234)."}),o("dt",{children:"rating:questionable rating:safe"}),o("dd",{children:"In general, combining the same metatags (the ones that have colons in them) will not work."}),o("dt",{children:"rating:questionable parent:100"}),o("dd",{children:"You can combine different metatags, however."}),o("dt",{children:"width:>=1000 height:>1000"}),o("dd",{children:"Find images with a width greater than or equal to 1000 and a height greater than 1000."}),o("dt",{children:"score:>=10"}),o("dd",{children:"Find images with a score greater than or equal to 10. This value is updated once daily at 12AM CST."}),o("dt",{children:"sort:updated:desc"}),o("dd",{children:["Sort posts by their most recently updated order.",o("br",{}),o("br",{}),o("i",{children:o("b",{children:"Other sortable types:"})}),o("br",{}),o("div",{children:o("ul",{children:[o("li",{children:"id"}),o("li",{children:"score"}),o("li",{children:"rating"}),o("li",{children:"user"}),o("li",{children:"height"}),o("li",{children:"width"}),o("li",{children:"parent"}),o("li",{children:"source"}),o("li",{children:"updated"})]})}),"Can be sorted by both asc or desc."]})]})]}),Mu=()=>o("div",{className:"help",children:[o("h1",{children:"API Basics"}),'You should never receive an error unless the server is overloaded or the search dies. In cases of the searcher breaking, you will receive a response success of "false" and a message stating "search down" or similiar.',o("br",{}),o("br",{}),o("div",{className:"section",children:[o("h2",{children:"Posts"}),o("h4",{children:"List"}),"Url for API access:"," ",o("b",{children:"https://api.rule34.xxx/index.php?page=dapi&s=post&q=index"}),o("br",{}),o("br",{}),o("ul",{children:[o("li",{children:[o("strong",{children:"limit"})," How many posts you want to retrieve. There is a hard limit of 1000 posts per request."]}),o("li",{children:[o("strong",{children:"pid"})," The page number."]}),o("li",{children:[o("strong",{children:"tags"})," The tags to search for. Any tag combination that works on the web site will work here. This includes all the meta-tags. See cheatsheet for more information."]}),o("li",{children:[o("strong",{children:"cid"})," Change ID of the post. This is in Unix time so there are likely others with the same value if updated at the same time."]}),o("li",{children:[o("strong",{children:"id"})," The post id."]}),o("li",{children:[o("strong",{children:"json"})," Set to 1 for JSON formatted response."]})]}),o("h4",{children:"Deleted Images"}),"Url for API access:"," ",o("b",{children:"https://api.rule34.xxx/index.php?page=dapi&s=post&q=index&deleted=show"}),o("br",{}),o("br",{}),o("ul",{children:o("li",{children:[o("strong",{children:"last_id"})," A numerical value. Will return everything above this number."]})})]}),o("div",{className:"section",children:[o("h2",{children:"Comments"}),o("h4",{children:"List"}),"Url for API access:"," ",o("b",{children:"https://api.rule34.xxx/index.php?page=dapi&s=comment&q=index"}),o("br",{}),o("br",{}),o("ul",{children:o("li",{children:[o("strong",{children:"post_id"})," The id number of the comment to retrieve."]})})]}),o("div",{className:"section",children:[o("h2",{children:"Tags"}),o("h4",{children:"List"}),"Url for API access:"," ",o("strong",{children:"https://api.rule34.xxx/index.php?page=dapi&s=tag&q=index"}),o("br",{}),o("br",{}),o("ul",{children:[o("li",{children:[o("strong",{children:"id"})," The tag's id in the database. This is useful to grab a specific tag if you already know this value."]}),o("li",{children:[o("strong",{children:"limit"})," How many tags you want to retrieve. There is a default limit of 100 per request.",o("br",{})]})]})]})]}),Lu=()=>o("div",{className:C`
            padding: 0 2rem;
        `,children:[o($u,{}),o(Nu,{}),o(Au,{}),o(Iu,{}),o(Du,{}),o(Mu,{})]}),Fu=({tags:e,onClick:t})=>e===void 0||e.length===0?null:o("div",{className:Uu,children:e.map(r=>o(ju,{onClick:()=>t(r.name),tag:r},r.name))}),ju=({onClick:e,tag:{name:t,type:r,count:n}})=>o("button",{className:Es(Hu,C`
                    color: ${ss(r)};
                `),onMouseDown:e,children:[t,n&&" / "+bn(n)]}),Uu=C`
    position: absolute;
    z-index: 20;
    top: 2.5rem;
    left: 0;
    width: 100%;
    border-radius: 0.5rem;
    padding: 1rem;
    background: ${E.bgAlt};

    display: flex;
    flex-direction: column;
    gap: 0.25rem;
`,Hu=C`
    cursor: pointer;
    padding: 0.1rem;
    background: none;
    border: none;
    text-align: left;

    &:focus {
        border: none;
        text-decoration: underline;
    }
`;async function qu(e){return(await(await fetch(`https://ac.rule34.xxx/autocomplete.php?q=${e}`)).json()).map(i=>({name:i.value,type:i.type??"general",count:Ue(()=>parseInt(/\(([0-9]+)\)/.exec(i.label)[1]))??0}))}async function zu(e){if(e===void 0||e==="")return[];if(e.startsWith("sort:"))return[{name:"sort:score",type:"general"},{name:"sort:random",type:"general"},{name:"sort:id",type:"general"},{name:"sort:id:desc",type:"general"},{name:"sort:created_at",type:"general"},{name:"sort:updated",type:"general"}];if(e.startsWith("meta:"))return[{name:"meta:subscribed",type:"general"}];const t=await qu(e);return await Qs(t),t}function Bu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qu=function(){function e(t,r,n,i,s){return t<r||n<r?t>n?n+1:t+1:i===s?r:r+1}return function(t,r){if(t===r)return 0;if(t.length>r.length){var n=t;t=r,r=n}for(var i=t.length,s=r.length;i>0&&t.charCodeAt(i-1)===r.charCodeAt(s-1);)i--,s--;for(var a=0;a<i&&t.charCodeAt(a)===r.charCodeAt(a);)a++;if(i-=a,s-=a,i===0||s<3)return s;var c=0,l,h,f,u,v,p,g,m,_,w,b,x,k=[];for(l=0;l<i;l++)k.push(l+1),k.push(t.charCodeAt(a+l));for(var y=k.length-1;c<s-3;)for(_=r.charCodeAt(a+(h=c)),w=r.charCodeAt(a+(f=c+1)),b=r.charCodeAt(a+(u=c+2)),x=r.charCodeAt(a+(v=c+3)),p=c+=4,l=0;l<y;l+=2)g=k[l],m=k[l+1],h=e(g,h,f,_,m),f=e(h,f,u,w,m),u=e(f,u,v,b,m),p=e(u,v,p,x,m),k[l]=p,v=u,u=f,f=h,h=g;for(;c<s;)for(_=r.charCodeAt(a+(h=c)),p=++c,l=0;l<y;l+=2)g=k[l],k[l]=p=e(g,h,p,_,k[l+1]),h=g;return p}}();const Wu=Bu(Qu),Vu=async({callback:e,key:t,timeout:r})=>{const n="cache-"+(typeof t=="object"?t.join("-"):t);let i=Ku(n,r);if(i)return i;const s={value:await e(),timestamp:Date.now()};return sessionStorage.setItem(n,JSON.stringify(s)),s.value},Ku=(e,t)=>{let r=sessionStorage.getItem(e);if(r)try{const n=JSON.parse(r);if(!t)return n.value;if(Date.now()-n.timestamp>t){sessionStorage.removeItem(e);return}return n.value}catch(n){sessionStorage.removeItem(e),console.warn("Cache retrival failed"),console.warn(n)}};function Gu(e,t){return e.sort((r,n)=>t(r)-t(n))}async function Yu(e){if(!e)return[];let t=await Vu({callback:()=>zu(e),key:["tag-search",e]});const r=n=>Wu(n,e??"");return t=Gu(t,n=>r(n.name)),t}function Zu(e){const t=H(ne(()=>e.split(" ").at(-1),[e]),"tag"),r=J(async()=>await Yu(t),[t]),{data:n}=yn({queryFn:r,queryKey:["tag-autocomplete",e??""],placeholderData:ac});return n}const Ju=e=>{const[t,r]=H(K(!1),"focused");return oe(()=>{const n=e.current;if(!n)return;const{abort:i,signal:s}=new AbortController;return n.addEventListener("focus",()=>r(!0),{signal:s}),n.addEventListener("blur",()=>r(!1),{signal:s}),()=>i()},[e]),t},Xu=({initialSearch:e,onSubmit:t})=>{const[r,n]=H(K(""),"search"),[i,s]=H(K(e.tags),"tags"),a=H(lt(null),"inputRef"),c=Ju(a),l=Zu(r),h=l==null?void 0:l.filter(p=>!i.includes(p.name)),f=c&&r.length>0,u=p=>{p.key!=="Backspace"||r!==""||(p.preventDefault(),s(g=>g.slice(0,-1)))},v=J(p=>{if(p.preventDefault(),!(r.length>0))t({tags:i});else{const m=i.includes(r)?i:[...i,r];s(m),n("")}},[t,r,i]);return o("div",{className:eh,children:[o("div",{className:rh,children:[o("div",{className:sh,children:i.map(p=>o("button",{className:oh,onClick:()=>s(g=>g.filter(m=>m!==p)),children:p}))}),o("form",{className:th,onSubmit:v,children:o("input",{type:"text",ref:a,value:r,className:nh,onKeyDown:u,onChange:p=>{n(p.target.value)}})})]}),f&&o(Fu,{onClick:p=>{s(g=>[...g,p]),n("")},tags:h??[]}),o("button",{className:ih,onClick:()=>t({tags:i}),children:o(dt,{icon:"search",fill:E.bg,size:"1.5rem"})})]})},eh=C`
    position: relative;
    height: 2rem;
    width: 100%;

    display: grid;
    grid-template-columns: 1fr 3rem;
`,th=C`
    width: 100%;
`,rh=C`
    padding-left: 0.5rem;
    border-radius: 0.75rem 0 0 0.75rem;
    background: ${E.bgDeep};
    border: ${E.linkSoft} solid 0.1rem;
    border-right: 0;

    display: flex;
    align-items: center;
`,nh=C`
    width: 100%;
    border: none !important;
    background: none;
`,ih=C`
    display: flex;
    place-items: center;
    justify-content: center;

    border: ${E.linkSoft} solid;
    border-top: 0.1rem;
    border-bottom: 0.1rem;

    font-weight: 700;
    color: ${E.bg};
    background-color: ${E.linkSoft};
    border-radius: 0 0.5rem 0.5rem 0;
`,sh=C`
    display: flex;
    gap: 0.5rem;
    padding-left: 0.25rem;
`,oh=C`
    padding: 0.1rem 0.25rem;
    background: ${E.bgHighlight};
    border-radius: 0.25rem;
    color: ${E.textActive};

    display: flex;
    gap: 0.25rem;
    text-wrap: nowrap;
`,Rn=({href:e,icon:t,alt:r})=>o("a",{href:e,className:ah,children:o(dt,{icon:t,size:"1.5rem",alt:r})}),ah=C`
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0 0;

    height: 100%;
    color: ${E.textActive} !important;
`,br=({href:e,current:t,label:r})=>o("a",{href:e,"data-current":t,className:ch,children:o("span",{children:r})}),ch=C`
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;

    height: 3rem;
    width: 100%;
    text-shadow: 1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000,
        -1px 1px 1px #000;
    font-size: 130%;

    color: ${E.textActive} !important;

    &:hover {
        text-decoration: underline;
    }

    &[data-current="true"] {
        background-color: ${E.bgHighlight};
    }
`,lh=({type:e,open:t,onClose:r})=>{const{subscriptionsUrl:n}=_n();return o("div",{className:hh,children:[o("nav",{className:dh,"aria-hidden":!t,children:[o("div",{className:"top",children:[o(br,{label:"Posts",href:"/index.php?page=post&s=list",current:e==="posts"}),o(br,{label:"Subscriptions",href:n,current:e==="subscriptions"}),o(br,{label:"Forum",href:"/index.php?page=forum&s=list",current:e==="forum"})]}),o("div",{className:"bottom",children:o(br,{label:"Help",href:"/index.php?page=help",current:e==="help"})})]}),o("div",{className:uh,"aria-hidden":!t,onClick:i=>{i.target.tagName==="DIV"&&r()}})]})},uh=C`
    position: absolute;
    inset: 0;
    width: 100vw;
    height: calc(100vh - 3rem);
    z-index: 20;

    background-color: rgb(0, 0, 0, 0.3);

    transition: 150ms ease-out;
    opacity: 1;
    &[aria-hidden="true"] {
        visibility: hidden;
        opacity: 0;
    }
`,hh=C`
    position: sticky;
    left: 0;
    top: 0;
    width: 0;
    height: 0;
    z-index: 20;
`,dh=C`
    z-index: 30;
    height: calc(100vh - 3rem);
    width: 12rem;
    position: sticky;
    top: 3rem;
    left: 0;
    isolation: isolate;
    background: ${E.bg};

    display: flex;
    flex-direction: column;
    justify-content: space-between;

    .top,
    .bottom {
        display: flex;
        flex-direction: column;
    }

    transition: 150ms ease-out;
    opacity: 1;
    transform: translateX(0%);
    &[aria-hidden="true"] {
        opacity: 0;
        transform: translateX(-100%);
    }
`,Js=({page:{type:e}})=>{const t=Ds(),[r,n]=H(K(!1),"sidebarOpen"),i=J(({tags:s})=>{const a={...t,tags:s},l="/index.php?page=post&s=list&"+vn(a,"rule34",!1).toString();window.location.assign(l)},[t]);return o("div",{className:fh,children:[o("header",{className:ph,children:o("nav",{className:mh,children:[o("div",{children:o(Nl,{icon:"bars-solid",size:"1.5rem",action:()=>n(s=>!s)})}),o(Xu,{initialSearch:t,onSubmit:i}),o(Rn,{icon:"settings-solid",alt:"Settings",href:"/index.php?page=account&s=options"}),o(Rn,{icon:"upload",alt:"Upload",href:"/index.php?page=post&s=add"}),o(Rn,{icon:"profile-solid",alt:"Account",href:"/index.php?page=account&s=home"})]})}),o(lh,{open:r,type:e,onClose:()=>n(!1)})]})},fh=C`
    position: sticky;
    top: 0;
    z-index: 100;
`,ph=C`
    height: 3rem;
    position: sticky;
    top: 0;
    left: 0;
    isolation: isolate;
    z-index: 100;
    padding: 0 1rem;
`,mh=C`
    height: 100%;
    display: flex;
    justify-content: left;
    align-items: center;
    gap: 1.5rem;

    font-weight: bold;
    background: ${E.bg};
`,gh=({error:e,resetErrorBoundary:t})=>(console.error(e),o("div",{className:yh,children:[o("h3",{children:"Something went wrong!"}),o("pre",{className:_h,children:e.message}),o("button",{className:vh,onClick:t,children:"Try Again"})]})),yh=C`
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 1rem;
    align-items: center;
`,_h=C`
    background: ${E.bgOverlay};
    color: red;
    padding: 1rem;
    font-size: 120%;
`,vh=C`
    padding: 0.5rem;
    border: 0.1rem solid black;
    border-radius: 0.25rem;
    background: ${E.bgHighlight};
    color: ${E.link};
    cursor: pointer;
`,wr=({children:e,page:t})=>o("div",{children:[o(Js,{page:t}),o(Gs,{fallbackRender:gh,children:o(Mt,{children:e})})]}),bh=ze(null),wh=({page:e,children:t})=>o(bh.Provider,{value:e,children:t}),qh="",zh="";var xr={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Xs;function xh(){if(Xs)return xr;Xs=1,xr.parse=a,xr.serialize=h;var e=Object.prototype.toString,t=Object.prototype.hasOwnProperty,r=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,n=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/;function a(p,g){if(typeof p!="string")throw new TypeError("argument str must be a string");var m={},_=p.length;if(_<2)return m;var w=g&&g.decode||f,b=0,x=0,k=0;do{if(x=p.indexOf("=",b),x===-1)break;if(k=p.indexOf(";",b),k===-1)k=_;else if(x>k){b=p.lastIndexOf(";",x-1)+1;continue}var y=c(p,b,x),O=l(p,x,y),T=p.slice(y,O);if(!t.call(m,T)){var A=c(p,x+1,k),M=l(p,k,A);p.charCodeAt(A)===34&&p.charCodeAt(M-1)===34&&(A++,M--);var W=p.slice(A,M);m[T]=v(W,w)}b=k+1}while(b<_);return m}function c(p,g,m){do{var _=p.charCodeAt(g);if(_!==32&&_!==9)return g}while(++g<m);return m}function l(p,g,m){for(;g>m;){var _=p.charCodeAt(--g);if(_!==32&&_!==9)return g+1}return m}function h(p,g,m){var _=m&&m.encode||encodeURIComponent;if(typeof _!="function")throw new TypeError("option encode is invalid");if(!r.test(p))throw new TypeError("argument name is invalid");var w=_(g);if(!n.test(w))throw new TypeError("argument val is invalid");var b=p+"="+w;if(!m)return b;if(m.maxAge!=null){var x=Math.floor(m.maxAge);if(!isFinite(x))throw new TypeError("option maxAge is invalid");b+="; Max-Age="+x}if(m.domain){if(!i.test(m.domain))throw new TypeError("option domain is invalid");b+="; Domain="+m.domain}if(m.path){if(!s.test(m.path))throw new TypeError("option path is invalid");b+="; Path="+m.path}if(m.expires){var k=m.expires;if(!u(k)||isNaN(k.valueOf()))throw new TypeError("option expires is invalid");b+="; Expires="+k.toUTCString()}if(m.httpOnly&&(b+="; HttpOnly"),m.secure&&(b+="; Secure"),m.partitioned&&(b+="; Partitioned"),m.priority){var y=typeof m.priority=="string"?m.priority.toLowerCase():m.priority;switch(y){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(m.sameSite){var O=typeof m.sameSite=="string"?m.sameSite.toLowerCase():m.sameSite;switch(O){case!0:b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"strict":b+="; SameSite=Strict";break;case"none":b+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return b}function f(p){return p.indexOf("%")!==-1?decodeURIComponent(p):p}function u(p){return e.call(p)==="[object Date]"}function v(p,g){try{return g(p)}catch{return p}}return xr}var Sr=xh();function Sh(){const e=typeof global>"u"?void 0:global.TEST_HAS_DOCUMENT_COOKIE;return typeof e=="boolean"?e:typeof document=="object"&&typeof document.cookie=="string"}function Ch(e){return typeof e=="string"?Sr.parse(e):typeof e=="object"&&e!==null?e:{}}function $n(e,t={}){const r=kh(e);if(!t.doNotParse)try{return JSON.parse(r)}catch{}return e}function kh(e){return e&&e[0]==="j"&&e[1]===":"?e.substr(2):e}class Ph{constructor(t,r={}){this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.update=()=>{if(!this.HAS_DOCUMENT_COOKIE)return;const i=this.cookies;this.cookies=Sr.parse(document.cookie),this._checkChanges(i)};const n=typeof document>"u"?"":document.cookie;this.cookies=Ch(t||n),this.defaultSetOptions=r,this.HAS_DOCUMENT_COOKIE=Sh()}_emitChange(t){for(let r=0;r<this.changeListeners.length;++r)this.changeListeners[r](t)}_checkChanges(t){new Set(Object.keys(t).concat(Object.keys(this.cookies))).forEach(n=>{t[n]!==this.cookies[n]&&this._emitChange({name:n,value:$n(this.cookies[n])})})}_startPolling(){this.pollingInterval=setInterval(this.update,300)}_stopPolling(){this.pollingInterval&&clearInterval(this.pollingInterval)}get(t,r={}){return r.doNotUpdate||this.update(),$n(this.cookies[t],r)}getAll(t={}){t.doNotUpdate||this.update();const r={};for(let n in this.cookies)r[n]=$n(this.cookies[n],t);return r}set(t,r,n){n?n=Object.assign(Object.assign({},this.defaultSetOptions),n):n=this.defaultSetOptions;const i=typeof r=="string"?r:JSON.stringify(r);this.cookies=Object.assign(Object.assign({},this.cookies),{[t]:i}),this.HAS_DOCUMENT_COOKIE&&(document.cookie=Sr.serialize(t,i,n)),this._emitChange({name:t,value:r,options:n})}remove(t,r){const n=r=Object.assign(Object.assign(Object.assign({},this.defaultSetOptions),r),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=Object.assign({},this.cookies),delete this.cookies[t],this.HAS_DOCUMENT_COOKIE&&(document.cookie=Sr.serialize(t,"",n)),this._emitChange({name:t,value:void 0,options:r})}addChangeListener(t){this.changeListeners.push(t),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===1&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.addEventListener("change",this.update):this._startPolling())}removeChangeListener(t){const r=this.changeListeners.indexOf(t);r>=0&&this.changeListeners.splice(r,1),this.HAS_DOCUMENT_COOKIE&&this.changeListeners.length===0&&(typeof window=="object"&&"cookieStore"in window?window.cookieStore.removeEventListener("change",this.update):this._stopPolling())}}const Eh=ze(new Ph);typeof SuppressedError=="function"&&SuppressedError;var Nn={exports:{}},F={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eo;function Th(){if(eo)return F;eo=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,c=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,h=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,u=e?Symbol.for("react.suspense"):60113,v=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,w=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function x(y){if(typeof y=="object"&&y!==null){var O=y.$$typeof;switch(O){case t:switch(y=y.type,y){case l:case h:case n:case s:case i:case u:return y;default:switch(y=y&&y.$$typeof,y){case c:case f:case g:case p:case a:return y;default:return O}}case r:return O}}}function k(y){return x(y)===h}return F.AsyncMode=l,F.ConcurrentMode=h,F.ContextConsumer=c,F.ContextProvider=a,F.Element=t,F.ForwardRef=f,F.Fragment=n,F.Lazy=g,F.Memo=p,F.Portal=r,F.Profiler=s,F.StrictMode=i,F.Suspense=u,F.isAsyncMode=function(y){return k(y)||x(y)===l},F.isConcurrentMode=k,F.isContextConsumer=function(y){return x(y)===c},F.isContextProvider=function(y){return x(y)===a},F.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===t},F.isForwardRef=function(y){return x(y)===f},F.isFragment=function(y){return x(y)===n},F.isLazy=function(y){return x(y)===g},F.isMemo=function(y){return x(y)===p},F.isPortal=function(y){return x(y)===r},F.isProfiler=function(y){return x(y)===s},F.isStrictMode=function(y){return x(y)===i},F.isSuspense=function(y){return x(y)===u},F.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===h||y===s||y===i||y===u||y===v||typeof y=="object"&&y!==null&&(y.$$typeof===g||y.$$typeof===p||y.$$typeof===a||y.$$typeof===c||y.$$typeof===f||y.$$typeof===_||y.$$typeof===w||y.$$typeof===b||y.$$typeof===m)},F.typeOf=x,F}var to;function Oh(){return to||(to=1,Nn.exports=Th()),Nn.exports}var An,ro;function Rh(){if(ro)return An;ro=1;var e=Oh(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};s[e.ForwardRef]=n,s[e.Memo]=i;function a(g){return e.isMemo(g)?i:s[g.$$typeof]||t}var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,u=Object.getPrototypeOf,v=Object.prototype;function p(g,m,_){if(typeof m!="string"){if(v){var w=u(m);w&&w!==v&&p(g,w,_)}var b=l(m);h&&(b=b.concat(h(m)));for(var x=a(g),k=a(m),y=0;y<b.length;++y){var O=b[y];if(!r[O]&&!(_&&_[O])&&!(k&&k[O])&&!(x&&x[O])){var T=f(m,O);try{c(g,O,T)}catch{}}}}return g}return An=p,An}Rh();function $h(){return typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"}function Nh(e,t){const r=ut(Eh);if(!r)throw new Error("Missing <CookiesProvider>");const i=Object.assign(Object.assign({},{doNotUpdate:!0}),t),[s,a]=K(()=>r.getAll(i));$h()&&ct(()=>{function f(){const u=r.getAll(i);Ah(e||null,u,s)&&a(u)}return r.addChangeListener(f),()=>{r.removeChangeListener(f)}},[r,s]);const c=ne(()=>r.set.bind(r),[r]),l=ne(()=>r.remove.bind(r),[r]),h=ne(()=>r.update.bind(r),[r]);return[s,c,l,h]}function Ah(e,t,r){if(!e)return!0;for(let n of e)if(t[n]!==r[n])return!0;return!1}const Ih=({children:e})=>{const[t]=Nh(["theme"]),[r,n]=H(K(),"_");return oe(()=>{const i=t.theme==="dark"?nc:rc,s=ic(i);n(a=>(a&&a.remove(),po(` body { ${s} }`)))},[t.theme]),e},zt=({page:e,children:t})=>{const r=new xc;return o(tc.StrictMode,{children:o(Tc,{client:r,children:o(wh,{page:e,children:o(Ih,{children:t})})})})};function Bt(e){return{render:function(t){Ki(t,e)},unmount:function(){Xi(e)}}}async function Dh(e){if(e.type==="post")return await Mh(e);e.type==="help"?await Fh(e):e.type==="posts"||e.type==="subscriptions"?await Lh(e):e.type==="generic"?await jh(e):await Uh(e)}async function Mh(e){const t=tt("id"),r=await ko(t);if(!r)return;Bt(document.body).render(o(zt,{page:e,children:o(wr,{page:e,children:o(Zl,{page:e,post:r})})}))}async function Lh(e){Bt(document.body).render(o(zt,{page:e,children:o(wr,{page:e,children:o(Ru,{page:e})})}))}async function Fh(e){Bt(document.body).render(o(zt,{page:e,children:o(wr,{page:e,children:o(Lu,{})})}))}async function jh(e){Bt(document.body).render(o(zt,{page:e,children:o(wr,{page:e,children:o("div",{id:"content",dangerouslySetInnerHTML:{__html:e.html}})})}))}async function Uh(e){const t=await Y("#header");t.id="rr-header",Bt(t).render(o(zt,{page:e,children:o(Js,{page:e})}))}function Hh(){Re("[data-nosnippet]"),Re(".horizontalFlexWithMargins"),Re("img[src$='r34chibi.png']")}(async()=>{const e=await du();!e||e.type==="captcha"||(Ue(Hh),await Dh(e))})()});
;
(function(){
                    const el = document.createElement("style");
                    el.innerText = "body,div,h1,h2,h3,h4,h5,h6,p,ul,li,dd,dt{margin:0;padding:0}:where(a:link,a:visited,a:hover,a:active){color:var(--c-link);text-decoration:none}a.spoiler{cursor:text}div#static-index{text-align:center;display:flex;flex-direction:column;align-items:center}div#static-index>div#links>a{margin:0 .5em}div#static-more>div{float:left;width:25%}div#static-more>div>ul{margin-top:2em}div#static-more>div>ul>li{list-style-type:none;margin:0}addr{display:block;margin-left:2em;font-weight:700}code{font-family:monospace;font-size:1.2em}dd{margin-bottom:1em}dt{font-weight:700}h1{font-size:2em}h2{font-size:1.8em}h2.wiki-title{margin-bottom:.25em}h3{font-size:1.6em}h4{font-size:1.4em}h5{font-size:1.2em}h6{font-size:1em}img{border:none;vertical-align:middle}label{font-weight:700;white-space:nowrap}ol{margin-left:1em}p{margin-bottom:1em}span.informational{cursor:help}span.spoiler{cursor:text}span.plid{display:none}span.unread-topic,strong.divider{font-weight:700}textarea{display:block;padding:0 .3em;font-family:monospace;font-size:1.2em}textarea.no-block{display:inline}ul{margin-bottom:1em}ul.bare-list li{list-style-type:none}ul.flat-list{margin:0;padding:0}ul.flat-list li{display:inline;list-style-type:none;font-weight:700;padding:0;margin:0 1em 0 0}ul.flat-list li a{font-weight:400}ul.flat-list li a.forum-update{font-style:italic}ul.link-page{font-size:1.2em;font-weight:700}ul.link-page>li{margin:0;padding:0;list-style-type:none}.history-search-row{clear:left;margin:0;bottom:0}.history-search-label{width:10%;float:left}div#artist-index>table td{white-space:nowrap}div.auto_complete{width:350px}div.auto_complete ul{border:1px solid;margin:0;padding:0;width:100%;list-style-type:none}div.auto_complete ul li{margin:0;padding:3px}div.auto_complete ul strong.highlight{margin:0;padding:0}div.blocked{border:2px solid;font-size:1.2em;padding:1em;margin:1em;text-align:center}div#footer{margin-top:1em;text-align:center;font-size:120%;clear:both}div.has-mail{border:2px solid;padding:1em;margin:1em;font-size:1.5em;text-align:center}div.help{margin-top:2em}div.help a.code{font-family:monospace}div.help div.code{border:1px dashed;margin:1em 0;padding:1em 2em;overflow:hidden;font-family:monospace}div.help>div.section{margin-bottom:4em}div.help>div.section>div.section{margin-bottom:2em}div.help h1,div.help h2,div.help h3,div.help h4{margin:0 0 .5em}div#info{font-style:italic}div#mail-show div.message{margin-bottom:4em}div.notice{font-size:1.2em;font-weight:700;margin-bottom:1em;padding-left:20px}div.quote{margin-top:10px;padding:12px;text-align:justify;font-style:italic;font-size:12px;font-family:sans-serif,arial,tahoma;border:1px solid}div#related{margin:0 3em 1em 0}div#related>div.tag-column{float:left;margin:0 2em 2em 0;max-width:12em;height:35em}div#related>div.tag-column>a{margin-right:1em}div.sidebar li{list-style-type:none;margin:0;word-wrap:break-word}a.original-file-changed#highres{font-weight:700}div.status-notice{border:2px solid;padding:1em;margin:1em}div.status-notice p{margin:0}div#tag-list{text-align:center;margin-bottom:2em}div#tag-list>a{padding-right:5px}div.tips{background:#d9e6f7;border-bottom:1px solid #c9def8;padding:5px 5px 5px 20px;font-size:11px}div#forum>table th:first-child{text-align:left}div#forum>table td:first-child{text-align:left}div.response-list>div.post>div.content>div.footer{margin-top:1em}div.mailbuttons{font-size:15px;color:#dadada;text-align:center}div.mailhint{padding:25px;font-weight:700}div.mailheader{margin-bottom:5px}div.mailbody{margin:5px;border-style:solid;border-width:1px;padding:15px}div.mailtitle{font-weight:lighter;font-size:large}div.mailtitle>div{font-weight:bolder;padding-left:25px}#navbar li.current-page a{font-weight:700}.tradio{position:absolute;clip:rect(0,0,0,0)}div#paginator a{border:1px solid}div#paginator span{margin:0 3px;padding:2px 6px}.manual-page-chooser>input[type=text]{width:4em}img.flagged,img.has-children,img.has-parent,img.pending,img.video{border:3px solid}img.preview{margin:auto}div#post-add p#scale{font-style:italic}div#post-popular>h3{text-align:center;margin-bottom:1em}div#note-container{position:absolute}div#note-container>div.note-body{border:1px solid;display:none;max-width:300px;min-width:140px;min-height:10px;position:absolute;padding:5px;cursor:pointer;overflow:auto}div#note-container>div.note-body>p.tn{font-size:.8em}div#note-container>div.note-box{position:absolute;border:1px solid;width:150px;height:150px;cursor:move}div#note-container>div.note-box>div.note-corner{width:7px;height:7px;position:absolute;bottom:0;right:0;cursor:se-resize}div#note-container>div.unsaved{border:1px solid}div#post-view>div#right-col>div#edit{margin-bottom:2em;padding:1em}span.blacklisted-image{display:none}table{margin-bottom:2em}table.form p{font-size:.8em;font-weight:400;margin:0;padding:0}table.highlightable{border-collapse:collapse;border-spacing:0}table.highlightable td{border:1px dotted;margin:0}table.highlightable th{margin:0}table td{padding:1px 4px;vertical-align:top}table th{font-weight:700;text-align:left;vertical-align:top;padding:.2em .5em;white-space:nowrap}.unchanged-tags{font-size:.8em}div.wiki>h2.title{color:#009}div#wiki-show>div#body{line-height:2em;width:50em;text-align:left;float:left}div#wiki-show>div#body ul{line-height:1.2em;margin:0 0 0 1em}div#wiki-show>div#body>ul{margin-bottom:1em}div#wiki-show>div#body>div#byline{font-style:italic}div#wiki-diff>div#body{font-family:monospace;font-size:1.2em;margin-top:1em}div#wiki-diff del{text-decoration:line-through}div#post-comments{max-width:680px;margin-top:10px}div#post-comments div#comment-list>div{margin-bottom:1em}div#post-comments div#comment-list>div>div.col2{margin-top:10px}div#post-comments div#comment-list>div>div.col2>div.header{margin-bottom:1em}div#post-comments div#comment-list>div>div.col2>div.header>div>span.info{margin-right:1em}div#post-comments div#comment-list>div>div.col2>div.header>div.tags>span{margin:0 .5em 0 0}div#comments div#comment-list>div.post{float:left;clear:left;margin-bottom:3em}div#comments div#comment-list>div.post>div.col1{float:left;clear:left}div#comments div#comment-list>div.post>div.col2{float:left;width:50em}div#comments div#comment-list>div.post>div.col2>div.header{margin-bottom:1em}div#comments div#comment-list>div.post>div.col2>div.header>div>span.info{margin-right:1em}div#comments div#comment-list>div.post>div.col2>div.header>div.tags>span{margin:0 .5em 0 0}html{min-height:100%}body{font-size:80%;padding:0;margin:0}div#content{padding:0 20px 30px}div.sidebar{margin-right:1em;overflow:visible;max-width:200px}div.sidebarRight{padding-left:20px}div.verticalFlexWithMargins{display:flex;flex-direction:column;padding-top:5px;padding-bottom:5px}div.verticalFlexWithMargins>*{margin-top:5px;margin-bottom:5px}div.horizontalFlexWithMargins{display:flex;flex-direction:row;padding-left:5px;padding-right:5px}div.horizontalFlexWithMargins>*{margin-left:5px;margin-right:5px}li{margin-right:.5em}div.page,div.help{width:40em}input{padding:0 .3em}div.response-list{display:flex;flex-direction:column}div.response-list>div.post{margin-bottom:2em}div.response-list>div.post>div.author{float:left;width:15em;padding-right:1em;overflow-x:hidden}div.response-list>div.post>div.author>h6{font-size:1.3em}div.response-list>div.post>div.content{float:left;width:30em;padding:0 0 0 10px;margin:0}div.mailmessage{width:750px}div.mailbuttons :not(:last-child):after{content:\"  |\"}label[for=nav-trigger],.nav-trigger{display:none}div#header{margin-bottom:1em}div#header ul#subnavbar{padding:5px 20px 5px 15px;margin:0 0 1em}div#header ul#navbar{padding:5px 20px 3px 10px;margin:0}div#header ul#navbar li{font-size:120%;padding:2px 10px 3px;margin:0}div#header ul#navbar li.current-page a{font-weight:700}div#header ul#subnavbar li{padding:0 5px}div#header #site-title{padding:10px 20px 1px}div#paginator{display:block;padding:2em 0 1em;font-size:1em;text-align:center;clear:both}div#paginator a{margin:0 3px;padding:2px 6px}div#post-view,div#post-list,div.flexi{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-start}div#upload-form table,div#edit-form table{width:850px}.thumb{display:inline-block;text-align:center;vertical-align:top;margin:0 10px 20px 0;width:200px;height:200px}.thumb img{max-width:100%;max-height:100%;vertical-align:middle}div.tag-search{padding-bottom:5px;width:150px}div.tag-search small{display:none}div.tag-search input[type=text]{width:100%;padding:0;clear:both;box-sizing:border-box}div.tag-search input[type=submit]{box-sizing:border-box;width:100%;border:1px solid;margin-top:3px}div.tag-search form br{display:none}div.tag-search{margin:0}table.form th{white-space:normal;padding-right:1em;text-align:right}table.form{width:70em}*{--c-bg: #303a30;--c-bg-alt: #293129;--c-bg-deep: #303030;--c-bg-highlight: #505a50;--c-bg-overlay: #242424e6;--c-text: #c0c0c0;--c-text-soft: #878787;--c-link: #b0e0b0;--c-link-soft: #93b393;--c-link-artist: #f0a0a0;--c-link-character: #f0f0a0;--c-link-copyright: #f0a0f0;--c-link-metadata: #90d9ed;--ff-narrow: \"tahoma\", \"trebuchet ms\", \"arial\", sans-serif}body{color:var(--c-text);background-color:var(--c-bg);background-image:none}a.last-page{color:#666}a.spoiler{color:#000;background:#000}a.spoiler:hover{color:#fff}.blacklisted-tags-disabled{color:#aaa}dt.bad{color:red}h2.wiki-title{color:#003dd8}:where(input[type=text],input[type=password],input[type=email],input[type=date],textarea,select){border-width:1px;border-style:solid;border-color:var(--c-bg-highlight);background-color:var(--c-bg-deep);color:var(--c-text)}input[type=submit],input[type=button],button{border-width:1px;border-style:solid;font-weight:700;color:var(--c-bg);border-color:var(--c-bg-highlight);background-color:var(--c-link-soft)}input[type=submit][disabled],input[type=button][disabled],button[disabled]{filter:saturate(0%) brightness(70%)}input[type=submit]:not([disabled]):active,input[type=button]:not([disabled]):active,button:not([disabled]):active{filter:invert(100%) hue-rotate(180deg)}input[type=submit][name=commit][style]{border-color:var(--c-bg-highlight);background-color:var(--c-link-soft)}input[type=text]:focus,input[type=password]:focus,textarea:focus{background-color:var(--c-bg-deep)}span.author,span.date{color:#aaa}span.locked-topic{color:#666}span.post-count{color:#aaa}span.spoiler{color:#000;background:#000}span.spoiler:hover{color:#fff}strong.divider{color:gray}div.auto_complete{background:#fff}div.auto_complete ul{border-color:#888}div.auto_complete ul li.selected{background-color:#ffb}div.auto_complete ul strong.highlight{color:#800}div.blocked{border-color:red;background:#fcc;color:red}div#footer{color:#ccc}div#footer>.footer-disabled{color:#777}div#footer>#label{color:#777}div.help div.code{border-color:green;background:#eee}div.help h4{color:unset}div.mail .received{color:#060}div.mail .sent{color:#600}div#notice{color:red}div.quote{background-color:var(--c-bg-highlight);border-color:var(--c-text)}div.status-notice,div.has-mail{border-width:1px;border-color:var(--c-bg-highlight);background-color:var(--c-bg-deep)}#post-list>div.status-notice,#post-view>div.status-notice{width:100%}.status-notice+br,.status-notice+br+br{display:none}div.tips{border-bottom-color:#c9def8}a.original-file-changed#highres{color:#0030fa}div#user-record>table>tbody>tr.positive-record{background:#efe}div#user-record>table>tbody>tr.negative-record{background:#fee}.blacklisted-image{filter:invert(100%) contrast(80%) brightness(145%)}img[src$=\"rule34.xxx/images/r34chibi.png\"],img[src$=\"rule34.xxx/icame.png\"],img[src$=\"rule34.xxx//icame.png\"]{opacity:.5}form[action=\"index.php?page=search\"]+small{display:none}div#wiki-show>div#body>div#byline{color:#666}div#wiki-diff del{background-color:#f88}div#wiki-diff ins{background-color:#8f8}.obsolete-tag-change{color:#000}.tag-type-artist>a,a.tag-type-artist,.tag-type-artist>a:hover,a.tag-type-artist:hover,.tag-type-artist{color:var(--c-link-artist)}.tag-type-character>a,a.tag-type-character,.tag-type-character>a:hover,a.tag-type-character:hover,.tag-type-character{color:var(--c-link-character)}.tag-type-copyright>a,a.tag-type-copyright,.tag-type-copyright>a:hover,a.tag-type-copyright:hover,.tag-type-copyright{color:var(--c-link-copyright)}.tag-type-metadata>a,a.tag-type-metadata,.tag-type-metadata>a:hover,a.tag-type-metadata:hover,.tag-type-metadata{color:var(--c-link-metadata)}.tag-count{color:var(--c-text-soft)}.added-tags{color:#0c0}.removed-tags{color:red}#tag-sidebar>li[class*=tag-type-]>span:not([class]){font-size:xx-small;font-family:var(--ff-narrow);color:var(--c-text-soft)}#tag-sidebar>li[class*=tag-type-]>span:not([class])[style]{color:var(--c-text-soft)}tr.tableheader,thead tr{background-color:var(--c-bg-highlight)}tr.tableheader,thead tr,table.highlightable>tbody>tr{background-image:unset}table.form th{color:unset}table.highlightable>tbody>tr:not(.tableheader):hover{background-color:unset}table.highlightable th{color:#fff}table.highlightable td{border-color:#eee}table tr.good{background:#e6ffe6}table tr.selected{background:#aee}table tr.highlight{background:#ffd}table tr.pending-tag{background-color:var(--c-bg-alt)}img.flagged{border-color:red}img.has-children{border-color:#0f0}img.has-parent{border-color:#cc0}img.pending,img.video{border-color:#00f}div#post-add p#scale{color:#999}div#note-container>div.note-body,div#note-container>#edit-box{background:var(--c-bg-overlay);border-color:#000}div#note-container>div.note-body>p.tn{color:var(--c-text)}tn{color:gray}div#note-container>div.note-box{border-color:#000;background:#ffe}div#note-container>div.note-box>div.note-corner{background:#000}div#note-container>div.unsaved{background:#fff;border-color:red}div#note-container>div.unsaved>div.note-corner{background:red}div.response-list>div.post>div.content>div.footer{color:#ccc}div.response-list>div.post>div.content>div.footer a{color:var(--c-link)}div#paginator a:hover{background-color:var(--c-link-soft);color:var(--c-link)}#navbar li.current-page a{color:unset}.tlabel{background-color:var(--c-link-soft);outline:.2rem solid var(--c-link-soft)}body{font-family:verdana,sans-serif;background:var(--r-bg);color:var(--r-text);font-size:80%;overflow-x:hidden}:where(button){all:unset;cursor:pointer}:where(button)[disabled]{cursor:unset}div#content{padding:1rem}:scope:focus,:scope:active{outline:inherit;border:inherit}#rr-header{position:sticky;top:0;z-index:1000;margin:0!important}*,*:before,*:after{box-sizing:border-box}*{margin:0}img,picture,video,canvas,svg{display:block;max-width:100%}input,button,textarea,select{font:inherit}p,h1,h2,h3,h4,h5,h6{overflow-wrap:break-word}:where(input:focus,input:active){outline:unset;border:unset}\n";
                    el.type = "text/css";
                    document.head.appendChild(el);
                })();
